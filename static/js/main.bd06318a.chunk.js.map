{"version":3,"sources":["utils/setupSupabaseTablesExtended.js","utils/supabaseClient.js","contexts/AuthContext.jsx","utils/menuHandlers.js","components/Navbar.jsx","components/Footer.jsx","components/DashboardLayout.jsx","utils/main.js","pages/Login.jsx","pages/Register.jsx","components/Spinner.jsx","pages/Dashboard.jsx","pages/HealthOverview.jsx","pages/MedicalHistoryPage.jsx","pages/ChronicDiseaseManagementPage.jsx","pages/VaccinationHistoryPage.jsx","pages/MedicationTracker.jsx","pages/HealthAnalyticsPage.jsx","pages/UpcomingAppointmentsPage.jsx","pages/AppointmentHistoryPage.jsx","pages/TelehealthConsultationsPage.jsx","pages/AppointmentRemindersPage.jsx","pages/HelpCenterPage.jsx","pages/ContactSupportPage.jsx","pages/LiveChat.jsx","pages/ProfilePage.jsx","pages/SecuritySettings.jsx","pages/DataBackup.jsx","components/SetupDatabase.jsx","pages/DatabaseSetup.jsx","components/HealthMetricsVisualizer.jsx","components/MedicalImageAnalyzer.jsx","components/HealthAssistant.jsx","components/AIInsightsDashboard.jsx","pages/ai/HealthMetricsAI.jsx","utils/openai.js","pages/ai/MedicalImageAnalysis.jsx","pages/ai/HealthRecommendations.jsx","App.js","serviceWorker.js","reportWebVitals.js","index.js"],"names":["createClient","require","supabaseUrl","process","supabaseAnonKey","supabase","module","exports","createExecuteSqlFunction","async","createFunctionSQL","error","rpc","sql","console","warn","message","insertSampleData","log","diseases","name","category","description","from","upsert","createStorageBuckets","enableStorageSQL","buckets","bucket","storage","createBucket","public","includes","createPoliciesSQL","AuthContext","createContext","useAuth","useContext","AuthProvider","_ref","children","user","setUser","useState","loading","setLoading","useEffect","auth","getSession","then","_ref2","_session$user","data","session","subscription","onAuthStateChange","_event","_session$user2","unsubscribe","value","signUp","signIn","signInWithPassword","signOut","React","createElement","Provider","closeAllMenus","menuItems","document","querySelectorAll","overlay","querySelector","forEach","item","classList","remove","subMenu","body","style","overflow","addEventListener","healthOverview","getElementById","window","location","href","Navbar","navigate","useNavigate","isAdmin","setIsAdmin","e","preventDefault","toggle","contains","setupMenuListeners","checkUserRole","_user$user_metadata","getUser","user_metadata","role","handleMenuClick","currentTarget","id","handleLogout","className","Link","to","src","alt","data-link","onClick","Footer","position","backgroundImage","width","textAlign","padding","marginTop","color","Date","getFullYear","DashboardLayout","Login","showSignup","setShowSignup","notification","setNotification","loginEmail","setLoginEmail","loginPassword","setLoginPassword","firstName","setFirstName","lastName","setLastName","signupEmail","setSignupEmail","signupPassword","setSignupPassword","confirmPassword","setConfirmPassword","showNotification","type","arguments","length","undefined","setTimeout","height","onSubmit","email","password","options","first_name","last_name","profileError","insert","created_at","toISOString","updated_at","required","placeholder","onChange","target","autoComplete","Register","formData","setFormData","setError","handleChange","oldProfileError","full_name","FaUser","FaEnvelope","FaLock","FaUserMd","disabled","Spinner","viewBox","points","fill","strokeWidth","strokeLinecap","strokeLinejoin","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","ArcElement","Title","Tooltip","Legend","Dashboard","_healthData$profile","healthData","setHealthData","vitals","medications","appointments","conditions","alerts","profile","userError","profileData","select","eq","single","code","newProfile","createError","prev","fetchData","title","icon","link","map","card","index","key","styles","actionButton","display","opacity","visibility","HealthOverview","userId","setUserId","userDetails","setUserDetails","showModal","setShowModal","newReport","setNewReport","disease_id","since","file","preview","setPreview","notificationTimeout","setNotificationTimeout","userDiseases","setUserDiseases","userParameters","setUserParameters","extractedParameters","setExtractedParameters","showDeleteModal","setShowDeleteModal","reportToDelete","setReportToDelete","fetchHealthData","fetchUserDetails","fetchUserDiseases","fetchUserParameters","fetchUser","uid","err","duration","clearTimeout","timeout","Container","top","right","zIndex","minWidth","maxWidth","boxShadow","aria-label","Button","variant","Row","report","_report$user_diseases","Col","md","sm","Card","Body","user_diseases","disease_name","Text","size","handleDeleteReport","reportId","open","document_url","Modal","show","onHide","centered","Header","closeButton","Form","_extractedParameters$","_extractedParameters$2","_extractedParameters$3","_extractedParameters$4","_extractedParameters$5","_extractedParameters$6","Error","fileExt","split","pop","fileName","now","uploadData","uploadError","upload","publicUrl","getPublicUrl","reportData","user_id","ai_summary","aiAnalysis","summary","insertedReport","reportError","hasErrors","errorDetails","parameters","Object","keys","parameterData","entries","record_id","parameter_name","parameter_value","JSON","stringify","String","paramError","push","conditionData","filter","condition","trim","condition_name","condError","medicationData","medication","medication_name","medError","recommendations","recError","recommendation_text","join","Group","Label","Select","disease","Control","accept","files","_result$aiAnalysis5","_result$aiAnalysis5$s","_result$aiAnalysis6","_result$aiAnalysis6$c","_result$aiAnalysis7","_result$aiAnalysis7$m","_result$aiAnalysis8","_result$aiAnalysis8$r","startsWith","FormData","append","debugResponse","fetch","ok","debugData","json","environment","OPENAI_API_KEY","text","debugError","response","method","errorData","errorMessage","details","result","_result$aiAnalysis","_result$aiAnalysis2","_result$aiAnalysis3","_result$aiAnalysis4","hasParameters","Boolean","parametersType","parametersKeys","parametersValues","values","v","hasAiAnalysis","aiAnalysisType","aiAnalysisKeys","conditionsType","isConditionsArray","Array","isArray","medicationsType","isMedicationsArray","parse","jsonError","parametersCount","summaryLength","conditionsLength","medicationsLength","recommendationsLength","Fragment","fetchError","delete","aiError","pathMatch","match","storagePath","userFolder","storageError","deleteError","MedicalHistoryPage","medicalRecords","setMedicalRecords","isEditing","setIsEditing","currentRecord","setCurrentRecord","diagnosis_date","doctor","treatment","notes","fetchMedicalRecords","order","ascending","resetForm","FaHistory","update","htmlFor","rows","FaEdit","FaPlus","record","toLocaleDateString","scrollTo","behavior","handleEdit","confirm","handleDelete","FaTrash","ChronicDiseaseManagementPage","chronicDiseases","setChronicDiseases","currentDisease","setCurrentDisease","severity","symptoms","fetchChronicDiseases","getSeverityBadgeClass","FaDiagnoses","med","symptom","VaccinationHistoryPage","vaccinations","setVaccinations","currentVaccination","setCurrentVaccination","vaccine_name","date_administered","administered_by","lot_number","next_dose_date","fetchVaccinations","isDueSoon","nextDoseDate","today","diffTime","diffDays","Math","ceil","isOverdue","FaSyringe","some","vax","FaCalendarCheck","vaccination","MedicationTracker","setMedications","newMedication","setNewMedication","frequency","customFrequency","quantity","fetchMedications","Notification","permission","requestPermission","FaPills","last_taken","handleDeleteMedication","HealthAnalyticsPage","selectedMetric","setSelectedMetric","timeRange","setTimeRange","chartData","setChartData","showAddForm","setShowAddForm","newMetric","setNewMetric","weight","heart_rate","blood_pressure_systolic","blood_pressure_diastolic","blood_sugar","oxygen_saturation","recorded_at","prepareChartData","handleInputChange","filteredData","oneMonthAgo","setMonth","getMonth","threeMonthsAgo","sixMonthsAgo","oneYearAgo","setFullYear","labels","borderColor","backgroundColor","datasets","label","getMetricLabel","tension","metric","getLatestMetricValue","sortedData","sort","a","b","latestValue","FaChartLine","FaTimes","exportToCSV","csvData","csvContent","row","blob","Blob","url","URL","createObjectURL","setAttribute","appendChild","click","removeChild","metricData","fromEntries","_","step","min","max","FaWeight","FaHeartbeat","FaTint","FaLungs","getMetricIcon","Line","responsive","plugins","legend","tooltip","mode","intersect","scales","y","beginAtZero","UpcomingAppointmentsPage","setAppointments","currentAppointment","setCurrentAppointment","doctor_name","specialty","date","time","reminder_set","fetchAppointments","gte","checked","isToday","dateString","isUpcoming","app","FaClock","appointment","FaMapMarkerAlt","AppointmentHistoryPage","searchTerm","setSearchTerm","filterDate","setFilterDate","filterDoctor","setFilterDoctor","sortOrder","setSortOrder","fetchAppointmentHistory","lt","filteredAppointments","matchesSearch","toLowerCase","matchesDate","matchesDoctor","dateA","dateB","FaSearch","handleSortChange","exportToCsv","cell","FaFileDownload","FaCalendarAlt","TelehealthConsultationsPage","consultations","setConsultations","currentConsultation","setCurrentConsultation","consultation_type","meeting_link","fetchConsultations","isPast","upcomingConsultations","consultation","pastConsultations","FaVideo","cons","FaPhone","FaLink","rel","AppointmentRemindersPage","reminders","setReminders","reminderSettings","setReminderSettings","email_reminders","sms_reminders","browser_notifications","reminder_time","phone_number","appointmentsData","appointmentsError","telehealthData","telehealthError","allAppointments","tel","settingsData","settingsError","remindersData","remindersError","handleSettingsChange","FaBell","reminder","appointment_type","appointment_time","toLocaleString","reminderData","reminderId","appointment_id","deleteReminder","appointmentDate","reminderHours","parseInt","reminderTime","getTime","reminderError","sent","toggleReminder","FaToggleOn","FaToggleOff","HelpCenterPage","activeCategory","setActiveCategory","expandedFaqs","setExpandedFaqs","faqs","setFaqs","tutorials","setTutorials","categories","setCategories","fetchHelpCenterData","faqData","faqError","tutorialData","tutorialError","faqCategories","Set","faq","tutorialCategories","tutorial","allCategories","staticFaqs","staticTutorials","question","answer","filteredFaqs","matchesCategory","filteredTutorials","FaBook","charAt","toUpperCase","slice","replace","FaQuestionCircle","faqId","faq_id","viewed_at","trackFaqView","cursor","FaChevronUp","FaChevronDown","FaFileAlt","tutorial_id","tutorialId","clicked_at","trackTutorialClick","ContactSupportPage","userProfile","setUserProfile","supportTicket","setSupportTicket","subject","priority","attachFile","faqSuggestions","setFaqSuggestions","fetchUserProfile","searchText","suggestions","keywords","keyword","FaLifeRing","FaLightbulb","attachmentUrl","fileData","fileError","urlData","attachment_url","status","aria-hidden","FaComments","FaExclamationTriangle","LiveChat","messages","setMessages","newMessage","setNewMessage","isTyping","setIsTyping","isRecording","setIsRecording","chatStatus","setChatStatus","supportAgent","setSupportAgent","chatSubscription","setChatSubscription","messagesEndRef","useRef","initializeChat","scrollToBottom","sessionData","sessionError","sessionId","newSession","messagesData","messagesError","channel","on","event","schema","table","payload","new","subscribe","agentData","agentError","current","scrollIntoView","FaFile","ref","session_id","onFocus","onBlur","random","filePath","messageError","FaPaperPlane","ProfilePage","setProfile","date_of_birth","gender","blood_group","allergies","medical_conditions","emergency_contact_name","emergency_contact_phone","emergency_contact_relationship","phone","address","bio","profile_picture","diseaseNames","setDiseaseNames","newDiseaseName","setNewDiseaseName","setParameters","newParameter","setNewParameter","unit","editing","setEditing","activeSection","setActiveSection","uploadingImage","setUploadingImage","setAllergies","newAllergy","setNewAllergy","commonDiseases","setCommonDiseases","showSidebar","setShowSidebar","fetchProfile","fetchDiseases","fetchCommonDiseases","fetchAllergies","fetchParameters","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","prevProfile","updateError","success","existingDisease","checkError","info","date_diagnosed","allergy","allergy_name","existingAllergy","warning","param","date_recorded","updatedProfile","SecuritySettings","settings","setSettings","twoFactorEnabled","emailNotifications","loginNotifications","passwordExpiry","maxLoginAttempts","setSuccess","fetchSecuritySettings","FaShieldAlt","FaUserLock","FaKey","DataBackup","backupHistory","setBackupHistory","fetchBackupHistory","FaDownload","healthMetrics","medicalConditions","healthAlerts","Promise","all","backup","backupError","backup_data","backupData","exportDate","download","revokeObjectURL","FaUpload","reader","FileReader","onload","cond","alert","readAsText","SetupDatabase","setResult","logs","setLogs","originalConsoleLog","originalConsoleError","originalConsoleWarn","FaDatabase","FaCheck","_len","args","_key","_len2","_key2","_len3","_key3","setupResult","setupSupabaseTables","FaSpinner","maxHeight","DatabaseSetup","setStatus","Navigate","FaInfoCircle","FaTable","FaFolder","profilesError","sql_command","metricsError","analysesError","chatError","recsError","HealthMetricsVisualizer","initialTimeRange","metrics","setMetrics","metricOptions","fetchMetrics","timeRangeMap","chartOptions","find","m","option","dates","metricValue","systolic","parseFloat","MedicalImageAnalyzer","imageUrl","setImageUrl","imageType","setImageType","headers","REACT_APP_OPENAI_API_KEY","model","content","image_url","max_tokens","dbError","analysis_type","analysis_result","choices","analyzeImage","whiteSpace","HealthAssistant","input","setInput","setMode","_messagesEndRef$curre","getModeSystemPrompt","handleSend","userMessage","timestamp","current_medications","temperature","FaUtensils","FaFirstAid","FaRobot","overflowY","toLocaleTimeString","onKeyPress","BarElement","RadialLinearScale","AIInsightsDashboard","insights","setInsights","healthTrends","imageAnalyses","chatHistory","selectedTimeRange","setSelectedTimeRange","fetchAIInsights","imageData","chatData","recommendationsData","d","Radar","pointBackgroundColor","FaFileMedical","analysis","analyzed_at","image_type","confidence","FaBrain","Pie","rec","recommendation","Bar","borderWidth","HealthMetricsAI","setAnalysis","fetchHealthMetrics","mockMetrics","bloodPressure","diastolic","heartRate","analyzeMetrics","trend","change","overall","callOpenAI","prompt","MedicalImageAnalysis","image","setImage","imagePreview","setImagePreview","results","setResults","analysisType","setAnalysisType","fileInputRef","getDisclaimer","baseDisclaimer","saveAnalysisToDatabase","analysisText","readAsDataURL","onloadend","base64Image","basePrompt","prompts","getAnalysisPrompt","isImageAnalysis","interpretation","findings","disclaimer","apiError","onerror","paragraph","idx","HealthRecommendations","_focusAreas$find2","setRecommendations","history","setHistory","selectedFocus","setSelectedFocus","additionalContext","setAdditionalContext","focusAreas","fetchRecommendationHistory","checkUser","_data$user_conditions","_data$user_medication","bmi","heightInMeters","toFixed","user_conditions","c","user_medications","saveRecommendationsToDatabase","focus_area","calculateAge","dateOfBirth","birthDate","age","getDate","area","newRecommendations","warnings","_focusAreas$find","h","viewHistoricalRecommendation","fa","_rec$action_steps","action_steps","App","Router","basename","ToastContainer","newestOnTop","rtl","pauseOnFocusLoss","theme","Routes","Route","path","element","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode","origin","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.bd06318a.chunk.js","sourcesContent":["const { createClient } = require('@supabase/supabase-js');\r\n\r\n// Initialize the Supabase client\r\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Missing Supabase credentials. Please check your .env file.');\r\n}\r\n\r\nconst supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n/**\r\n * Create the execute_sql function in Supabase\r\n */\r\nconst createExecuteSqlFunction = async () => {\r\n  try {\r\n    const createFunctionSQL = `\r\n      CREATE OR REPLACE FUNCTION execute_sql(sql text)\r\n      RETURNS void AS $$\r\n      BEGIN\r\n        EXECUTE sql;\r\n      END;\r\n      $$ LANGUAGE plpgsql SECURITY DEFINER;\r\n    `;\r\n\r\n    const { error } = await supabase.rpc('execute_sql', { sql: createFunctionSQL });\r\n    if (error) {\r\n      console.warn('Warning: Could not create execute_sql function. It might already exist.');\r\n    }\r\n  } catch (error) {\r\n    console.warn('Warning: Error creating execute_sql function:', error.message);\r\n  }\r\n};\r\n\r\n/**\r\n * Insert sample data into the diseases table\r\n */\r\nconst insertSampleData = async () => {\r\n  try {\r\n    console.log('Inserting sample data...');\r\n\r\n    const diseases = [\r\n      { name: 'Hypertension', category: 'Cardiovascular', description: 'High blood pressure condition' },\r\n      { name: 'Diabetes', category: 'Endocrine', description: 'Blood sugar regulation disorder' },\r\n      { name: 'Asthma', category: 'Respiratory', description: 'Chronic respiratory condition' },\r\n      { name: 'Arthritis', category: 'Musculoskeletal', description: 'Joint inflammation condition' },\r\n      { name: 'Depression', category: 'Mental Health', description: 'Mood disorder' },\r\n      { name: 'Anxiety', category: 'Mental Health', description: 'Anxiety disorder' },\r\n      { name: 'Migraine', category: 'Neurological', description: 'Severe headache condition' },\r\n      { name: 'Allergies', category: 'Immunological', description: 'Immune system response' },\r\n      { name: 'Hypothyroidism', category: 'Endocrine', description: 'Underactive thyroid condition' },\r\n      { name: 'Hyperthyroidism', category: 'Endocrine', description: 'Overactive thyroid condition' }\r\n    ];\r\n\r\n    const { error } = await supabase.from('diseases').upsert(diseases);\r\n    if (error) throw error;\r\n\r\n    console.log('Sample data inserted successfully');\r\n  } catch (error) {\r\n    console.error('Error inserting sample data:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Create storage buckets\r\n */\r\nconst createStorageBuckets = async () => {\r\n  try {\r\n    console.log('Creating storage buckets...');\r\n\r\n    // First, enable storage\r\n    const enableStorageSQL = `\r\n      ALTER DATABASE postgres SET \"app.settings.storage.enabled\" TO 'true';\r\n    `;\r\n    await supabase.rpc('execute_sql', { sql: enableStorageSQL });\r\n\r\n    // Create buckets\r\n    const buckets = [\r\n      'profile-pictures',\r\n      'medical-reports',\r\n      'health-reports',\r\n      'chat-attachments',\r\n      'support-attachments'\r\n    ];\r\n\r\n    for (const bucket of buckets) {\r\n      try {\r\n        const { error } = await supabase.storage.createBucket(bucket, { public: true });\r\n        if (error && !error.message.includes('already exists')) {\r\n          console.warn(`Warning creating bucket ${bucket}:`, error.message);\r\n        }\r\n      } catch (error) {\r\n        console.warn(`Error creating bucket ${bucket}:`, error.message);\r\n      }\r\n    }\r\n\r\n    // Create storage policies\r\n    const createPoliciesSQL = `\r\n      DO $$ \r\n      BEGIN\r\n        CREATE POLICY \"Allow public access to profile pictures\"\r\n        ON storage.objects FOR ALL\r\n        USING (bucket_id = 'profile-pictures');\r\n        \r\n        CREATE POLICY \"Allow public access to medical reports\"\r\n        ON storage.objects FOR ALL\r\n        USING (bucket_id = 'medical-reports');\r\n        \r\n        CREATE POLICY \"Allow public access to health reports\"\r\n        ON storage.objects FOR ALL\r\n        USING (bucket_id = 'health-reports');\r\n        \r\n        CREATE POLICY \"Allow public access to chat attachments\"\r\n        ON storage.objects FOR ALL\r\n        USING (bucket_id = 'chat-attachments');\r\n        \r\n        CREATE POLICY \"Allow public access to support attachments\"\r\n        ON storage.objects FOR ALL\r\n        USING (bucket_id = 'support-attachments');\r\n      EXCEPTION\r\n        WHEN others THEN\r\n          NULL;\r\n      END $$;\r\n    `;\r\n\r\n    await supabase.rpc('execute_sql', { sql: createPoliciesSQL });\r\n    console.log('Storage buckets and policies created successfully');\r\n  } catch (error) {\r\n    console.warn('Warning: Error setting up storage:', error.message);\r\n  }\r\n};\r\n\r\nmodule.exports = {\r\n  createExecuteSqlFunction,\r\n  insertSampleData,\r\n  createStorageBuckets\r\n}; ","import { createClient } from '@supabase/supabase-js';\r\n\r\n// Initialize the Supabase client\r\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL || 'https://your-supabase-url.supabase.co';\r\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY || 'your-supabase-anon-key';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey); ","import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/supabaseClient';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Check active sessions and sets the user\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setUser(session?.user ?? null);\r\n      setLoading(false);\r\n    });\r\n\r\n    // Listen for changes on auth state (logged in, signed out, etc.)\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setUser(session?.user ?? null);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    signUp: (data) => supabase.auth.signUp(data),\r\n    signIn: (data) => supabase.auth.signInWithPassword(data),\r\n    signOut: () => supabase.auth.signOut(),\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n} ","// src/utils/menuHandlers.js\r\nexport function setupMenuListeners() {\r\n    const menuItems = document.querySelectorAll('.menu-item');\r\n    const overlay = document.querySelector('.overlay');\r\n    menuItems.forEach(item => {\r\n      item.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        const subMenu = item.querySelector('.sub-menu');\r\n        if (subMenu) {\r\n          subMenu.classList.toggle('active');\r\n          item.classList.toggle('active');\r\n          if (overlay) overlay.classList.toggle('active');\r\n          document.body.style.overflow = subMenu.classList.contains('active') ? 'hidden' : '';\r\n        }\r\n      });\r\n    });\r\n    if (overlay) {\r\n      overlay.addEventListener('click', closeAllMenus);\r\n    }\r\n  }\r\n  \r\n  function closeAllMenus() {\r\n    const menuItems = document.querySelectorAll('.menu-item');\r\n    const overlay = document.querySelector('.overlay');\r\n    menuItems.forEach(item => {\r\n      item.classList.remove('active');\r\n      const subMenu = item.querySelector('.sub-menu');\r\n      if (subMenu) subMenu.classList.remove('active');\r\n    });\r\n    if (overlay) overlay.classList.remove('active');\r\n    document.body.style.overflow = '';\r\n  }\r\n  \r\n  // Additional event listeners (as in your original file) can be added here.\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    const healthOverview = document.getElementById('health-overview');\r\n    if (healthOverview) {\r\n      healthOverview.addEventListener('click', () => {\r\n        window.location.href = 'view-reports.html';\r\n      });\r\n    }\r\n    // Repeat for other specific menu items...\r\n  });\r\n  ","import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { setupMenuListeners } from '../utils/menuHandlers';\r\nimport { supabase } from '../utils/supabaseClient';\r\nimport '../dashboardstyle.css'; // Ensure you import your CSS file\r\n\r\nconst Navbar = () => {\r\n  const navigate = useNavigate();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setupMenuListeners();\r\n    checkUserRole();\r\n  }, []);\r\n\r\n  const checkUserRole = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (user && user.user_metadata?.role === 'admin') {\r\n        setIsAdmin(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking user role:', error);\r\n    }\r\n  };\r\n\r\n  const handleMenuClick = (e) => {\r\n    e.preventDefault();\r\n    const targetId = e.currentTarget.id;\r\n    switch (targetId) {\r\n      case 'health-overview':\r\n        navigate('/health-overview');\r\n        break;\r\n      case 'medical-history':\r\n        navigate('/medical-history');\r\n        break;\r\n      case 'chronic-disease-management':\r\n        navigate('/chronic-disease-management');\r\n        break;\r\n      case 'vaccination-history':\r\n        navigate('/vaccination-history');\r\n        break;\r\n      case 'health-analytics':\r\n        navigate('/health-analytics');\r\n        break;\r\n      case 'medication-tracker':\r\n        navigate('/medication-tracker');\r\n        break;\r\n      case 'profile-settings':\r\n        navigate('/profile');\r\n        break;\r\n      case 'upcoming-appointments':\r\n        navigate('/appointments/upcoming');\r\n        break;\r\n      case 'appointment-history':\r\n        navigate('/appointments/history');\r\n        break;\r\n      case 'telehealth-consultations':\r\n        navigate('/appointments/telehealth');\r\n        break;\r\n      case 'appointment-reminders':\r\n        navigate('/appointments/reminders');\r\n        break;\r\n      case 'help-center':\r\n        navigate('/help-center');\r\n        break;\r\n      case 'contact-support':\r\n        navigate('/support/contact');\r\n        break;\r\n      case 'live-chat':\r\n        navigate('/support/chat');\r\n        break;\r\n      case 'security-settings':\r\n        navigate('/settings/security');\r\n        break;\r\n      case 'data-backup':\r\n        navigate('/settings/backup');\r\n        break;\r\n      case 'database-setup':\r\n        navigate('/admin/database-setup');\r\n        break;\r\n      case 'logout-div':\r\n        handleLogout();\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error logging out:', error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav id=\"menu\">\r\n      <div className=\"logo\">\r\n        <Link to=\"/dashboard\">\r\n          <img \r\n            src={process.env.PUBLIC_URL + '/favicon_io/android-chrome-512x512-Photoroom.png'} \r\n            alt=\"Logo\" \r\n            className=\"logo\" \r\n          />\r\n        </Link>\r\n      </div>\r\n      <div className=\"menu-item\">\r\n        <div className=\"menu-text\">\r\n          <a href=\"#\" data-link>Your Journey</a>\r\n        </div>\r\n        <div className=\"sub-menu triple\">\r\n          <div className=\"icon-box\" id=\"health-overview\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-hospital-user\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Health Overview</div>\r\n              <div className=\"sub-text\">See, add and update your Journey</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"medical-history\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-timeline\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Medical History</div>\r\n              <div className=\"sub-text\">Through your Journey</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"chronic-disease-management\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-diagnoses\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Chronic Disease Management</div>\r\n              <div className=\"sub-text\">Manage your chronic conditions</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"vaccination-history\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-syringe\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Vaccination History</div>\r\n              <div className=\"sub-text\">View and manage vaccinations</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"medication-tracker\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-pills\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Medication Tracker</div>\r\n              <div className=\"sub-text\">Track prescribed medications</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"health-analytics\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-chart-line\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Health Analytics</div>\r\n              <div className=\"sub-text\">View your health trends</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"menu-item\">\r\n        <div className=\"menu-text\">\r\n          <a href=\"#\" data-link>Appointments</a>\r\n        </div>\r\n        <div className=\"sub-menu double\">\r\n          <div className=\"icon-box\" id=\"upcoming-appointments\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-calendar-check\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Upcoming Appointments</div>\r\n              <div className=\"sub-text\">View and manage appointments</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"appointment-history\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-history\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Appointment History</div>\r\n              <div className=\"sub-text\">Check past appointments</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"telehealth-consultations\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-phone-alt\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Telehealth Consultations</div>\r\n              <div className=\"sub-text\">Book virtual appointments</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"appointment-reminders\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-clock\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Appointment Reminders</div>\r\n              <div className=\"sub-text\">Set and manage reminders</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"menu-item\">\r\n        <div className=\"menu-text\">\r\n          <a href=\"#\" data-link>Support</a>\r\n        </div>\r\n        <div className=\"sub-menu double\">\r\n          <div className=\"icon-box\" id=\"help-center\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-book\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Help Center</div>\r\n              <div className=\"sub-text\">FAQs and tutorials</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"contact-support\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-life-ring\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Contact Support</div>\r\n              <div className=\"sub-text\">Reach out to our team</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"live-chat\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-comment-dots\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Live Chat</div>\r\n              <div className=\"sub-text\">Chat with support agents</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Add a new menu item for AI features */}\r\n      <div className=\"menu-item\">\r\n        <div className=\"menu-text\">\r\n          <a href=\"#\" data-link>AI Tools</a>\r\n        </div>\r\n        <div className=\"sub-menu double\">\r\n          <div className=\"icon-box\" id=\"ai-image-analysis\" onClick={(e) => {\r\n            e.preventDefault();\r\n            navigate('/ai/image-analysis');\r\n          }}>\r\n            <div className=\"icon\"><i className=\"fa fa-microscope\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Medical Image Analysis</div>\r\n              <div className=\"sub-text\">AI analysis of medical images</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"ai-health-assistant\" onClick={(e) => {\r\n            e.preventDefault();\r\n            navigate('/ai/health-assistant');\r\n          }}>\r\n            <div className=\"icon\"><i className=\"fa fa-robot\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Health Assistant</div>\r\n              <div className=\"sub-text\">Chat with our AI assistant</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"ai-recommendations\" onClick={(e) => {\r\n            e.preventDefault();\r\n            navigate('/ai/health-recommendations');\r\n          }}>\r\n            <div className=\"icon\"><i className=\"fa fa-lightbulb\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Health Recommendations</div>\r\n              <div className=\"sub-text\">Get personalized AI recommendations</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"ai-symptom-checker\" onClick={(e) => {\r\n            e.preventDefault();\r\n            navigate('/ai/symptom-checker');\r\n          }}>\r\n            <div className=\"icon\"><i className=\"fa fa-stethoscope\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Symptom Checker</div>\r\n              <div className=\"sub-text\">AI analysis of symptoms</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"menu-item\">\r\n        <div className=\"menu-text\">\r\n          <a href=\"#\" data-link>Account</a>\r\n        </div>\r\n        <div className=\"sub-menu double\">\r\n          <div className=\"icon-box\" id=\"profile-settings\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-user-cog\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Profile Settings</div>\r\n              <div className=\"sub-text\">Edit your personal details</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"security-settings\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-lock\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Security Settings</div>\r\n              <div className=\"sub-text\">Manage passwords and 2FA</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"icon-box\" id=\"data-backup\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa fa-download\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Data Backup & Export</div>\r\n              <div className=\"sub-text\">Backup and download your data</div>\r\n            </div>\r\n          </div>\r\n          {isAdmin && (\r\n            <div className=\"icon-box\" id=\"database-setup\" onClick={handleMenuClick}>\r\n              <div className=\"icon\"><i className=\"fa fa-database\"></i></div>\r\n              <div className=\"text\">\r\n                <div className=\"title\">Database Setup</div>\r\n                <div className=\"sub-text\">Reset and setup database tables</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div className=\"icon-box\" id=\"logout-div\" onClick={handleMenuClick}>\r\n            <div className=\"icon\"><i className=\"fa-solid fa-arrow-right-from-bracket\"></i></div>\r\n            <div className=\"text\">\r\n              <div className=\"title\">Logout</div>\r\n              <div className=\"sub-text\">Logout your account</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>  \r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nconst Footer = () => {\r\n    return (\r\n        <footer style={{ \r\n            position: 'relative', \r\n            backgroundImage: 'linear-gradient(0deg, #2AF598 0%, #08AEEA 100%)',\r\n            width: '100%',\r\n            textAlign: 'center',\r\n            padding: '1rem',\r\n            marginTop: 'auto',\r\n            color: '#fff',\r\n        }}>\r\n            <p>&copy; {new Date().getFullYear()} DiGiHealth. All rights reserved.</p>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport Navbar from './Navbar';\r\nimport Footer from './Footer';\r\n\r\nconst DashboardLayout = ({ children }) => {\r\n  return (\r\n    <div className=\"dashboard-layout\">\r\n      <Navbar />\r\n      <main>{children}</main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardLayout;\r\n","// src/utils/main.js\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst SUPABASE_URL = 'https://aqdzmfhakqdwquszaqle.supabase.co';\r\nconst SUPABASE_PUBLIC_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxZHptZmhha3Fkd3F1c3phcWxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE0MDgyNTAsImV4cCI6MjA0Njk4NDI1MH0.4euPXQKyddaJuGhf5Etqdla8LF-h-p-gs1uVxw6dutQ'; // Replace with your actual public key\r\nexport const supabase = createClient(SUPABASE_URL, SUPABASE_PUBLIC_KEY);\r\n","// src/pages/Login.jsx\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../utils/main'; // Correct import\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../styles.css';\n\nconst Login = () => {\n  const [showSignup, setShowSignup] = useState(false);\n  const [notification, setNotification] = useState(null);\n  \n  // Login form state\n  const [loginEmail, setLoginEmail] = useState('');\n  const [loginPassword, setLoginPassword] = useState('');\n  \n  // Signup form state\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [signupEmail, setSignupEmail] = useState('');\n  const [signupPassword, setSignupPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  \n  const navigate = useNavigate();\n\n  // Notification helper\n  const showNotification = (message, type = 'info') => {\n    console.log(`Notification: ${message}, Type: ${type}`); // Log the notification type\n    setNotification({ message, type });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  // Handle Login\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const { error } = await supabase.auth.signInWithPassword({\n        email: loginEmail,\n        password: loginPassword,\n      });\n      if (error) throw error;\n      showNotification('Login successful!', 'success');\n      // Delay redirect to allow the notification to be seen\n      setTimeout(() => {\n        navigate('/dashboard');\n      }, 3000); // Adjust delay as needed\n    } catch (error) {\n      console.error('Login error:', error.message);\n      showNotification(error.message, 'danger');\n    }\n  };\n\n  // Handle Signup\n  const handleSignup = async (e) => {\n    e.preventDefault();\n    if (signupPassword !== confirmPassword) {\n      showNotification(\"Passwords don't match\", 'error');\n      return;\n    }\n    try {\n      const { data, error } = await supabase.auth.signUp({\n        email: signupEmail,\n        password: signupPassword,\n        options: {\n          data: {\n            first_name: firstName,\n            last_name: lastName,\n          },\n        },\n      });\n      if (error) throw error;\n\n      // Optionally insert additional profile data into your \"profiles\" table\n      if (data.user) {\n        const { error: profileError } = await supabase.from('detailed_profiles').insert([\n          {\n            id: data.user.id,\n            first_name: firstName,\n            last_name: lastName,\n            email: signupEmail,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          },\n        ]);\n        if (profileError) throw profileError;\n      }\n      \n      showNotification('Account created successfully!', 'success');\n      // Redirect to dashboard after signup (update the path as needed)\n      navigate('/dashboard');\n    } catch (error) {\n      console.error('Signup error:', error.message);\n      showNotification(error.message, 'danger');\n    }\n  };\n\n  return (\n    <div id=\"app\">\n      <header>\n        <img\n          src={process.env.PUBLIC_URL + '/favicon_io/android-chrome-512x512-Photoroom.png'}\n          alt=\"Logo\"\n          className=\"logo\" style={{width: \"250px\", height: \"100%\"}}\n        />\n      </header>\n\n      {/* Notification Container */}\n      {notification && (\n        <div className={`alert alert-${notification.type} alert-dismissible fade show`} role=\"alert\">\n          {notification.message}\n{/*           <button type=\"button\" className=\"btn-close\" aria-label=\"Close\" onClick={() => setNotification(null)}></button> */}\n        </div>\n      )}\n\n      <div id=\"login-signup\">\n        {/* Login Form */}\n        {!showSignup ? (\n          <div id=\"login-form\">\n            <h2>Login</h2>\n            <form className=\"form1\" onSubmit={handleLogin}>\n              <label>\n                <input\n                  required\n                  name=\"email\"\n                  type=\"email\"\n                  className=\"input\"\n                  id=\"login-email\"\n                  autoComplete=\"new-password\"\n                  value={loginEmail}\n                  onChange={(e) => setLoginEmail(e.target.value)}\n                />\n                <span>Email</span>\n              </label>\n              <label>\n                <input\n                  required\n                  name=\"password\"\n                  type=\"password\"\n                  className=\"input\"\n                  id=\"login-password\"\n                  autoComplete=\"login-password\"\n                  value={loginPassword}\n                  onChange={(e) => setLoginPassword(e.target.value)}\n                />\n                <span>Password</span>\n              </label>\n              <div>\n                <button type=\"submit\" id=\"login-button\">\n                  Login\n                </button>\n                <button type=\"button\" onClick={() => setShowSignup(true)}>\n                  Sign Up\n                </button>\n              </div>\n            </form>\n          </div>\n        ) : (\n          // Signup Form\n          <div id=\"signup-form\">\n            <form className=\"form\" onSubmit={handleSignup}>\n              <p className=\"message\">Signup now</p>\n              <div className=\"flex\">\n                <label>\n                  <input\n                    required\n                    name=\"firstname\"\n                    type=\"text\"\n                    className=\"input\"\n                    placeholder=\" \"\n                    value={firstName}\n                    onChange={(e) => setFirstName(e.target.value)}\n                  />\n                  <span>Firstname</span>\n                </label>\n                <label>\n                  <input\n                    required\n                    name=\"lastname\"\n                    type=\"text\"\n                    className=\"input\"\n                    placeholder=\" \"\n                    value={lastName}\n                    onChange={(e) => setLastName(e.target.value)}\n                  />\n                  <span>Lastname</span>\n                </label>\n              </div>\n              <label>\n                <input\n                  required\n                  name=\"email\"\n                  type=\"email\"\n                  className=\"input\"\n                  id=\"signup-email\"\n                  placeholder=\" \"\n                  value={signupEmail}\n                  onChange={(e) => setSignupEmail(e.target.value)}\n                />\n                <span>Email</span>\n              </label>\n              <label>\n                <input\n                  required\n                  name=\"password\"\n                  type=\"password\"\n                  className=\"input\"\n                  id=\"signup-password\"\n                  placeholder=\" \"\n                  value={signupPassword}\n                  onChange={(e) => setSignupPassword(e.target.value)}\n                />\n                <span>Password</span>\n              </label>\n              <label>\n                <input\n                  required\n                  name=\"confirmPassword\"\n                  type=\"password\"\n                  className=\"input\"\n                  placeholder=\" \"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                />\n                <span>Confirm password</span>\n              </label>\n              <button type=\"submit\" className=\"submit\">\n                Submit\n              </button>\n              <p className=\"signin\">\n                Already have an account?{' '}\n                <a href=\"/\" onClick={() => setShowSignup(false)}>\n                  Signin\n                </a>\n              </p>\n            </form>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Login;","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../utils/supabaseClient';\r\nimport { FaUser, FaEnvelope, FaLock, FaUserMd } from 'react-icons/fa';\r\n\r\nconst Register = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    role: 'patient'\r\n  });\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('Passwords do not match');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase.auth.signUp({\r\n        email: formData.email,\r\n        password: formData.password,\r\n        options: {\r\n          data: {\r\n            first_name: formData.firstName,\r\n            last_name: formData.lastName,\r\n            role: formData.role\r\n          }\r\n        }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      // Create profile in detailed_profiles table\r\n      if (data.user) {\r\n        const { error: profileError } = await supabase\r\n          .from('detailed_profiles')\r\n          .insert([\r\n            {\r\n              id: data.user.id,\r\n              first_name: formData.firstName,\r\n              last_name: formData.lastName,\r\n              email: formData.email,\r\n              created_at: new Date().toISOString()\r\n            }\r\n          ]);\r\n\r\n        if (profileError) throw profileError;\r\n        \r\n        // Also create in profiles table for backward compatibility\r\n        const { error: oldProfileError } = await supabase\r\n          .from('profiles')\r\n          .insert([\r\n            {\r\n              id: data.user.id,\r\n              full_name: `${formData.firstName} ${formData.lastName}`,\r\n              email: formData.email,\r\n              role: formData.role,\r\n              created_at: new Date().toISOString()\r\n            }\r\n          ]);\r\n\r\n        if (oldProfileError) throw oldProfileError;\r\n      }\r\n\r\n      navigate('/dashboard');\r\n    } catch (error) {\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-md-6\">\r\n          <div className=\"card shadow\">\r\n            <div className=\"card-body\">\r\n              <h2 className=\"text-center mb-4\">Register</h2>\r\n              {error && (\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"row mb-3\">\r\n                  <div className=\"col-md-6\">\r\n                    <label className=\"form-label\">First Name</label>\r\n                    <div className=\"input-group\">\r\n                      <span className=\"input-group-text\">\r\n                        <FaUser />\r\n                      </span>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        name=\"firstName\"\r\n                        value={formData.firstName}\r\n                        onChange={handleChange}\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <label className=\"form-label\">Last Name</label>\r\n                    <div className=\"input-group\">\r\n                      <span className=\"input-group-text\">\r\n                        <FaUser />\r\n                      </span>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        name=\"lastName\"\r\n                        value={formData.lastName}\r\n                        onChange={handleChange}\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Email</label>\r\n                  <div className=\"input-group\">\r\n                    <span className=\"input-group-text\">\r\n                      <FaEnvelope />\r\n                    </span>\r\n                    <input\r\n                      type=\"email\"\r\n                      className=\"form-control\"\r\n                      name=\"email\"\r\n                      value={formData.email}\r\n                      onChange={handleChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Password</label>\r\n                  <div className=\"input-group\">\r\n                    <span className=\"input-group-text\">\r\n                      <FaLock />\r\n                    </span>\r\n                    <input\r\n                      type=\"password\"\r\n                      className=\"form-control\"\r\n                      name=\"password\"\r\n                      value={formData.password}\r\n                      onChange={handleChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Confirm Password</label>\r\n                  <div className=\"input-group\">\r\n                    <span className=\"input-group-text\">\r\n                      <FaLock />\r\n                    </span>\r\n                    <input\r\n                      type=\"password\"\r\n                      className=\"form-control\"\r\n                      name=\"confirmPassword\"\r\n                      value={formData.confirmPassword}\r\n                      onChange={handleChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Role</label>\r\n                  <div className=\"input-group\">\r\n                    <span className=\"input-group-text\">\r\n                      <FaUserMd />\r\n                    </span>\r\n                    <select\r\n                      className=\"form-select\"\r\n                      name=\"role\"\r\n                      value={formData.role}\r\n                      onChange={handleChange}\r\n                    >\r\n                      <option value=\"patient\">Patient</option>\r\n                      <option value=\"doctor\">Doctor</option>\r\n                      <option value=\"admin\">Admin</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary w-100\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? 'Registering...' : 'Register'}\r\n                </button>\r\n              </form>\r\n              <div className=\"text-center mt-3\">\r\n                Already have an account?{' '}\r\n                <a href=\"/\" className=\"text-decoration-none\">\r\n                  Login\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register; ","import React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-overlay\">\r\n      <div className=\"medical-spinner\">\r\n        <div className=\"spinner-container\">\r\n          <div className=\"cross-container\">\r\n            <div className=\"cross-horizontal\"></div>\r\n            <div className=\"cross-vertical\"></div>\r\n          </div>\r\n          <div className=\"spinner-ring\"></div>\r\n        </div>\r\n        \r\n        <div className=\"heartbeat-container\">\r\n          <svg viewBox=\"0 0 400 100\" className=\"ecg-line\">\r\n            <polyline\r\n              className=\"ecg-path\"\r\n              points=\"0,50 30,50 45,50 60,20 75,80 90,50 105,50 120,50 150,50 170,50 185,50 200,20 215,80 230,50 245,50 270,50 300,50 320,50 335,50 350,20 365,80 380,50 395,50 400,50\"\r\n              fill=\"none\"\r\n              strokeWidth=\"3\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        \r\n        <div className=\"spinner-text\">Loading...</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../utils/main';\nimport '../dashboardstyle.css'; // Dashboard-specific styles\nimport { setupMenuListeners } from '../utils/menuHandlers';\nimport 'bootstrap/dist/css/bootstrap.min.css'; // Import Bootstrap CSS\nimport Spinner from '../components/Spinner'; // Import Spinner component\nimport { useAuth } from '../contexts/AuthContext';\nimport { Link } from 'react-router-dom';\nimport {\n  FaHeartbeat,\n  FaPills,\n  FaCalendarAlt,\n  FaFileMedical,\n  FaUserMd,\n  FaVideo,\n  FaChartLine,\n  FaBell,\n  FaExclamationTriangle,\n  FaCheckCircle,\n  FaQrcode,\n  FaSyringe,\n  FaStethoscope,\n  FaBone,\n  FaAmbulance,\n  FaRobot,\n  FaBrain\n} from 'react-icons/fa';\nimport { Line, Doughnut } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\n// Register ChartJS components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst Dashboard = () => {\n    const navigate = useNavigate();\n    const { user } = useAuth();\n    const [notification, setNotification] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [healthData, setHealthData] = useState({\n        vitals: [],\n        medications: [],\n        appointments: [],\n        conditions: [],\n        alerts: [],\n        profile: null\n    });\n    const [error, setError] = useState(null);\n\n    const showNotification = (message, type = 'info') => {\n        setNotification({ message, type });\n        setTimeout(() => setNotification(null), 3000);\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const { data: { user }, error: userError } = await supabase.auth.getUser();\n                if (userError || !user) {\n                    navigate('/');\n                    return;\n                }\n                \n                const { data: profileData, error: profileError } = await supabase\n                    .from('detailed_profiles')\n                    .select('*')\n                    .eq('id', user.id)\n                    .single();\n\n                if (profileError) {\n                    if (profileError.code === 'PGRST116') {\n                        // Profile doesn't exist, create one\n                        const { data: newProfile, error: createError } = await supabase\n                            .from('detailed_profiles')\n                            .insert([{ id: user.id }])\n                            .select()\n                            .single();\n                            \n                        if (createError) throw createError;\n                        setHealthData(prev => ({ ...prev, profile: newProfile }));\n                    } else {\n                        throw profileError;\n                    }\n                } else {\n                    setHealthData(prev => ({ ...prev, profile: profileData }));\n                }\n            } catch (error) {\n                console.error('Error fetching data:', error);\n                setError('Failed to load dashboard data');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [navigate]);\n\n    const mainFeatureCards = [\n        {\n            title: 'Profile',\n            icon: 'fa-user',\n            description: 'View and manage your profile information',\n            link: '/profile',\n            color: 'primary'\n        },\n        {\n            title: 'Health Records',\n            icon: 'fa-file-medical',\n            description: 'Access your health records and history',\n            link: '/health-records',\n            color: 'info'\n        },\n        {\n            title: 'Appointments',\n            icon: 'fa-calendar-check',\n            description: 'Schedule and manage appointments',\n            link: '/appointments',\n            color: 'success'\n        },\n        {\n            title: 'Medications',\n            icon: 'fa-pills',\n            description: 'Track your medications and prescriptions',\n            link: '/medications',\n            color: 'warning'\n        }\n    ];\n\n    const aiFeatureCards = [\n        {\n            title: 'Health Recommendations',\n            icon: 'fa-chart-line',\n            description: 'AI-powered health recommendations based on your profile',\n            link: '/ai/health-recommendations',\n            color: 'primary'\n        },\n        {\n            title: 'Medical Image Analysis',\n            icon: 'fa-microscope',\n            description: 'AI analysis of medical images',\n            link: '/ai/image-analysis',\n            color: 'info'\n        },\n        {\n            title: 'Health Assistant',\n            icon: 'fa-robot',\n            description: 'Chat with our AI health assistant',\n            link: '/ai/health-assistant',\n            color: 'success'\n        },\n        {\n            title: 'Symptom Checker',\n            icon: 'fa-stethoscope',\n            description: 'AI-powered symptom analysis',\n            link: '/ai/symptom-checker',\n            color: 'danger'\n        }\n    ];\n\n    if (loading) return <Spinner />;\n    if (error) return <div className=\"alert alert-danger\">{error}</div>;\n\n    return (\n        <div className=\"dashboard container-fluid py-4\" >\n            <div className=\"row mb-4\">\n                <div className=\"col\">\n                    <h1 className=\"h3\">Welcome, {healthData.profile?.first_name || 'User'}!</h1>\n                    <p className=\"text-muted\">Here's an overview of your health information</p>\n                </div>\n            </div>\n\n            {/* Main Features Section */}\n            <div className=\"row mb-4\"></div>\n            <h4 className=\"mb-3\">Main Features</h4>\n            <div className=\"row g-4 mb-5\">\n                {mainFeatureCards.map((card, index) => (\n                    <div key={index} className=\"col-12 col-md-6 col-lg-3\">\n                        <Link to={card.link} className=\"text-decoration-none\">\n                            <div className={`card h-100 border-${card.color} shadow-sm hover-card`}>\n                                <div className=\"card-body\">\n                                    <div className=\"d-flex align-items-center mb-3\">\n                                        <div className={`icon-circle bg-${card.color} text-white`}>\n                                            <i className={`fas ${card.icon}`}></i>\n                                        </div>\n                                        <h5 className=\"card-title mb-0 ms-3\">{card.title}</h5>\n                                    </div>\n                                    <p className=\"card-text text-muted\">{card.description}</p>\n                                </div>\n                            </div>\n                        </Link>\n                    </div>\n                ))}\n            </div>\n\n            {/* AI Features Section */}\n            <h4 className=\"mb-3\">AI-Powered Features</h4>\n            <div className=\"row g-4 mb-5\">\n                {aiFeatureCards.map((card, index) => (\n                    <div key={index} className=\"col-12 col-md-6 col-lg-3\">\n                        <Link to={card.link} className=\"text-decoration-none\">\n                            <div className={`card h-100 border-${card.color} shadow-sm hover-card`}>\n                                <div className=\"card-body\">\n                                    <div className=\"d-flex align-items-center mb-3\">\n                                        <div className={`icon-circle bg-${card.color} text-white`}>\n                                            <i className={`fas ${card.icon}`}></i>\n                                        </div>\n                                        <h5 className=\"card-title mb-0 ms-3\">{card.title}</h5>\n                                    </div>\n                                    <p className=\"card-text text-muted\">{card.description}</p>\n                                </div>\n                            </div>\n                        </Link>\n                    </div>\n                ))}\n            </div>\n\n            {/* Quick Actions Section */}\n            <div className=\"row mt-4\">\n                <div className=\"col-12\">\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <h5 className=\"card-title\">Quick Actions</h5>\n                            <div className=\"row g-2\">\n                                <div className=\"col-6 col-md-3\">\n                                    <Link to=\"/appointments/new\" className=\"btn btn-outline-primary w-100\">\n                                        <i className=\"fas fa-plus-circle me-2\"></i>\n                                        New Appointment\n                                    </Link>\n                                </div>\n                                <div className=\"col-6 col-md-3\">\n                                    <Link to=\"/medications/add\" className=\"btn btn-outline-success w-100\">\n                                        <i className=\"fas fa-pills me-2\"></i>\n                                        Add Medication\n                                    </Link>\n                                </div>\n                                <div className=\"col-6 col-md-3\">\n                                    <Link to=\"/reports/upload\" className=\"btn btn-outline-info w-100\">\n                                        <i className=\"fas fa-upload me-2\"></i>\n                                        Upload Report\n                                    </Link>\n                                </div>\n                                <div className=\"col-6 col-md-3\">\n                                    <Link to=\"/ai/health-assistant\" className=\"btn btn-outline-danger w-100\">\n                                        <i className=\"fas fa-robot me-2\"></i>\n                                        AI Assistant\n                                    </Link>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Dashboard;\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Form, Card, Container, Row, Col } from 'react-bootstrap';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst styles = {\r\n  actionButton: {\r\n    display: 'inline-block',\r\n    opacity: 1,\r\n    visibility: 'visible'\r\n  }\r\n};\r\n\r\nconst HealthOverview = () => {\r\n  const [healthData, setHealthData] = useState([]);\r\n  const [userId, setUserId] = useState(null);\r\n  const [userDetails, setUserDetails] = useState({ first_name: '', last_name: '', email: '' });\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [newReport, setNewReport] = useState({ \r\n    disease_id: '', \r\n    since: '', \r\n    file: null \r\n  });\r\n  const [preview, setPreview] = useState(null);\r\n  const [notification, setNotification] = useState(null);\r\n  const [notificationTimeout, setNotificationTimeout] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [userDiseases, setUserDiseases] = useState([]);\r\n  const [userParameters, setUserParameters] = useState([]);\r\n  const [extractedParameters, setExtractedParameters] = useState({});\r\n\r\n  // Add these state variables for confirmation modal\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [reportToDelete, setReportToDelete] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      setLoading(true);\r\n      const { data: { user }, error } = await supabase.auth.getUser();\r\n      if (error) return;\r\n      if (user) {\r\n        setUserId(user.id);\r\n        fetchHealthData(user.id);\r\n        fetchUserDetails(user.id);\r\n        fetchUserDiseases(user.id);\r\n        fetchUserParameters(user.id);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const fetchUserDiseases = async (uid) => {\r\n    const { data, error } = await supabase\r\n      .from('user_diseases')\r\n      .select('*')\r\n      .eq('user_id', uid);\r\n    if (!error) setUserDiseases(data);\r\n  };\r\n\r\n  const fetchUserParameters = async (uid) => {\r\n    const { data, error } = await supabase\r\n      .from('user_parameters')\r\n      .select('*')\r\n      .eq('user_id', uid);\r\n    if (!error) setUserParameters(data);\r\n  };\r\n\r\n  const fetchUserDetails = async (uid) => {\r\n    const { data, error } = await supabase\r\n      .from('profiles')\r\n      .select('first_name, last_name, email')\r\n      .eq('id', uid)\r\n      .single();\r\n    if (!error) setUserDetails(data);\r\n  };\r\n\r\n  const fetchHealthData = async (uid) => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('healthrecords')\r\n        .select(`\r\n          *,\r\n          user_diseases(disease_name)\r\n        `)\r\n        .eq('user_id', uid);\r\n        \r\n      if (error) {\r\n        console.error('Error fetching health data:', error);\r\n        showNotification(`Error loading health data: ${error.message}`, 'danger');\r\n        return;\r\n      }\r\n      \r\n      setHealthData(data);\r\n    } catch (err) {\r\n      console.error('Exception fetching health data:', err);\r\n      showNotification(`Error: ${err.message}`, 'danger');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    \r\n    setNewReport({ ...newReport, file });\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Show preview for image files\r\n      if (file.type.startsWith('image/')) {\r\n        // Warn user that image analysis is temporarily disabled\r\n        showNotification('Image processing is temporarily unavailable. Please use PDF files for now.', 'warning');\r\n        setLoading(false);\r\n        return;\r\n      } else {\r\n        setPreview(null);\r\n      }\r\n      \r\n      // Create a FormData object to send the file\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      \r\n      // First, check if backend is responding with debug endpoint\r\n      try {\r\n        const debugResponse = await fetch('https://digihealth-backend.onrender.com/api/check-env');\r\n        if (!debugResponse.ok) {\r\n          console.warn('Backend environment check failed', await debugResponse.text());\r\n        } else {\r\n          const debugData = await debugResponse.json();\r\n          console.log('Backend environment status:', debugData);\r\n          \r\n          // Check if the OpenAI API key is missing\r\n          if (debugData.environment && debugData.environment.OPENAI_API_KEY === 'not set') {\r\n            showNotification('The AI service is currently unavailable. File upload will proceed without AI analysis.', 'warning', 10000);\r\n            \r\n            // Set default empty analysis structure\r\n            setExtractedParameters({\r\n              parameters: {},\r\n              aiAnalysis: {\r\n                conditions: [],\r\n                medications: [],\r\n                recommendations: \"AI analysis unavailable. Please review the document manually.\",\r\n                summary: \"This document was uploaded but could not be analyzed by AI due to service unavailability.\"\r\n              }\r\n            });\r\n            \r\n            // End processing here but allow normal upload flow to continue\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      } catch (debugError) {\r\n        console.error('Error checking backend environment:', debugError);\r\n        // Continue processing, as this is just a pre-check\r\n      }\r\n      \r\n      // Send to backend for processing\r\n      console.log('Sending file to backend:', file.name, file.type, file.size);\r\n      const response = await fetch('https://digihealth-backend.onrender.com/api/process-file', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        let errorMessage = 'Error processing file';\r\n        let errorData;\r\n        \r\n        try {\r\n          errorData = await response.json();\r\n          console.error('Backend error response:', errorData);\r\n          errorMessage = errorData.error || errorMessage;\r\n          \r\n          // Special handling for API key issues\r\n          if (errorData.details && (\r\n              errorData.details.includes('API key') || \r\n              errorData.details.includes('authentication') ||\r\n              errorData.details.includes('401'))\r\n          ) {\r\n            showNotification('The AI service is temporarily unavailable. Your file will be uploaded but not analyzed.', 'warning', 10000);\r\n            \r\n            // Set default empty analysis structure\r\n            setExtractedParameters({\r\n              parameters: {},\r\n              aiAnalysis: {\r\n                conditions: [],\r\n                medications: [],\r\n                recommendations: \"AI analysis unavailable. Please review the document manually.\",\r\n                summary: \"This document was uploaded but could not be analyzed by AI due to service unavailability.\"\r\n              }\r\n            });\r\n            \r\n            // End processing here but allow normal upload flow to continue\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        } catch (e) {\r\n          console.error('Failed to parse error response', e);\r\n        }\r\n        \r\n        throw new Error(errorMessage);\r\n      }\r\n      \r\n      let result;\r\n      try {\r\n        result = await response.json();\r\n        console.log('Backend response:', result);\r\n        \r\n        // Log the structure of the response for debugging\r\n        console.log('Response structure details:', {\r\n          hasParameters: Boolean(result.parameters),\r\n          parametersType: typeof result.parameters,\r\n          parametersKeys: result.parameters ? Object.keys(result.parameters) : [],\r\n          parametersValues: result.parameters ? Object.values(result.parameters).map(v => typeof v) : [],\r\n          hasAiAnalysis: Boolean(result.aiAnalysis),\r\n          aiAnalysisType: typeof result.aiAnalysis,\r\n          aiAnalysisKeys: result.aiAnalysis ? Object.keys(result.aiAnalysis) : [],\r\n          conditionsType: result.aiAnalysis?.conditions ? typeof result.aiAnalysis.conditions : 'undefined',\r\n          isConditionsArray: result.aiAnalysis?.conditions ? Array.isArray(result.aiAnalysis.conditions) : false,\r\n          medicationsType: result.aiAnalysis?.medications ? typeof result.aiAnalysis.medications : 'undefined',\r\n          isMedicationsArray: result.aiAnalysis?.medications ? Array.isArray(result.aiAnalysis.medications) : false\r\n        });\r\n        \r\n        // Ensure all parameter values are strings to avoid React rendering issues\r\n        if (result && result.parameters) {\r\n          Object.keys(result.parameters).forEach(key => {\r\n            const value = result.parameters[key];\r\n            if (value === null || value === undefined) {\r\n              result.parameters[key] = 'N/A';\r\n            } else if (typeof value === 'object') {\r\n              result.parameters[key] = JSON.stringify(value);\r\n            } else {\r\n              result.parameters[key] = String(value);\r\n            }\r\n          });\r\n        }\r\n        \r\n        // Ensure aiAnalysis and its properties exist and are correctly formatted\r\n        if (result && result.aiAnalysis) {\r\n          // Ensure conditions is an array of strings\r\n          if (!Array.isArray(result.aiAnalysis.conditions)) {\r\n            console.warn('Conditions is not an array, converting:', result.aiAnalysis.conditions);\r\n            \r\n            if (typeof result.aiAnalysis.conditions === 'string') {\r\n              // If it's a string, try to parse as JSON\r\n              try {\r\n                result.aiAnalysis.conditions = JSON.parse(result.aiAnalysis.conditions);\r\n              } catch {\r\n                // If parsing fails, make it a single-item array\r\n                result.aiAnalysis.conditions = [result.aiAnalysis.conditions];\r\n              }\r\n            } else if (!result.aiAnalysis.conditions) {\r\n              // If it doesn't exist or is null/undefined\r\n              result.aiAnalysis.conditions = [];\r\n            } else if (typeof result.aiAnalysis.conditions === 'object') {\r\n              // If it's a non-array object, convert to array of strings\r\n              result.aiAnalysis.conditions = Object.values(result.aiAnalysis.conditions).map(String);\r\n            } else {\r\n              // Fallback to empty array\r\n              result.aiAnalysis.conditions = [];\r\n            }\r\n          }\r\n          \r\n          // Ensure medications is an array of strings\r\n          if (!Array.isArray(result.aiAnalysis.medications)) {\r\n            console.warn('Medications is not an array, converting:', result.aiAnalysis.medications);\r\n            \r\n            if (typeof result.aiAnalysis.medications === 'string') {\r\n              try {\r\n                result.aiAnalysis.medications = JSON.parse(result.aiAnalysis.medications);\r\n              } catch {\r\n                result.aiAnalysis.medications = [result.aiAnalysis.medications];\r\n              }\r\n            } else if (!result.aiAnalysis.medications) {\r\n              result.aiAnalysis.medications = [];\r\n            } else if (typeof result.aiAnalysis.medications === 'object') {\r\n              result.aiAnalysis.medications = Object.values(result.aiAnalysis.medications).map(String);\r\n            } else {\r\n              result.aiAnalysis.medications = [];\r\n            }\r\n          }\r\n          \r\n          // Ensure all elements in arrays are strings\r\n          result.aiAnalysis.conditions = result.aiAnalysis.conditions\r\n            .filter(item => item !== null && item !== undefined)\r\n            .map(item => String(item));\r\n            \r\n          result.aiAnalysis.medications = result.aiAnalysis.medications\r\n            .filter(item => item !== null && item !== undefined)\r\n            .map(item => String(item));\r\n            \r\n          // Ensure summary and recommendations are strings\r\n          result.aiAnalysis.summary = String(result.aiAnalysis.summary || '');\r\n          result.aiAnalysis.recommendations = String(result.aiAnalysis.recommendations || '');\r\n        } else if (result) {\r\n          // Create default aiAnalysis if missing\r\n          result.aiAnalysis = {\r\n            conditions: [],\r\n            medications: [],\r\n            recommendations: '',\r\n            summary: ''\r\n          };\r\n        }\r\n      } catch (jsonError) {\r\n        console.error('Failed to parse response JSON:', jsonError);\r\n        throw new Error('Failed to parse server response. The file may be too large or in an unsupported format.');\r\n      }\r\n\r\n      // Add validation for the response structure\r\n      if (!result || (Object.keys(result).length === 0)) {\r\n        console.error('Empty response structure:', result);\r\n        throw new Error('Server returned an empty response');\r\n      }\r\n      \r\n      if (!result.parameters && !result.aiAnalysis) {\r\n        console.error('Invalid response structure:', result);\r\n        throw new Error('Server returned an invalid response structure');\r\n      }\r\n\r\n      setExtractedParameters(result);\r\n      \r\n      // Determine what message to show\r\n      let message;\r\n      if (result.parameters && Object.keys(result.parameters).length > 0) {\r\n        message = 'File processed successfully. Review the extracted information below.';\r\n      } else if (result.aiAnalysis && (\r\n        (result.aiAnalysis.summary && result.aiAnalysis.summary.length > 0) || \r\n        (result.aiAnalysis.conditions && result.aiAnalysis.conditions.length > 0) ||\r\n        (result.aiAnalysis.medications && result.aiAnalysis.medications.length > 0) ||\r\n        (result.aiAnalysis.recommendations && result.aiAnalysis.recommendations.length > 0)\r\n      )) {\r\n        message = 'No specific parameters were extracted, but AI analysis is available.';\r\n      } else {\r\n        message = 'File processed, but limited information could be extracted. You can still upload it.';\r\n      }\r\n      \r\n      // Show success notification\r\n      showNotification(message, 'success');\r\n      \r\n      console.log('Backend response structure details:', {\r\n        hasParameters: Boolean(result.parameters) && Object.keys(result.parameters).length > 0,\r\n        parametersCount: result.parameters ? Object.keys(result.parameters).length : 0,\r\n        hasAiAnalysis: Boolean(result.aiAnalysis),\r\n        summaryLength: result.aiAnalysis?.summary?.length || 0,\r\n        conditionsLength: result.aiAnalysis?.conditions?.length || 0,\r\n        medicationsLength: result.aiAnalysis?.medications?.length || 0,\r\n        recommendationsLength: result.aiAnalysis?.recommendations?.length || 0\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error processing file:', error);\r\n      \r\n      // Handle specific error cases\r\n      if (error.message.includes('API key') || error.message.includes('OpenAI')) {\r\n        showNotification('AI service is unavailable. Your file will be uploaded without analysis.', 'warning');\r\n        \r\n        // Set default empty analysis structure for upload to continue\r\n        setExtractedParameters({\r\n          parameters: {},\r\n          aiAnalysis: {\r\n            conditions: [],\r\n            medications: [],\r\n            recommendations: \"AI analysis unavailable. Please review the document manually.\",\r\n            summary: \"This document was uploaded but could not be analyzed by AI due to service unavailability.\"\r\n          }\r\n        });\r\n      } else {\r\n        showNotification(`Error processing file: ${error.message}`, 'danger');\r\n        setExtractedParameters({});\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n  \r\n    try {\r\n      if (!newReport.file) {\r\n        throw new Error('Please select a file to upload');\r\n      }\r\n      \r\n      if (!newReport.disease_id) {\r\n        throw new Error('Please select a disease');\r\n      }\r\n      \r\n      if (!newReport.since) {\r\n        throw new Error('Please select a date');\r\n      }\r\n      \r\n      // Upload file to Supabase Storage\r\n      const fileExt = newReport.file.name.split('.').pop();\r\n      const fileName = `${userId}/${Date.now()}.${fileExt}`;\r\n      \r\n      console.log('Uploading file to Supabase storage:', fileName);\r\n      const { data: uploadData, error: uploadError } = await supabase.storage\r\n        .from('health-reports')\r\n        .upload(fileName, newReport.file);\r\n  \r\n      if (uploadError) {\r\n        console.error('Supabase storage upload error:', uploadError);\r\n        throw new Error(`Error uploading file: ${uploadError.message}`);\r\n      }\r\n  \r\n      // Get the public URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('health-reports')\r\n        .getPublicUrl(fileName);\r\n      \r\n      console.log('File uploaded successfully, public URL:', publicUrl);\r\n  \r\n      // Insert report into healthrecords\r\n      const reportData = {\r\n        user_id: userId,\r\n        disease_id: newReport.disease_id,\r\n        since: newReport.since,\r\n        document_url: publicUrl,\r\n        created_at: new Date().toISOString(),\r\n        ai_summary: extractedParameters?.aiAnalysis?.summary || null\r\n      };\r\n      \r\n      console.log('Inserting report data:', reportData);\r\n      const { data: insertedReport, error: reportError } = await supabase\r\n        .from('healthrecords')\r\n        .insert([reportData])\r\n        .select()\r\n        .single();\r\n  \r\n      if (reportError) {\r\n        console.error('Error inserting report data:', reportError);\r\n        throw new Error(`Error saving report: ${reportError.message}`);\r\n      }\r\n      \r\n      console.log('Report inserted successfully:', insertedReport);\r\n  \r\n      // Only continue if we have a valid report ID\r\n      if (!insertedReport || !insertedReport.id) {\r\n        throw new Error('Failed to get report ID from database');\r\n      }\r\n      \r\n      let hasErrors = false;\r\n      let errorDetails = [];\r\n  \r\n      // Save extracted parameters if any\r\n      if (extractedParameters?.parameters && Object.keys(extractedParameters.parameters).length > 0) {\r\n        const parameterData = Object.entries(extractedParameters.parameters).map(([key, value]) => ({\r\n          user_id: userId,\r\n          record_id: insertedReport.id,\r\n          parameter_name: key,\r\n          parameter_value: typeof value === 'object' ? JSON.stringify(value) : String(value || \"N/A\"),\r\n          created_at: new Date().toISOString()\r\n        }));\r\n        \r\n        console.log('Saving parameters:', parameterData.length);\r\n        const { error: paramError } = await supabase\r\n          .from('health_parameters')\r\n          .insert(parameterData);\r\n      \r\n        if (paramError) {\r\n          console.error('Error saving parameters:', paramError);\r\n          hasErrors = true;\r\n          errorDetails.push(`Parameters: ${paramError.message}`);\r\n        }\r\n      } else {\r\n        console.log('No parameters to save');\r\n      }\r\n  \r\n      // Save conditions if any\r\n      if (extractedParameters?.aiAnalysis?.conditions?.length > 0) {\r\n        const conditionData = extractedParameters.aiAnalysis.conditions\r\n          .filter(condition => condition && condition.trim()) // Filter out empty strings\r\n          .map(condition => ({\r\n            record_id: insertedReport.id,\r\n            condition_name: condition.trim(),\r\n            user_id: userId,\r\n            created_at: new Date().toISOString()\r\n          }));\r\n        \r\n        console.log('Saving conditions:', conditionData.length);\r\n        const { error: condError } = await supabase\r\n          .from('report_conditions')\r\n          .insert(conditionData);\r\n      \r\n        if (condError) {\r\n          console.error('Error saving conditions:', condError);\r\n          hasErrors = true;\r\n          errorDetails.push(`Conditions: ${condError.message}`);\r\n        }\r\n      } else {\r\n        console.log('No conditions to save');\r\n      }\r\n      \r\n      // Save medications if any\r\n      if (extractedParameters?.aiAnalysis?.medications?.length > 0) {\r\n        const medicationData = extractedParameters.aiAnalysis.medications\r\n          .filter(medication => medication && medication.trim()) // Filter out empty strings\r\n          .map(medication => ({\r\n            record_id: insertedReport.id,\r\n            medication_name: medication.trim(),\r\n            user_id: userId, // Add user_id here as well for consistency\r\n            created_at: new Date().toISOString()\r\n          }));\r\n        \r\n        console.log('Saving medications:', medicationData.length);\r\n        const { error: medError } = await supabase\r\n          .from('report_medications')\r\n          .insert(medicationData);\r\n      \r\n        if (medError) {\r\n          console.error('Error saving medications:', medError);\r\n          hasErrors = true;\r\n          errorDetails.push(`Medications: ${medError.message}`);\r\n        }\r\n      } else {\r\n        console.log('No medications to save');\r\n      }\r\n      \r\n      // Save recommendations if any\r\n      if (extractedParameters?.aiAnalysis?.recommendations) {\r\n        console.log('Saving recommendations');\r\n        const { error: recError } = await supabase\r\n          .from('report_recommendations')\r\n          .insert([{\r\n            record_id: insertedReport.id,\r\n            recommendation_text: extractedParameters.aiAnalysis.recommendations,\r\n            user_id: userId, // Add user_id here as well for consistency\r\n            created_at: new Date().toISOString()\r\n          }]);\r\n      \r\n        if (recError) {\r\n          console.error('Error saving recommendations:', recError);\r\n          hasErrors = true;\r\n          errorDetails.push(`Recommendations: ${recError.message}`);\r\n        }\r\n      } else {\r\n        console.log('No recommendations to save');\r\n      }\r\n  \r\n      // Refresh data\r\n      await fetchHealthData(userId);\r\n      \r\n      // Reset form\r\n      setShowModal(false);\r\n      setNewReport({ disease_id: '', since: '', file: null });\r\n      setPreview(null);\r\n      setExtractedParameters({});\r\n      \r\n      // Show success notification with any partial errors\r\n      if (hasErrors) {\r\n        showNotification(`Report uploaded but some data couldn't be saved: ${errorDetails.join(', ')}`, 'warning');\r\n      } else {\r\n        showNotification('Report uploaded successfully!', 'success');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error uploading report:', error);\r\n      showNotification(`Error uploading report: ${error.message}`, 'danger');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Add these functions to your component\r\n  const handleDeleteReport = (reportId) => {\r\n    setReportToDelete(reportId);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // First, get the report details to find related resources\r\n      const { data: report, error: fetchError } = await supabase\r\n        .from('healthrecords')\r\n        .select('*')\r\n        .eq('id', reportToDelete)\r\n        .single();\r\n      \r\n      if (fetchError) {\r\n        console.error('Error fetching report:', fetchError);\r\n        throw new Error(`Error fetching report: ${fetchError.message}`);\r\n      }\r\n      \r\n      console.log('Report to delete:', report);\r\n      \r\n      // Delete related data first (due to foreign key constraints)\r\n      // Use explicit error logging for each deletion\r\n      \r\n      try {\r\n        const { error: paramError } = await supabase\r\n          .from('health_parameters')\r\n          .delete()\r\n          .eq('record_id', reportToDelete);\r\n        \r\n        if (paramError) console.error('Error deleting health parameters:', paramError);\r\n      } catch (error) {\r\n        console.error('Exception deleting health parameters:', error);\r\n      }\r\n      \r\n      try {\r\n        const { error: condError } = await supabase\r\n          .from('report_conditions')\r\n          .delete()\r\n          .eq('record_id', reportToDelete);\r\n        \r\n        if (condError) console.error('Error deleting report conditions:', condError);\r\n      } catch (error) {\r\n        console.error('Exception deleting report conditions:', error);\r\n      }\r\n      \r\n      try {\r\n        const { error: medError } = await supabase\r\n          .from('report_medications')\r\n          .delete()\r\n          .eq('record_id', reportToDelete);\r\n        \r\n        if (medError) console.error('Error deleting report medications:', medError);\r\n      } catch (error) {\r\n        console.error('Exception deleting report medications:', error);\r\n      }\r\n      \r\n      try {\r\n        const { error: recError } = await supabase\r\n          .from('report_recommendations')\r\n          .delete()\r\n          .eq('record_id', reportToDelete);\r\n        \r\n        if (recError) console.error('Error deleting report recommendations:', recError);\r\n      } catch (error) {\r\n        console.error('Exception deleting report recommendations:', error);\r\n      }\r\n      \r\n      try {\r\n        const { error: aiError } = await supabase\r\n          .from('report_ai_analysis')\r\n          .delete()\r\n          .eq('report_id', reportToDelete);\r\n        \r\n        if (aiError) console.error('Error deleting AI analysis:', aiError);\r\n      } catch (error) {\r\n        console.error('Exception deleting AI analysis:', error);\r\n      }\r\n      \r\n      // Delete the storage file if it exists\r\n      if (report.document_url) {\r\n        try {\r\n          // Extract the file path from the URL\r\n          // URL format: https://[project-ref].supabase.co/storage/v1/object/public/health-reports/[userId]/[filename]\r\n          const fileName = report.document_url.split('/').pop();\r\n          \r\n          // Different approach to get the user folder\r\n          const pathMatch = report.document_url.match(/health-reports\\/([^\\/]+)\\/([^\\/]+)$/);\r\n          let storagePath;\r\n          \r\n          if (pathMatch && pathMatch.length >= 3) {\r\n            const userFolder = pathMatch[1];\r\n            const fileNameFromUrl = pathMatch[2];\r\n            storagePath = `${userFolder}/${fileNameFromUrl}`;\r\n          } else {\r\n            // Fallback approach\r\n            storagePath = `${userId}/${fileName}`;\r\n          }\r\n          \r\n          console.log('Attempting to delete file at path:', storagePath);\r\n          \r\n          const { error: storageError } = await supabase.storage\r\n            .from('health-reports')\r\n            .remove([storagePath]);\r\n          \r\n          if (storageError) {\r\n            console.error('Error deleting file:', storageError);\r\n          } else {\r\n            console.log('File deleted successfully');\r\n          }\r\n        } catch (error) {\r\n          console.error('Exception during file deletion:', error);\r\n          // Continue with record deletion even if file deletion fails\r\n        }\r\n      }\r\n      \r\n      // Finally delete the report record\r\n      const { error: deleteError } = await supabase\r\n        .from('healthrecords')\r\n        .delete()\r\n        .eq('id', reportToDelete);\r\n      \r\n      if (deleteError) {\r\n        console.error('Error deleting healthrecord:', deleteError);\r\n        throw new Error(`Error deleting report: ${deleteError.message}`);\r\n      }\r\n      \r\n      console.log('Report deleted successfully');\r\n      \r\n      // Manually remove from state for immediate UI update\r\n      setHealthData(healthData.filter(report => report.id !== reportToDelete));\r\n      \r\n      // Refresh data from the database\r\n      fetchHealthData(userId);\r\n      \r\n      showNotification('Report deleted successfully', 'success');\r\n    } catch (error) {\r\n      console.error('Error in delete process:', error);\r\n      showNotification(`Error deleting report: ${error.message}`, 'danger');\r\n    } finally {\r\n      setLoading(false);\r\n      setShowDeleteModal(false);\r\n      setReportToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Add a function to handle notifications\r\n  const showNotification = (message, type = 'info', duration = 5000) => {\r\n    // Clear any existing timeout\r\n    if (notificationTimeout) {\r\n      clearTimeout(notificationTimeout);\r\n    }\r\n    \r\n    // Set the notification\r\n    setNotification({ message, type });\r\n    \r\n    // Set a timeout to clear the notification\r\n    const timeout = setTimeout(() => {\r\n      setNotification(null);\r\n    }, duration);\r\n    \r\n    setNotificationTimeout(timeout);\r\n  };\r\n  \r\n  // Clean up timeout on component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (notificationTimeout) {\r\n        clearTimeout(notificationTimeout);\r\n      }\r\n    };\r\n  }, [notificationTimeout]);\r\n\r\n  // Add a test function to validate rendering with sample data\r\n  const testBackendResponse = async () => {\r\n    try {\r\n      showNotification('Testing with sample data...', 'info');\r\n      setLoading(true);\r\n      \r\n      const response = await fetch('https://digihealth-backend.onrender.com/api/test-response');\r\n      if (!response.ok) {\r\n        throw new Error('Error fetching test data');\r\n      }\r\n      \r\n      const result = await response.json();\r\n      console.log('Test response received:', result);\r\n      \r\n      // Set the extracted parameters with the test data\r\n      setExtractedParameters(result);\r\n      \r\n      showNotification('Test data loaded successfully! You can view it in the modal.', 'success');\r\n      \r\n      // Open the modal to display the test data\r\n      setNewReport({\r\n        disease_id: userDiseases.length > 0 ? userDiseases[0].id : '',\r\n        since: new Date().toISOString().split('T')[0],\r\n        file: null\r\n      });\r\n      setShowModal(true);\r\n    } catch (error) {\r\n      console.error('Error testing backend response:', error);\r\n      showNotification(`Error: ${error.message}`, 'danger');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      {loading && <Spinner />}\r\n      {notification && (\r\n        <div \r\n          className={`alert alert-${notification.type} position-fixed d-flex justify-content-between align-items-center`} \r\n          style={{\r\n            top: '20px', \r\n            right: '20px', \r\n            zIndex: 1050,\r\n            minWidth: '300px',\r\n            maxWidth: '500px',\r\n            boxShadow: '0 4px 8px rgba(0,0,0,0.1)'\r\n          }}\r\n          role=\"alert\"\r\n        >\r\n          <span>{notification.message}</span>\r\n          <button \r\n            type=\"button\" \r\n            className=\"btn-close ms-3\" \r\n            onClick={() => setNotification(null)}\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n      )}\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h2 className=\"text-primary\">Health Reports</h2>\r\n        <Button variant=\"primary\" onClick={() => setShowModal(true)}>+ Upload Report</Button>\r\n      </div>\r\n      \r\n      <Row>\r\n        {healthData.map((report) => (\r\n          <Col md={3} sm={6} key={report.id} className=\"mb-3\">\r\n            <Card className=\"shadow-sm border-0\">\r\n              <Card.Body>\r\n                <Card.Title>Disease: {report.user_diseases?.disease_name}</Card.Title>\r\n                <Card.Text>Since: {report.since}</Card.Text>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <Button \r\n                    variant=\"danger\" \r\n                    size=\"md\" \r\n                    className='m-2' \r\n                    style={styles.actionButton}\r\n                    onClick={() => handleDeleteReport(report.id)}\r\n                  >\r\n                    Delete\r\n                  </Button>\r\n                  <Button \r\n                    variant=\"info\" \r\n                    size=\"md\" \r\n                    className='m-2' \r\n                    style={styles.actionButton}\r\n                    onClick={() => window.open(report.document_url, '_blank')}\r\n                  >\r\n                    View\r\n                  </Button>\r\n                </div>\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n      \r\n      <Modal show={showModal} onHide={() => setShowModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Upload New Report</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Select Disease</Form.Label>\r\n              <Form.Select \r\n                value={newReport.disease_id}\r\n                onChange={(e) => setNewReport({ ...newReport, disease_id: e.target.value })}\r\n                required\r\n              >\r\n                <option value=\"\">Select a disease</option>\r\n                {userDiseases.map((disease) => (\r\n                  <option key={disease.id} value={disease.id}>\r\n                    {disease.disease_name}\r\n                  </option>\r\n                ))}\r\n              </Form.Select>\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Since</Form.Label>\r\n              <Form.Control \r\n                type=\"date\" \r\n                value={newReport.since}\r\n                onChange={(e) => setNewReport({ ...newReport, since: e.target.value })}\r\n                required\r\n              />\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Upload File</Form.Label>\r\n              <Form.Control \r\n                type=\"file\" \r\n                accept=\".pdf,.doc,.docx,.jpg,.jpeg,.png\" \r\n                onChange={handleFileChange}\r\n                required\r\n              />\r\n            </Form.Group>\r\n            {preview && <img src={preview} alt=\"Preview\" className=\"img-fluid rounded mb-3\" />}\r\n\r\n            {/* Show message if file was processed but no data extracted */}\r\n            {extractedParameters && \r\n              (!extractedParameters.parameters || Object.keys(extractedParameters.parameters).length === 0) &&\r\n              (!extractedParameters.aiAnalysis || Object.keys(extractedParameters.aiAnalysis).length === 0) && (\r\n              <div className=\"alert alert-info mt-3\">\r\n                <i className=\"bi bi-info-circle me-2\"></i>\r\n                No parameters or analysis could be extracted from this document. \r\n                You can still upload it for record-keeping.\r\n              </div>\r\n            )}\r\n            \r\n            {/* Display extracted parameters */}\r\n            {extractedParameters.parameters && Object.keys(extractedParameters.parameters).length > 0 && (\r\n              <div className=\"mb-3\">\r\n                <h5>Extracted Parameters:</h5>\r\n                <ul className=\"list-group\">\r\n                  {Object.entries(extractedParameters.parameters).map(([name, value]) => (\r\n                    <li key={name} className=\"list-group-item\">\r\n                      {name}: {typeof value === 'object' ? JSON.stringify(value) : String(value || 'N/A')}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            {/* Display AI analysis */}\r\n            {extractedParameters?.aiAnalysis ? (\r\n              <div className=\"mb-3\">\r\n                <h5>AI Analysis</h5>\r\n                <div className=\"card\">\r\n                  <div className=\"card-body\">\r\n                    {/* Check if summary exists */}\r\n                    {extractedParameters.aiAnalysis.summary ? (\r\n                      <>\r\n                        <h6>Summary</h6>\r\n                        <p>{String(extractedParameters.aiAnalysis.summary)}</p>\r\n                      </>\r\n                    ) : (\r\n                      <p className=\"text-muted\">No summary available for this document.</p>\r\n                    )}\r\n                    \r\n                    {/* Display conditions */}\r\n                    {extractedParameters.aiAnalysis.conditions && \r\n                      extractedParameters.aiAnalysis.conditions.length > 0 && (\r\n                      <>\r\n                        <h6 className=\"mt-3\">Conditions Identified</h6>\r\n                        <ul className=\"list-group\">\r\n                          {extractedParameters.aiAnalysis.conditions.map((condition, index) => (\r\n                            <li key={index} className=\"list-group-item list-group-item-info\">\r\n                              {String(condition)}\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </>\r\n                    )}\r\n                    \r\n                    {/* Display medications */}\r\n                    {extractedParameters.aiAnalysis.medications && \r\n                      extractedParameters.aiAnalysis.medications.length > 0 && (\r\n                      <>\r\n                        <h6 className=\"mt-3\">Medications</h6>\r\n                        <ul className=\"list-group\">\r\n                          {extractedParameters.aiAnalysis.medications.map((medication, index) => (\r\n                            <li key={index} className=\"list-group-item list-group-item-warning\">\r\n                              {String(medication)}\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </>\r\n                    )}\r\n                    \r\n                    {/* Display recommendations */}\r\n                    {extractedParameters.aiAnalysis.recommendations && (\r\n                      <>\r\n                        <h6 className=\"mt-3\">Recommendations</h6>\r\n                        <p>{String(extractedParameters.aiAnalysis.recommendations)}</p>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            <Button type=\"submit\" variant=\"primary\" disabled={loading}>\r\n              {loading ? 'Uploading...' : 'Upload Report'}\r\n            </Button>\r\n          </Form>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n      <Modal show={showDeleteModal} onHide={() => setShowDeleteModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Confirm Delete</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Are you sure you want to delete this report?</p>\r\n          <div className=\"d-flex justify-content-end\">\r\n            <Button variant=\"secondary\" onClick={() => setShowDeleteModal(false)} className=\"me-2\">\r\n              Cancel\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={confirmDelete}>\r\n              Delete\r\n            </Button>\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n      <div className=\"mt-5 pt-5 border-top\">\r\n        <h5>Troubleshooting</h5>\r\n        <Button \r\n          variant=\"outline-secondary\" \r\n          size=\"sm\" \r\n          onClick={testBackendResponse}\r\n          className=\"mt-2\"\r\n        >\r\n          Test Rendering\r\n        </Button>\r\n        <small className=\"d-block text-muted mt-2\">\r\n          Use this button to test rendering with sample data if you encounter issues.\r\n        </small>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HealthOverview;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaHistory, FaPlus, FaTrash, FaEdit } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst MedicalHistoryPage = () => {\r\n  const [medicalRecords, setMedicalRecords] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentRecord, setCurrentRecord] = useState({\r\n    id: null,\r\n    condition: '',\r\n    diagnosis_date: '',\r\n    doctor: '',\r\n    treatment: '',\r\n    notes: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchMedicalRecords();\r\n  }, []);\r\n\r\n  const fetchMedicalRecords = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('medical_history')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('diagnosis_date', { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setMedicalRecords(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching medical records:', error);\r\n      setNotification({ message: 'Error fetching medical records.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCurrentRecord(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      if (isEditing) {\r\n        // Update existing record\r\n        const { error } = await supabase\r\n          .from('medical_history')\r\n          .update({\r\n            condition: currentRecord.condition,\r\n            diagnosis_date: currentRecord.diagnosis_date,\r\n            doctor: currentRecord.doctor,\r\n            treatment: currentRecord.treatment,\r\n            notes: currentRecord.notes\r\n          })\r\n          .eq('id', currentRecord.id);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Medical record updated successfully!', type: 'success' });\r\n      } else {\r\n        // Add new record\r\n        const { error } = await supabase\r\n          .from('medical_history')\r\n          .insert([{\r\n            condition: currentRecord.condition,\r\n            diagnosis_date: currentRecord.diagnosis_date,\r\n            doctor: currentRecord.doctor,\r\n            treatment: currentRecord.treatment,\r\n            notes: currentRecord.notes,\r\n            user_id: user.id\r\n          }]);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Medical record added successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Reset form and fetch updated records\r\n      resetForm();\r\n      fetchMedicalRecords();\r\n    } catch (error) {\r\n      console.error('Error saving medical record:', error);\r\n      setNotification({ message: 'Error saving medical record.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (record) => {\r\n    setIsEditing(true);\r\n    setCurrentRecord(record);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this record?')) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('medical_history')\r\n        .delete()\r\n        .eq('id', id);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setMedicalRecords(medicalRecords.filter(record => record.id !== id));\r\n      setNotification({ message: 'Medical record deleted successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error deleting medical record:', error);\r\n      setNotification({ message: 'Error deleting medical record.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsEditing(false);\r\n    setCurrentRecord({\r\n      id: null,\r\n      condition: '',\r\n      diagnosis_date: '',\r\n      doctor: '',\r\n      treatment: '',\r\n      notes: ''\r\n    });\r\n  };\r\n\r\n  if (loading && medicalRecords.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaHistory className=\"me-2\" /> Medical History\r\n      </h1>\r\n      \r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <h3>{isEditing ? 'Edit Medical Record' : 'Add New Medical Record'}</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"condition\" className=\"form-label\">Condition/Diagnosis</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"condition\" \r\n                name=\"condition\" \r\n                value={currentRecord.condition} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"diagnosis_date\" className=\"form-label\">Diagnosis Date</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"diagnosis_date\" \r\n                name=\"diagnosis_date\" \r\n                value={currentRecord.diagnosis_date} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"doctor\" className=\"form-label\">Doctor/Healthcare Provider</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"doctor\" \r\n                name=\"doctor\" \r\n                value={currentRecord.doctor} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"treatment\" className=\"form-label\">Treatment</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"treatment\" \r\n                name=\"treatment\" \r\n                value={currentRecord.treatment} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"notes\" className=\"form-label\">Notes</label>\r\n            <textarea \r\n              className=\"form-control\" \r\n              id=\"notes\" \r\n              name=\"notes\" \r\n              rows=\"3\" \r\n              value={currentRecord.notes} \r\n              onChange={handleChange}\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              {isEditing ? <><FaEdit className=\"me-2\" /> Update Record</> : <><FaPlus className=\"me-2\" /> Add Record</>}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      <h2 className=\"text-center mb-3\">Your Medical History</h2>\r\n      \r\n      {medicalRecords.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No medical records found. Add your first record above.\r\n        </div>\r\n      ) : (\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Condition</th>\r\n                <th>Diagnosis Date</th>\r\n                <th>Doctor</th>\r\n                <th>Treatment</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {medicalRecords.map((record) => (\r\n                <tr key={record.id}>\r\n                  <td>{record.condition}</td>\r\n                  <td>{new Date(record.diagnosis_date).toLocaleDateString()}</td>\r\n                  <td>{record.doctor}</td>\r\n                  <td>{record.treatment}</td>\r\n                  <td>\r\n                    <button \r\n                      className=\"btn btn-sm btn-primary me-2\" \r\n                      onClick={() => handleEdit(record)}\r\n                    >\r\n                      <FaEdit />\r\n                    </button>\r\n                    <button \r\n                      className=\"btn btn-sm btn-danger\" \r\n                      onClick={() => handleDelete(record.id)}\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicalHistoryPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaDiagnoses, FaPlus, FaTrash, FaEdit, FaChartLine } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst ChronicDiseaseManagementPage = () => {\r\n  const [chronicDiseases, setChronicDiseases] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentDisease, setCurrentDisease] = useState({\r\n    id: null,\r\n    disease_name: '',\r\n    diagnosis_date: '',\r\n    severity: 'Mild',\r\n    medications: '',\r\n    symptoms: '',\r\n    notes: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchChronicDiseases();\r\n  }, []);\r\n\r\n  const fetchChronicDiseases = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('chronic_diseases')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('diagnosis_date', { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setChronicDiseases(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching chronic diseases:', error);\r\n      setNotification({ message: 'Error fetching chronic diseases.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCurrentDisease(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      if (isEditing) {\r\n        // Update existing disease\r\n        const { error } = await supabase\r\n          .from('chronic_diseases')\r\n          .update({\r\n            disease_name: currentDisease.disease_name,\r\n            diagnosis_date: currentDisease.diagnosis_date,\r\n            severity: currentDisease.severity,\r\n            medications: currentDisease.medications,\r\n            symptoms: currentDisease.symptoms,\r\n            notes: currentDisease.notes\r\n          })\r\n          .eq('id', currentDisease.id);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Chronic disease updated successfully!', type: 'success' });\r\n      } else {\r\n        // Add new disease\r\n        const { error } = await supabase\r\n          .from('chronic_diseases')\r\n          .insert([{\r\n            disease_name: currentDisease.disease_name,\r\n            diagnosis_date: currentDisease.diagnosis_date,\r\n            severity: currentDisease.severity,\r\n            medications: currentDisease.medications,\r\n            symptoms: currentDisease.symptoms,\r\n            notes: currentDisease.notes,\r\n            user_id: user.id\r\n          }]);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Chronic disease added successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Reset form and fetch updated diseases\r\n      resetForm();\r\n      fetchChronicDiseases();\r\n    } catch (error) {\r\n      console.error('Error saving chronic disease:', error);\r\n      setNotification({ message: 'Error saving chronic disease.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (disease) => {\r\n    setIsEditing(true);\r\n    setCurrentDisease(disease);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this chronic disease record?')) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('chronic_diseases')\r\n        .delete()\r\n        .eq('id', id);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setChronicDiseases(chronicDiseases.filter(disease => disease.id !== id));\r\n      setNotification({ message: 'Chronic disease deleted successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error deleting chronic disease:', error);\r\n      setNotification({ message: 'Error deleting chronic disease.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsEditing(false);\r\n    setCurrentDisease({\r\n      id: null,\r\n      disease_name: '',\r\n      diagnosis_date: '',\r\n      severity: 'Mild',\r\n      medications: '',\r\n      symptoms: '',\r\n      notes: ''\r\n    });\r\n  };\r\n\r\n  const getSeverityBadgeClass = (severity) => {\r\n    switch (severity) {\r\n      case 'Mild':\r\n        return 'bg-success';\r\n      case 'Moderate':\r\n        return 'bg-warning text-dark';\r\n      case 'Severe':\r\n        return 'bg-danger';\r\n      default:\r\n        return 'bg-secondary';\r\n    }\r\n  };\r\n\r\n  if (loading && chronicDiseases.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaDiagnoses className=\"me-2\" /> Chronic Disease Management\r\n      </h1>\r\n      \r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <h3>{isEditing ? 'Edit Chronic Disease' : 'Add New Chronic Disease'}</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"disease_name\" className=\"form-label\">Disease Name</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"disease_name\" \r\n                name=\"disease_name\" \r\n                value={currentDisease.disease_name} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"diagnosis_date\" className=\"form-label\">Diagnosis Date</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"diagnosis_date\" \r\n                name=\"diagnosis_date\" \r\n                value={currentDisease.diagnosis_date} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"severity\" className=\"form-label\">Severity</label>\r\n              <select \r\n                className=\"form-control\" \r\n                id=\"severity\" \r\n                name=\"severity\" \r\n                value={currentDisease.severity} \r\n                onChange={handleChange}\r\n              >\r\n                <option value=\"Mild\">Mild</option>\r\n                <option value=\"Moderate\">Moderate</option>\r\n                <option value=\"Severe\">Severe</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"medications\" className=\"form-label\">Medications</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"medications\" \r\n                name=\"medications\" \r\n                value={currentDisease.medications} \r\n                onChange={handleChange} \r\n                placeholder=\"Separate multiple medications with commas\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"symptoms\" className=\"form-label\">Symptoms</label>\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\" \r\n              id=\"symptoms\" \r\n              name=\"symptoms\" \r\n              value={currentDisease.symptoms} \r\n              onChange={handleChange} \r\n              placeholder=\"Separate multiple symptoms with commas\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"notes\" className=\"form-label\">Notes</label>\r\n            <textarea \r\n              className=\"form-control\" \r\n              id=\"notes\" \r\n              name=\"notes\" \r\n              rows=\"3\" \r\n              value={currentDisease.notes} \r\n              onChange={handleChange}\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              {isEditing ? <><FaEdit className=\"me-2\" /> Update Disease</> : <><FaPlus className=\"me-2\" /> Add Disease</>}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      <h2 className=\"text-center mb-3\">Your Chronic Diseases</h2>\r\n      \r\n      {chronicDiseases.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No chronic diseases found. Add your first record above.\r\n        </div>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {chronicDiseases.map((disease) => (\r\n            <div key={disease.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n              <div className=\"card h-100 shadow\">\r\n                <div className=\"card-header d-flex justify-content-between align-items-center\">\r\n                  <h5 className=\"mb-0\">{disease.disease_name}</h5>\r\n                  <span className={`badge ${getSeverityBadgeClass(disease.severity)}`}>\r\n                    {disease.severity}\r\n                  </span>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <p><strong>Diagnosed:</strong> {new Date(disease.diagnosis_date).toLocaleDateString()}</p>\r\n                  \r\n                  {disease.medications && (\r\n                    <p>\r\n                      <strong>Medications:</strong><br />\r\n                      {disease.medications.split(',').map((med, index) => (\r\n                        <span key={index} className=\"badge bg-info text-dark me-1 mb-1\">\r\n                          {med.trim()}\r\n                        </span>\r\n                      ))}\r\n                    </p>\r\n                  )}\r\n                  \r\n                  {disease.symptoms && (\r\n                    <p>\r\n                      <strong>Symptoms:</strong><br />\r\n                      {disease.symptoms.split(',').map((symptom, index) => (\r\n                        <span key={index} className=\"badge bg-secondary me-1 mb-1\">\r\n                          {symptom.trim()}\r\n                        </span>\r\n                      ))}\r\n                    </p>\r\n                  )}\r\n                  \r\n                  {disease.notes && (\r\n                    <p>\r\n                      <strong>Notes:</strong><br />\r\n                      {disease.notes}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-footer d-flex justify-content-between\">\r\n                  <button \r\n                    className=\"btn btn-sm btn-primary\" \r\n                    onClick={() => handleEdit(disease)}\r\n                  >\r\n                    <FaEdit className=\"me-1\" /> Edit\r\n                  </button>\r\n                  <button \r\n                    className=\"btn btn-sm btn-danger\" \r\n                    onClick={() => handleDelete(disease.id)}\r\n                  >\r\n                    <FaTrash className=\"me-1\" /> Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChronicDiseaseManagementPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaSyringe, FaPlus, FaTrash, FaEdit, FaCalendarCheck } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst VaccinationHistoryPage = () => {\r\n  const [vaccinations, setVaccinations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentVaccination, setCurrentVaccination] = useState({\r\n    id: null,\r\n    vaccine_name: '',\r\n    date_administered: '',\r\n    administered_by: '',\r\n    lot_number: '',\r\n    next_dose_date: '',\r\n    notes: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchVaccinations();\r\n  }, []);\r\n\r\n  const fetchVaccinations = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('vaccinations')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('date_administered', { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setVaccinations(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching vaccinations:', error);\r\n      setNotification({ message: 'Error fetching vaccinations.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCurrentVaccination(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      if (isEditing) {\r\n        // Update existing vaccination\r\n        const { error } = await supabase\r\n          .from('vaccinations')\r\n          .update({\r\n            vaccine_name: currentVaccination.vaccine_name,\r\n            date_administered: currentVaccination.date_administered,\r\n            administered_by: currentVaccination.administered_by,\r\n            lot_number: currentVaccination.lot_number,\r\n            next_dose_date: currentVaccination.next_dose_date,\r\n            notes: currentVaccination.notes\r\n          })\r\n          .eq('id', currentVaccination.id);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Vaccination record updated successfully!', type: 'success' });\r\n      } else {\r\n        // Add new vaccination\r\n        const { error } = await supabase\r\n          .from('vaccinations')\r\n          .insert([{\r\n            vaccine_name: currentVaccination.vaccine_name,\r\n            date_administered: currentVaccination.date_administered,\r\n            administered_by: currentVaccination.administered_by,\r\n            lot_number: currentVaccination.lot_number,\r\n            next_dose_date: currentVaccination.next_dose_date,\r\n            notes: currentVaccination.notes,\r\n            user_id: user.id\r\n          }]);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Vaccination record added successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Reset form and fetch updated vaccinations\r\n      resetForm();\r\n      fetchVaccinations();\r\n    } catch (error) {\r\n      console.error('Error saving vaccination record:', error);\r\n      setNotification({ message: 'Error saving vaccination record.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (vaccination) => {\r\n    setIsEditing(true);\r\n    setCurrentVaccination(vaccination);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this vaccination record?')) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('vaccinations')\r\n        .delete()\r\n        .eq('id', id);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setVaccinations(vaccinations.filter(vaccination => vaccination.id !== id));\r\n      setNotification({ message: 'Vaccination record deleted successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error deleting vaccination record:', error);\r\n      setNotification({ message: 'Error deleting vaccination record.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsEditing(false);\r\n    setCurrentVaccination({\r\n      id: null,\r\n      vaccine_name: '',\r\n      date_administered: '',\r\n      administered_by: '',\r\n      lot_number: '',\r\n      next_dose_date: '',\r\n      notes: ''\r\n    });\r\n  };\r\n\r\n  // Check if a vaccination is due soon (within 30 days)\r\n  const isDueSoon = (nextDoseDate) => {\r\n    if (!nextDoseDate) return false;\r\n    \r\n    const today = new Date();\r\n    const dueDate = new Date(nextDoseDate);\r\n    const diffTime = dueDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    return diffDays >= 0 && diffDays <= 30;\r\n  };\r\n\r\n  // Check if a vaccination is overdue\r\n  const isOverdue = (nextDoseDate) => {\r\n    if (!nextDoseDate) return false;\r\n    \r\n    const today = new Date();\r\n    const dueDate = new Date(nextDoseDate);\r\n    \r\n    return dueDate < today;\r\n  };\r\n\r\n  if (loading && vaccinations.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaSyringe className=\"me-2\" /> Vaccination History\r\n      </h1>\r\n      \r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <h3>{isEditing ? 'Edit Vaccination Record' : 'Add New Vaccination'}</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"vaccine_name\" className=\"form-label\">Vaccine Name</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"vaccine_name\" \r\n                name=\"vaccine_name\" \r\n                value={currentVaccination.vaccine_name} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"date_administered\" className=\"form-label\">Date Administered</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"date_administered\" \r\n                name=\"date_administered\" \r\n                value={currentVaccination.date_administered} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"administered_by\" className=\"form-label\">Administered By</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"administered_by\" \r\n                name=\"administered_by\" \r\n                value={currentVaccination.administered_by} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"lot_number\" className=\"form-label\">Lot Number</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"lot_number\" \r\n                name=\"lot_number\" \r\n                value={currentVaccination.lot_number} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"next_dose_date\" className=\"form-label\">Next Dose Date (if applicable)</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"next_dose_date\" \r\n                name=\"next_dose_date\" \r\n                value={currentVaccination.next_dose_date} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"notes\" className=\"form-label\">Notes</label>\r\n              <textarea \r\n                className=\"form-control\" \r\n                id=\"notes\" \r\n                name=\"notes\" \r\n                rows=\"3\" \r\n                value={currentVaccination.notes} \r\n                onChange={handleChange}\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              {isEditing ? <><FaEdit className=\"me-2\" /> Update Record</> : <><FaPlus className=\"me-2\" /> Add Record</>}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      {/* Upcoming Vaccinations Section */}\r\n      {vaccinations.some(vax => isDueSoon(vax.next_dose_date) || isOverdue(vax.next_dose_date)) && (\r\n        <div className=\"card shadow mb-4\">\r\n          <div className=\"card-header bg-warning text-dark\">\r\n            <h3 className=\"mb-0\"><FaCalendarCheck className=\"me-2\" /> Upcoming & Overdue Vaccinations</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Vaccine</th>\r\n                    <th>Due Date</th>\r\n                    <th>Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {vaccinations\r\n                    .filter(vax => isDueSoon(vax.next_dose_date) || isOverdue(vax.next_dose_date))\r\n                    .map(vax => (\r\n                      <tr key={`upcoming-${vax.id}`}>\r\n                        <td>{vax.vaccine_name}</td>\r\n                        <td>{new Date(vax.next_dose_date).toLocaleDateString()}</td>\r\n                        <td>\r\n                          {isOverdue(vax.next_dose_date) ? (\r\n                            <span className=\"badge bg-danger\">Overdue</span>\r\n                          ) : (\r\n                            <span className=\"badge bg-warning text-dark\">Due Soon</span>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <h2 className=\"text-center mb-3\">Your Vaccination History</h2>\r\n      \r\n      {vaccinations.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No vaccination records found. Add your first record above.\r\n        </div>\r\n      ) : (\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Vaccine</th>\r\n                <th>Date</th>\r\n                <th>Administered By</th>\r\n                <th>Lot Number</th>\r\n                <th>Next Dose</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {vaccinations.map((vaccination) => (\r\n                <tr key={vaccination.id}>\r\n                  <td>{vaccination.vaccine_name}</td>\r\n                  <td>{new Date(vaccination.date_administered).toLocaleDateString()}</td>\r\n                  <td>{vaccination.administered_by}</td>\r\n                  <td>{vaccination.lot_number}</td>\r\n                  <td>\r\n                    {vaccination.next_dose_date ? (\r\n                      <>\r\n                        {new Date(vaccination.next_dose_date).toLocaleDateString()}\r\n                        {isOverdue(vaccination.next_dose_date) && (\r\n                          <span className=\"badge bg-danger ms-2\">Overdue</span>\r\n                        )}\r\n                        {isDueSoon(vaccination.next_dose_date) && !isOverdue(vaccination.next_dose_date) && (\r\n                          <span className=\"badge bg-warning text-dark ms-2\">Due Soon</span>\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      'N/A'\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button \r\n                      className=\"btn btn-sm btn-primary me-2\" \r\n                      onClick={() => handleEdit(vaccination)}\r\n                    >\r\n                      <FaEdit />\r\n                    </button>\r\n                    <button \r\n                      className=\"btn btn-sm btn-danger\" \r\n                      onClick={() => handleDelete(vaccination.id)}\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VaccinationHistoryPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaPills, FaTrash, FaPlus } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst MedicationTracker = () => {\r\n  const [medications, setMedications] = useState([]);\r\n  const [newMedication, setNewMedication] = useState({\r\n    name: '',\r\n    frequency: '',\r\n    customFrequency: '',\r\n    quantity: '',\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchMedications = async () => {\r\n      try {\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (!user) {\r\n          window.location.href = '/';\r\n          return;\r\n        }\r\n        const { data, error } = await supabase\r\n          .from('medications')\r\n          .select('*')\r\n          .eq('user_id', user.id);\r\n        if (error) throw error;\r\n        setMedications(data);\r\n      } catch (error) {\r\n        console.error('Error fetching medications:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchMedications();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (Notification.permission !== 'granted') {\r\n      Notification.requestPermission().then(permission => {\r\n        if (permission !== 'granted') {\r\n          console.warn('Notification permission not granted');\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewMedication((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAddMedication = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      const frequency = newMedication.customFrequency || newMedication.frequency;\r\n      const { data, error } = await supabase\r\n        .from('medications')\r\n        .insert([{ name: newMedication.name, frequency, quantity: newMedication.quantity, user_id: user.id, last_taken: new Date().toISOString() }])\r\n        .select();\r\n      if (error) throw error;\r\n      setMedications([...medications, ...data]);\r\n      setNewMedication({ name: '', frequency: '', customFrequency: '', quantity: '' });\r\n      setNotification({ message: 'Medication added successfully!', type: 'success' });\r\n      new Notification('Medication added successfully!');\r\n    } catch (error) {\r\n      console.error('Error adding medication:', error);\r\n      setNotification({ message: 'Error adding medication.', type: 'danger' });\r\n      new Notification('Error adding medication.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteMedication = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('medications')\r\n        .delete()\r\n        .eq('id', id);\r\n      if (error) throw error;\r\n      setMedications(medications.filter((med) => med.id !== id));\r\n      setNotification({ message: 'Medication deleted successfully!', type: 'success' });\r\n      new Notification('Medication deleted successfully!');\r\n    } catch (error) {\r\n      console.error('Error deleting medication:', error);\r\n      setNotification({ message: 'Error deleting medication.', type: 'danger' });\r\n      new Notification('Error deleting medication.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>{notification.message}</div>\r\n      )}\r\n      <h1 className=\"text-center mb-4\"><FaPills className=\"me-2\" /> Medication Tracker</h1>\r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"name\" className=\"form-label\">Medication Name</label>\r\n            <input type=\"text\" className=\"form-control\" id=\"name\" name=\"name\" value={newMedication.name} onChange={handleChange} />\r\n          </div>\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"quantity\" className=\"form-label\">Quantity (number of tablets)</label>\r\n            <input type=\"number\" className=\"form-control\" id=\"quantity\" name=\"quantity\" value={newMedication.quantity} onChange={handleChange} />\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"frequency\" className=\"form-label\">Frequency</label>\r\n            <select className=\"form-control\" id=\"frequency\" name=\"frequency\" value={newMedication.frequency} onChange={handleChange}>\r\n              <option value=\"\">Select frequency</option>\r\n              <option value=\"Once a day\">Once a day</option>\r\n              <option value=\"Twice a day\">Twice a day</option>\r\n              <option value=\"Three times a day\">Three times a day</option>\r\n              <option value=\"Every 6 hours\">Every 6 hours</option>\r\n              <option value=\"Every 8 hours\">Every 8 hours</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"col-md-6 mb-3\">\r\n            <label htmlFor=\"customFrequency\" className=\"form-label\">Custom Frequency</label>\r\n            <input type=\"text\" className=\"form-control\" id=\"customFrequency\" name=\"customFrequency\" placeholder=\"e.g., Every 4 hours\" value={newMedication.customFrequency} onChange={handleChange} />\r\n          </div>\r\n        </div>\r\n        <button className=\"btn btn-primary w-100\" onClick={handleAddMedication}><FaPlus className=\"me-2\" /> Add Medication</button>\r\n      </div>\r\n      <h2 className=\"text-center mb-3\">Your Medications</h2>\r\n      <table className=\"table table-striped\">\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Frequency</th>\r\n            <th>Quantity</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {medications.map((med) => (\r\n            <tr key={med.id}>\r\n              <td>{med.name}</td>\r\n              <td>{med.frequency}</td>\r\n              <td>{med.quantity}</td>\r\n              <td>\r\n                <button className=\"btn btn-danger btn-sm\" onClick={() => handleDeleteMedication(med.id)}>\r\n                  <FaTrash />\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicationTracker;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaChartLine, FaWeight, FaHeartbeat, FaTint, FaLungs, FaPlus, FaTimes } from 'react-icons/fa';\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport '../styles.css';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst HealthAnalyticsPage = () => {\r\n  const [healthData, setHealthData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [selectedMetric, setSelectedMetric] = useState('weight');\r\n  const [timeRange, setTimeRange] = useState('6months');\r\n  const [chartData, setChartData] = useState(null);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [newMetric, setNewMetric] = useState({\r\n    weight: '',\r\n    heart_rate: '',\r\n    blood_pressure_systolic: '',\r\n    blood_pressure_diastolic: '',\r\n    blood_sugar: '',\r\n    oxygen_saturation: '',\r\n    recorded_at: new Date().toISOString().split('T')[0]\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchHealthData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (healthData.length > 0) {\r\n      prepareChartData();\r\n    }\r\n  }, [healthData, selectedMetric, timeRange]);\r\n\r\n  const fetchHealthData = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('health_metrics')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('recorded_at', { ascending: true });\r\n        \r\n      if (error) throw error;\r\n      setHealthData(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching health data:', error);\r\n      setNotification({ message: 'Error fetching health data.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddMetric = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      // Filter out empty values\r\n      const metricData = Object.fromEntries(\r\n        Object.entries(newMetric).filter(([_, value]) => value !== '')\r\n      );\r\n      \r\n      // Add user_id to the data\r\n      metricData.user_id = user.id;\r\n      \r\n      const { error } = await supabase\r\n        .from('health_metrics')\r\n        .insert([metricData]);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setNotification({ message: 'Health metrics added successfully!', type: 'success' });\r\n      setShowAddForm(false);\r\n      \r\n      // Reset form\r\n      setNewMetric({\r\n        weight: '',\r\n        heart_rate: '',\r\n        blood_pressure_systolic: '',\r\n        blood_pressure_diastolic: '',\r\n        blood_sugar: '',\r\n        oxygen_saturation: '',\r\n        recorded_at: new Date().toISOString().split('T')[0]\r\n      });\r\n      \r\n      // Refresh data\r\n      fetchHealthData();\r\n    } catch (error) {\r\n      console.error('Error adding health metrics:', error);\r\n      setNotification({ message: 'Error adding health metrics.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewMetric(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const prepareChartData = () => {\r\n    // Filter data based on time range\r\n    const now = new Date();\r\n    let filteredData = [...healthData];\r\n    \r\n    if (timeRange === '1month') {\r\n      const oneMonthAgo = new Date(now.setMonth(now.getMonth() - 1));\r\n      filteredData = healthData.filter(item => new Date(item.recorded_at) >= oneMonthAgo);\r\n    } else if (timeRange === '3months') {\r\n      const threeMonthsAgo = new Date(now.setMonth(now.getMonth() - 3));\r\n      filteredData = healthData.filter(item => new Date(item.recorded_at) >= threeMonthsAgo);\r\n    } else if (timeRange === '6months') {\r\n      const sixMonthsAgo = new Date(now.setMonth(now.getMonth() - 6));\r\n      filteredData = healthData.filter(item => new Date(item.recorded_at) >= sixMonthsAgo);\r\n    } else if (timeRange === '1year') {\r\n      const oneYearAgo = new Date(now.setFullYear(now.getFullYear() - 1));\r\n      filteredData = healthData.filter(item => new Date(item.recorded_at) >= oneYearAgo);\r\n    }\r\n\r\n    // Prepare data for the selected metric\r\n    const labels = filteredData.map(item => {\r\n      const date = new Date(item.recorded_at);\r\n      return date.toLocaleDateString();\r\n    });\r\n\r\n    const data = filteredData.map(item => item[selectedMetric] || 0);\r\n\r\n    // Set chart colors based on metric\r\n    let borderColor = '#4bc0c0';\r\n    let backgroundColor = 'rgba(75, 192, 192, 0.2)';\r\n    \r\n    switch (selectedMetric) {\r\n      case 'weight':\r\n        borderColor = '#4bc0c0';\r\n        backgroundColor = 'rgba(75, 192, 192, 0.2)';\r\n        break;\r\n      case 'heart_rate':\r\n        borderColor = '#ff6384';\r\n        backgroundColor = 'rgba(255, 99, 132, 0.2)';\r\n        break;\r\n      case 'blood_pressure_systolic':\r\n      case 'blood_pressure_diastolic':\r\n        borderColor = '#ff9f40';\r\n        backgroundColor = 'rgba(255, 159, 64, 0.2)';\r\n        break;\r\n      case 'blood_sugar':\r\n        borderColor = '#9966ff';\r\n        backgroundColor = 'rgba(153, 102, 255, 0.2)';\r\n        break;\r\n      case 'oxygen_saturation':\r\n        borderColor = '#36a2eb';\r\n        backgroundColor = 'rgba(54, 162, 235, 0.2)';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setChartData({\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: getMetricLabel(selectedMetric),\r\n          data,\r\n          borderColor,\r\n          backgroundColor,\r\n          tension: 0.1,\r\n          fill: true,\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  const getMetricLabel = (metric) => {\r\n    switch (metric) {\r\n      case 'weight':\r\n        return 'Weight (kg)';\r\n      case 'heart_rate':\r\n        return 'Heart Rate (bpm)';\r\n      case 'blood_pressure_systolic':\r\n        return 'Blood Pressure - Systolic (mmHg)';\r\n      case 'blood_pressure_diastolic':\r\n        return 'Blood Pressure - Diastolic (mmHg)';\r\n      case 'blood_sugar':\r\n        return 'Blood Sugar (mg/dL)';\r\n      case 'oxygen_saturation':\r\n        return 'Oxygen Saturation (%)';\r\n      default:\r\n        return metric;\r\n    }\r\n  };\r\n\r\n  const getMetricIcon = (metric) => {\r\n    switch (metric) {\r\n      case 'weight':\r\n        return <FaWeight />;\r\n      case 'heart_rate':\r\n        return <FaHeartbeat />;\r\n      case 'blood_pressure_systolic':\r\n      case 'blood_pressure_diastolic':\r\n        return <FaTint />;\r\n      case 'blood_sugar':\r\n        return <FaTint />;\r\n      case 'oxygen_saturation':\r\n        return <FaLungs />;\r\n      default:\r\n        return <FaChartLine />;\r\n    }\r\n  };\r\n\r\n  const getLatestMetricValue = (metric) => {\r\n    if (healthData.length === 0) return 'N/A';\r\n    \r\n    // Sort by date descending to get the latest\r\n    const sortedData = [...healthData].sort((a, b) => \r\n      new Date(b.recorded_at) - new Date(a.recorded_at)\r\n    );\r\n    \r\n    const latestValue = sortedData[0][metric];\r\n    if (latestValue === undefined || latestValue === null) return 'N/A';\r\n    \r\n    // Format based on metric type\r\n    switch (metric) {\r\n      case 'weight':\r\n        return `${latestValue} kg`;\r\n      case 'heart_rate':\r\n        return `${latestValue} bpm`;\r\n      case 'blood_pressure_systolic':\r\n        const diastolic = sortedData[0]['blood_pressure_diastolic'] || 'N/A';\r\n        return `${latestValue}/${diastolic} mmHg`;\r\n      case 'blood_pressure_diastolic':\r\n        const systolic = sortedData[0]['blood_pressure_systolic'] || 'N/A';\r\n        return `${systolic}/${latestValue} mmHg`;\r\n      case 'blood_sugar':\r\n        return `${latestValue} mg/dL`;\r\n      case 'oxygen_saturation':\r\n        return `${latestValue}%`;\r\n      default:\r\n        return latestValue;\r\n    }\r\n  };\r\n\r\n  const exportToCSV = () => {\r\n    // Create CSV content\r\n    const headers = ['Date', 'Weight (kg)', 'Heart Rate (bpm)', 'Blood Pressure (mmHg)', 'Blood Sugar (mg/dL)', 'Oxygen Saturation (%)'];\r\n    const csvData = healthData.map(item => [\r\n      new Date(item.recorded_at).toLocaleDateString(),\r\n      item.weight || '',\r\n      item.heart_rate || '',\r\n      `${item.blood_pressure_systolic || ''}/${item.blood_pressure_diastolic || ''}`,\r\n      item.blood_sugar || '',\r\n      item.oxygen_saturation ? `${item.oxygen_saturation}%` : ''\r\n    ]);\r\n    \r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...csvData.map(row => row.join(','))\r\n    ].join('\\n');\r\n    \r\n    // Create and download the file\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `health_metrics_${new Date().toISOString().split('T')[0]}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  if (loading && healthData.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h1>\r\n          <FaChartLine className=\"me-2\" /> Health Analytics\r\n        </h1>\r\n        <div>\r\n          <button \r\n            className=\"btn btn-primary me-2\" \r\n            onClick={() => setShowAddForm(!showAddForm)}\r\n          >\r\n            {showAddForm ? <><FaTimes /> Cancel</> : <><FaPlus /> Add New Metrics</>}\r\n          </button>\r\n          {healthData.length > 0 && (\r\n            <button \r\n              className=\"btn btn-success\" \r\n              onClick={exportToCSV}\r\n            >\r\n              Export Data\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Add Health Metrics Form */}\r\n      {showAddForm && (\r\n        <div className=\"card shadow mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h3 className=\"mb-0\">Add New Health Metrics</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <form onSubmit={handleAddMetric}>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"recorded_at\" className=\"form-label\">Date</label>\r\n                  <input \r\n                    type=\"date\" \r\n                    className=\"form-control\" \r\n                    id=\"recorded_at\" \r\n                    name=\"recorded_at\" \r\n                    value={newMetric.recorded_at} \r\n                    onChange={handleInputChange} \r\n                    required \r\n                  />\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"weight\" className=\"form-label\">Weight (kg)</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    step=\"0.1\" \r\n                    className=\"form-control\" \r\n                    id=\"weight\" \r\n                    name=\"weight\" \r\n                    value={newMetric.weight} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"e.g. 70.5\" \r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"heart_rate\" className=\"form-label\">Heart Rate (bpm)</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    className=\"form-control\" \r\n                    id=\"heart_rate\" \r\n                    name=\"heart_rate\" \r\n                    value={newMetric.heart_rate} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"e.g. 72\" \r\n                  />\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"oxygen_saturation\" className=\"form-label\">Oxygen Saturation (%)</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    min=\"0\" \r\n                    max=\"100\" \r\n                    className=\"form-control\" \r\n                    id=\"oxygen_saturation\" \r\n                    name=\"oxygen_saturation\" \r\n                    value={newMetric.oxygen_saturation} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"e.g. 98\" \r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"blood_pressure_systolic\" className=\"form-label\">Blood Pressure - Systolic (mmHg)</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    className=\"form-control\" \r\n                    id=\"blood_pressure_systolic\" \r\n                    name=\"blood_pressure_systolic\" \r\n                    value={newMetric.blood_pressure_systolic} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"e.g. 120\" \r\n                  />\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"blood_pressure_diastolic\" className=\"form-label\">Blood Pressure - Diastolic (mmHg)</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    className=\"form-control\" \r\n                    id=\"blood_pressure_diastolic\" \r\n                    name=\"blood_pressure_diastolic\" \r\n                    value={newMetric.blood_pressure_diastolic} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"e.g. 80\" \r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"blood_sugar\" className=\"form-label\">Blood Sugar (mg/dL)</label>\r\n                <input \r\n                  type=\"number\" \r\n                  className=\"form-control\" \r\n                  id=\"blood_sugar\" \r\n                  name=\"blood_sugar\" \r\n                  value={newMetric.blood_sugar} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"e.g. 100\" \r\n                />\r\n              </div>\r\n              \r\n              <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n                {loading ? 'Saving...' : 'Save Metrics'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {healthData.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No health data available. Please add health metrics to see analytics.\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Health Metrics Summary Cards */}\r\n          <div className=\"row mb-4\">\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card shadow h-100\">\r\n                <div className=\"card-body text-center\">\r\n                  <h5 className=\"card-title\">\r\n                    <FaWeight className=\"me-2\" /> Weight\r\n                  </h5>\r\n                  <h2 className=\"card-text\">{getLatestMetricValue('weight')}</h2>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card shadow h-100\">\r\n                <div className=\"card-body text-center\">\r\n                  <h5 className=\"card-title\">\r\n                    <FaHeartbeat className=\"me-2\" /> Heart Rate\r\n                  </h5>\r\n                  <h2 className=\"card-text\">{getLatestMetricValue('heart_rate')}</h2>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card shadow h-100\">\r\n                <div className=\"card-body text-center\">\r\n                  <h5 className=\"card-title\">\r\n                    <FaTint className=\"me-2\" /> Blood Pressure\r\n                  </h5>\r\n                  <h2 className=\"card-text\">{getLatestMetricValue('blood_pressure_systolic')}</h2>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Chart Controls */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-body\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"metricSelect\" className=\"form-label\">Select Metric</label>\r\n                  <select \r\n                    id=\"metricSelect\" \r\n                    className=\"form-select\" \r\n                    value={selectedMetric} \r\n                    onChange={(e) => setSelectedMetric(e.target.value)}\r\n                  >\r\n                    <option value=\"weight\">Weight</option>\r\n                    <option value=\"heart_rate\">Heart Rate</option>\r\n                    <option value=\"blood_pressure_systolic\">Blood Pressure (Systolic)</option>\r\n                    <option value=\"blood_pressure_diastolic\">Blood Pressure (Diastolic)</option>\r\n                    <option value=\"blood_sugar\">Blood Sugar</option>\r\n                    <option value=\"oxygen_saturation\">Oxygen Saturation</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col-md-6 mb-3\">\r\n                  <label htmlFor=\"timeRangeSelect\" className=\"form-label\">Time Range</label>\r\n                  <select \r\n                    id=\"timeRangeSelect\" \r\n                    className=\"form-select\" \r\n                    value={timeRange} \r\n                    onChange={(e) => setTimeRange(e.target.value)}\r\n                  >\r\n                    <option value=\"1month\">Last Month</option>\r\n                    <option value=\"3months\">Last 3 Months</option>\r\n                    <option value=\"6months\">Last 6 Months</option>\r\n                    <option value=\"1year\">Last Year</option>\r\n                    <option value=\"all\">All Time</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Chart */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"mb-0\">\r\n                {getMetricIcon(selectedMetric)} {getMetricLabel(selectedMetric)} Trend\r\n              </h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {chartData ? (\r\n                <Line \r\n                  data={chartData} \r\n                  options={{\r\n                    responsive: true,\r\n                    plugins: {\r\n                      legend: {\r\n                        position: 'top',\r\n                      },\r\n                      tooltip: {\r\n                        mode: 'index',\r\n                        intersect: false,\r\n                      },\r\n                    },\r\n                    scales: {\r\n                      y: {\r\n                        beginAtZero: false,\r\n                      },\r\n                    },\r\n                  }} \r\n                />\r\n              ) : (\r\n                <p className=\"text-center\">No data available for the selected metric and time range.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Health Insights */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"mb-0\">Health Insights</h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <p>\r\n                This dashboard provides a visual representation of your health metrics over time.\r\n                Track your progress and identify trends to better manage your health.\r\n              </p>\r\n              <p>\r\n                For personalized health advice, please consult with your healthcare provider.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthAnalyticsPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaCalendarCheck, FaPlus, FaTrash, FaEdit, FaClock, FaMapMarkerAlt, FaUserMd } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst UpcomingAppointmentsPage = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentAppointment, setCurrentAppointment] = useState({\r\n    id: null,\r\n    doctor_name: '',\r\n    specialty: '',\r\n    date: '',\r\n    time: '',\r\n    location: '',\r\n    notes: '',\r\n    reminder_set: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchAppointments();\r\n  }, []);\r\n\r\n  const fetchAppointments = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const today = new Date().toISOString().split('T')[0];\r\n      \r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .gte('date', today)\r\n        .order('date', { ascending: true });\r\n        \r\n      if (error) throw error;\r\n      setAppointments(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching appointments:', error);\r\n      setNotification({ message: 'Error fetching appointments.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setCurrentAppointment(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      if (isEditing) {\r\n        // Update existing appointment\r\n        const { error } = await supabase\r\n          .from('appointments')\r\n          .update({\r\n            doctor_name: currentAppointment.doctor_name,\r\n            specialty: currentAppointment.specialty,\r\n            date: currentAppointment.date,\r\n            time: currentAppointment.time,\r\n            location: currentAppointment.location,\r\n            notes: currentAppointment.notes,\r\n            reminder_set: currentAppointment.reminder_set\r\n          })\r\n          .eq('id', currentAppointment.id);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Appointment updated successfully!', type: 'success' });\r\n      } else {\r\n        // Add new appointment\r\n        const { error } = await supabase\r\n          .from('appointments')\r\n          .insert([{\r\n            doctor_name: currentAppointment.doctor_name,\r\n            specialty: currentAppointment.specialty,\r\n            date: currentAppointment.date,\r\n            time: currentAppointment.time,\r\n            location: currentAppointment.location,\r\n            notes: currentAppointment.notes,\r\n            reminder_set: currentAppointment.reminder_set,\r\n            user_id: user.id\r\n          }]);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Appointment added successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Reset form and fetch updated appointments\r\n      resetForm();\r\n      fetchAppointments();\r\n    } catch (error) {\r\n      console.error('Error saving appointment:', error);\r\n      setNotification({ message: 'Error saving appointment.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (appointment) => {\r\n    setIsEditing(true);\r\n    setCurrentAppointment(appointment);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this appointment?')) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('appointments')\r\n        .delete()\r\n        .eq('id', id);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setAppointments(appointments.filter(appointment => appointment.id !== id));\r\n      setNotification({ message: 'Appointment deleted successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error deleting appointment:', error);\r\n      setNotification({ message: 'Error deleting appointment.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsEditing(false);\r\n    setCurrentAppointment({\r\n      id: null,\r\n      doctor_name: '',\r\n      specialty: '',\r\n      date: '',\r\n      time: '',\r\n      location: '',\r\n      notes: '',\r\n      reminder_set: false\r\n    });\r\n  };\r\n\r\n  // Check if an appointment is today\r\n  const isToday = (dateString) => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    return dateString === today;\r\n  };\r\n\r\n  // Check if an appointment is within the next 3 days\r\n  const isUpcoming = (dateString) => {\r\n    const today = new Date();\r\n    const appointmentDate = new Date(dateString);\r\n    const diffTime = appointmentDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    return diffDays > 0 && diffDays <= 3;\r\n  };\r\n\r\n  if (loading && appointments.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaCalendarCheck className=\"me-2\" /> Upcoming Appointments\r\n      </h1>\r\n      \r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <h3>{isEditing ? 'Edit Appointment' : 'Schedule New Appointment'}</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"doctor_name\" className=\"form-label\">Doctor Name</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"doctor_name\" \r\n                name=\"doctor_name\" \r\n                value={currentAppointment.doctor_name} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"specialty\" className=\"form-label\">Specialty</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"specialty\" \r\n                name=\"specialty\" \r\n                value={currentAppointment.specialty} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"date\" className=\"form-label\">Date</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"date\" \r\n                name=\"date\" \r\n                value={currentAppointment.date} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"time\" className=\"form-label\">Time</label>\r\n              <input \r\n                type=\"time\" \r\n                className=\"form-control\" \r\n                id=\"time\" \r\n                name=\"time\" \r\n                value={currentAppointment.time} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"location\" className=\"form-label\">Location</label>\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\" \r\n              id=\"location\" \r\n              name=\"location\" \r\n              value={currentAppointment.location} \r\n              onChange={handleChange} \r\n              required \r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"notes\" className=\"form-label\">Notes</label>\r\n            <textarea \r\n              className=\"form-control\" \r\n              id=\"notes\" \r\n              name=\"notes\" \r\n              rows=\"3\" \r\n              value={currentAppointment.notes} \r\n              onChange={handleChange}\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div className=\"mb-3 form-check\">\r\n            <input \r\n              type=\"checkbox\" \r\n              className=\"form-check-input\" \r\n              id=\"reminder_set\" \r\n              name=\"reminder_set\" \r\n              checked={currentAppointment.reminder_set} \r\n              onChange={handleChange} \r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"reminder_set\">Set Reminder</label>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              {isEditing ? <><FaEdit className=\"me-2\" /> Update Appointment</> : <><FaPlus className=\"me-2\" /> Schedule Appointment</>}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      {/* Today's Appointments Section */}\r\n      {appointments.some(app => isToday(app.date)) && (\r\n        <div className=\"card shadow mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h3 className=\"mb-0\"><FaClock className=\"me-2\" /> Today's Appointments</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              {appointments\r\n                .filter(app => isToday(app.date))\r\n                .map(appointment => (\r\n                  <div key={`today-${appointment.id}`} className=\"col-md-6 mb-3\">\r\n                    <div className=\"card h-100 border-primary\">\r\n                      <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">{appointment.doctor_name}</h5>\r\n                        <h6 className=\"card-subtitle mb-2 text-muted\">{appointment.specialty}</h6>\r\n                        <p className=\"card-text\">\r\n                          <FaClock className=\"me-2\" /> {appointment.time}<br />\r\n                          <FaMapMarkerAlt className=\"me-2\" /> {appointment.location}\r\n                        </p>\r\n                        {appointment.notes && <p className=\"card-text\">{appointment.notes}</p>}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <h2 className=\"text-center mb-3\">All Upcoming Appointments</h2>\r\n      \r\n      {appointments.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No upcoming appointments. Schedule your first appointment above.\r\n        </div>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {appointments.map((appointment) => (\r\n            <div key={appointment.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n              <div className={`card h-100 shadow ${isToday(appointment.date) ? 'border-primary' : isUpcoming(appointment.date) ? 'border-warning' : ''}`}>\r\n                <div className=\"card-header d-flex justify-content-between align-items-center\">\r\n                  <h5 className=\"mb-0\">\r\n                    <FaUserMd className=\"me-2\" /> {appointment.doctor_name}\r\n                  </h5>\r\n                  {isToday(appointment.date) && (\r\n                    <span className=\"badge bg-primary\">Today</span>\r\n                  )}\r\n                  {isUpcoming(appointment.date) && !isToday(appointment.date) && (\r\n                    <span className=\"badge bg-warning text-dark\">Soon</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  {appointment.specialty && (\r\n                    <p className=\"card-text\"><strong>Specialty:</strong> {appointment.specialty}</p>\r\n                  )}\r\n                  <p className=\"card-text\">\r\n                    <FaCalendarCheck className=\"me-2\" /> {new Date(appointment.date).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <FaClock className=\"me-2\" /> {appointment.time}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <FaMapMarkerAlt className=\"me-2\" /> {appointment.location}\r\n                  </p>\r\n                  {appointment.notes && (\r\n                    <p className=\"card-text\">\r\n                      <strong>Notes:</strong><br />\r\n                      {appointment.notes}\r\n                    </p>\r\n                  )}\r\n                  {appointment.reminder_set && (\r\n                    <p className=\"card-text\">\r\n                      <span className=\"badge bg-info text-dark\">Reminder Set</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-footer d-flex justify-content-between\">\r\n                  <button \r\n                    className=\"btn btn-sm btn-primary\" \r\n                    onClick={() => handleEdit(appointment)}\r\n                  >\r\n                    <FaEdit className=\"me-1\" /> Edit\r\n                  </button>\r\n                  <button \r\n                    className=\"btn btn-sm btn-danger\" \r\n                    onClick={() => handleDelete(appointment.id)}\r\n                  >\r\n                    <FaTrash className=\"me-1\" /> Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpcomingAppointmentsPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaHistory, FaSearch, FaFileDownload, FaUserMd, FaCalendarAlt, FaMapMarkerAlt, FaClock } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst AppointmentHistoryPage = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterDate, setFilterDate] = useState('');\r\n  const [filterDoctor, setFilterDoctor] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n\r\n  useEffect(() => {\r\n    fetchAppointmentHistory();\r\n  }, []);\r\n\r\n  const fetchAppointmentHistory = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const today = new Date().toISOString().split('T')[0];\r\n      \r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .lt('date', today)\r\n        .order('date', { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setAppointments(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching appointment history:', error);\r\n      setNotification({ message: 'Error fetching appointment history.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleFilterDate = (e) => {\r\n    setFilterDate(e.target.value);\r\n  };\r\n\r\n  const handleFilterDoctor = (e) => {\r\n    setFilterDoctor(e.target.value);\r\n  };\r\n\r\n  const handleSortChange = () => {\r\n    setSortOrder(sortOrder === 'desc' ? 'asc' : 'desc');\r\n  };\r\n\r\n  const exportToCsv = () => {\r\n    const headers = ['Doctor', 'Specialty', 'Date', 'Time', 'Location', 'Notes'];\r\n    const csvData = filteredAppointments.map(app => [\r\n      app.doctor_name,\r\n      app.specialty,\r\n      new Date(app.date).toLocaleDateString(),\r\n      app.time,\r\n      app.location,\r\n      app.notes\r\n    ]);\r\n    \r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...csvData.map(row => row.map(cell => `\"${cell || ''}\"`).join(','))\r\n    ].join('\\n');\r\n    \r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `appointment_history_${new Date().toISOString().split('T')[0]}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  // Filter and sort appointments based on search term, filters, and sort order\r\n  const filteredAppointments = appointments\r\n    .filter(app => {\r\n      const matchesSearch = searchTerm === '' || \r\n        app.doctor_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (app.specialty && app.specialty.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (app.location && app.location.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (app.notes && app.notes.toLowerCase().includes(searchTerm.toLowerCase()));\r\n      \r\n      const matchesDate = filterDate === '' || app.date === filterDate;\r\n      \r\n      const matchesDoctor = filterDoctor === '' || \r\n        app.doctor_name.toLowerCase().includes(filterDoctor.toLowerCase());\r\n      \r\n      return matchesSearch && matchesDate && matchesDoctor;\r\n    })\r\n    .sort((a, b) => {\r\n      const dateA = new Date(a.date);\r\n      const dateB = new Date(b.date);\r\n      return sortOrder === 'desc' ? dateB - dateA : dateA - dateB;\r\n    });\r\n\r\n  if (loading && appointments.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaHistory className=\"me-2\" /> Appointment History\r\n      </h1>\r\n      \r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-body\">\r\n          <div className=\"row mb-3\">\r\n            <div className=\"col-md-6 mb-2\">\r\n              <div className=\"input-group\">\r\n                <span className=\"input-group-text\"><FaSearch /></span>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\" \r\n                  placeholder=\"Search appointments...\" \r\n                  value={searchTerm} \r\n                  onChange={handleSearch} \r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 mb-2\">\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                placeholder=\"Filter by date\" \r\n                value={filterDate} \r\n                onChange={handleFilterDate} \r\n              />\r\n            </div>\r\n            <div className=\"col-md-3 mb-2\">\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                placeholder=\"Filter by doctor\" \r\n                value={filterDoctor} \r\n                onChange={handleFilterDoctor} \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <button \r\n              className=\"btn btn-outline-secondary\" \r\n              onClick={handleSortChange}\r\n            >\r\n              Sort by Date: {sortOrder === 'desc' ? 'Newest First' : 'Oldest First'}\r\n            </button>\r\n            \r\n            <button \r\n              className=\"btn btn-success\" \r\n              onClick={exportToCsv}\r\n              disabled={filteredAppointments.length === 0}\r\n            >\r\n              <FaFileDownload className=\"me-2\" /> Export to CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {appointments.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No appointment history found.\r\n        </div>\r\n      ) : filteredAppointments.length === 0 ? (\r\n        <div className=\"alert alert-warning text-center\">\r\n          No appointments match your search criteria.\r\n        </div>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {filteredAppointments.map((appointment) => (\r\n            <div key={appointment.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n              <div className=\"card h-100 shadow\">\r\n                <div className=\"card-header\">\r\n                  <h5 className=\"mb-0\">\r\n                    <FaUserMd className=\"me-2\" /> {appointment.doctor_name}\r\n                  </h5>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  {appointment.specialty && (\r\n                    <p className=\"card-text\"><strong>Specialty:</strong> {appointment.specialty}</p>\r\n                  )}\r\n                  <p className=\"card-text\">\r\n                    <FaCalendarAlt className=\"me-2\" /> {new Date(appointment.date).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <FaClock className=\"me-2\" /> {appointment.time}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <FaMapMarkerAlt className=\"me-2\" /> {appointment.location}\r\n                  </p>\r\n                  {appointment.notes && (\r\n                    <p className=\"card-text\">\r\n                      <strong>Notes:</strong><br />\r\n                      {appointment.notes}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppointmentHistoryPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaPhone, FaVideo, FaPlus, FaTrash, FaEdit, FaClock, FaUserMd, FaLink } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst TelehealthConsultationsPage = () => {\r\n  const [consultations, setConsultations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentConsultation, setCurrentConsultation] = useState({\r\n    id: null,\r\n    doctor_name: '',\r\n    specialty: '',\r\n    date: '',\r\n    time: '',\r\n    consultation_type: 'video',\r\n    meeting_link: '',\r\n    notes: '',\r\n    reminder_set: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchConsultations();\r\n  }, []);\r\n\r\n  const fetchConsultations = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('telehealth_consultations')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('date', { ascending: true });\r\n        \r\n      if (error) throw error;\r\n      setConsultations(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching consultations:', error);\r\n      setNotification({ message: 'Error fetching consultations.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setCurrentConsultation(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      if (isEditing) {\r\n        // Update existing consultation\r\n        const { error } = await supabase\r\n          .from('telehealth_consultations')\r\n          .update({\r\n            doctor_name: currentConsultation.doctor_name,\r\n            specialty: currentConsultation.specialty,\r\n            date: currentConsultation.date,\r\n            time: currentConsultation.time,\r\n            consultation_type: currentConsultation.consultation_type,\r\n            meeting_link: currentConsultation.meeting_link,\r\n            notes: currentConsultation.notes,\r\n            reminder_set: currentConsultation.reminder_set\r\n          })\r\n          .eq('id', currentConsultation.id);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Consultation updated successfully!', type: 'success' });\r\n      } else {\r\n        // Add new consultation\r\n        const { error } = await supabase\r\n          .from('telehealth_consultations')\r\n          .insert([{\r\n            doctor_name: currentConsultation.doctor_name,\r\n            specialty: currentConsultation.specialty,\r\n            date: currentConsultation.date,\r\n            time: currentConsultation.time,\r\n            consultation_type: currentConsultation.consultation_type,\r\n            meeting_link: currentConsultation.meeting_link,\r\n            notes: currentConsultation.notes,\r\n            reminder_set: currentConsultation.reminder_set,\r\n            user_id: user.id\r\n          }]);\r\n          \r\n        if (error) throw error;\r\n        setNotification({ message: 'Consultation added successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Reset form and fetch updated consultations\r\n      resetForm();\r\n      fetchConsultations();\r\n    } catch (error) {\r\n      console.error('Error saving consultation:', error);\r\n      setNotification({ message: 'Error saving consultation.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (consultation) => {\r\n    setIsEditing(true);\r\n    setCurrentConsultation(consultation);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this consultation?')) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('telehealth_consultations')\r\n        .delete()\r\n        .eq('id', id);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setConsultations(consultations.filter(consultation => consultation.id !== id));\r\n      setNotification({ message: 'Consultation deleted successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error deleting consultation:', error);\r\n      setNotification({ message: 'Error deleting consultation.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsEditing(false);\r\n    setCurrentConsultation({\r\n      id: null,\r\n      doctor_name: '',\r\n      specialty: '',\r\n      date: '',\r\n      time: '',\r\n      consultation_type: 'video',\r\n      meeting_link: '',\r\n      notes: '',\r\n      reminder_set: false\r\n    });\r\n  };\r\n\r\n  // Check if a consultation is today\r\n  const isToday = (dateString) => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    return dateString === today;\r\n  };\r\n\r\n  // Check if a consultation is in the past\r\n  const isPast = (dateString) => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    return dateString < today;\r\n  };\r\n\r\n  // Check if a consultation is upcoming (within the next 3 days)\r\n  const isUpcoming = (dateString) => {\r\n    const today = new Date();\r\n    const consultationDate = new Date(dateString);\r\n    const diffTime = consultationDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    return diffDays > 0 && diffDays <= 3;\r\n  };\r\n\r\n  // Filter consultations by upcoming and past\r\n  const upcomingConsultations = consultations.filter(consultation => !isPast(consultation.date));\r\n  const pastConsultations = consultations.filter(consultation => isPast(consultation.date));\r\n\r\n  if (loading && consultations.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaVideo className=\"me-2\" /> Telehealth Consultations\r\n      </h1>\r\n      \r\n      <div className=\"card shadow-lg p-4 mb-4\">\r\n        <h3>{isEditing ? 'Edit Consultation' : 'Schedule New Consultation'}</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"doctor_name\" className=\"form-label\">Doctor Name</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"doctor_name\" \r\n                name=\"doctor_name\" \r\n                value={currentConsultation.doctor_name} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"specialty\" className=\"form-label\">Specialty</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"specialty\" \r\n                name=\"specialty\" \r\n                value={currentConsultation.specialty} \r\n                onChange={handleChange} \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"date\" className=\"form-label\">Date</label>\r\n              <input \r\n                type=\"date\" \r\n                className=\"form-control\" \r\n                id=\"date\" \r\n                name=\"date\" \r\n                value={currentConsultation.date} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"time\" className=\"form-label\">Time</label>\r\n              <input \r\n                type=\"time\" \r\n                className=\"form-control\" \r\n                id=\"time\" \r\n                name=\"time\" \r\n                value={currentConsultation.time} \r\n                onChange={handleChange} \r\n                required \r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"consultation_type\" className=\"form-label\">Consultation Type</label>\r\n              <select \r\n                className=\"form-control\" \r\n                id=\"consultation_type\" \r\n                name=\"consultation_type\" \r\n                value={currentConsultation.consultation_type} \r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"video\">Video Call</option>\r\n                <option value=\"phone\">Phone Call</option>\r\n                <option value=\"chat\">Chat</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"meeting_link\" className=\"form-label\">Meeting Link/Phone Number</label>\r\n              <input \r\n                type=\"text\" \r\n                className=\"form-control\" \r\n                id=\"meeting_link\" \r\n                name=\"meeting_link\" \r\n                value={currentConsultation.meeting_link} \r\n                onChange={handleChange} \r\n                placeholder=\"Enter meeting link or phone number\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"notes\" className=\"form-label\">Notes</label>\r\n            <textarea \r\n              className=\"form-control\" \r\n              id=\"notes\" \r\n              name=\"notes\" \r\n              rows=\"3\" \r\n              value={currentConsultation.notes} \r\n              onChange={handleChange}\r\n              placeholder=\"Reason for consultation, questions to ask, etc.\"\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div className=\"mb-3 form-check\">\r\n            <input \r\n              type=\"checkbox\" \r\n              className=\"form-check-input\" \r\n              id=\"reminder_set\" \r\n              name=\"reminder_set\" \r\n              checked={currentConsultation.reminder_set} \r\n              onChange={handleChange} \r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"reminder_set\">Set Reminder</label>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              {isEditing ? <><FaEdit className=\"me-2\" /> Update Consultation</> : <><FaPlus className=\"me-2\" /> Schedule Consultation</>}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      {/* Today's Consultations Section */}\r\n      {consultations.some(cons => isToday(cons.date)) && (\r\n        <div className=\"card shadow mb-4\">\r\n          <div className=\"card-header bg-primary text-white\">\r\n            <h3 className=\"mb-0\"><FaClock className=\"me-2\" /> Today's Consultations</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              {consultations\r\n                .filter(cons => isToday(cons.date))\r\n                .map(consultation => (\r\n                  <div key={`today-${consultation.id}`} className=\"col-md-6 mb-3\">\r\n                    <div className=\"card h-100 border-primary\">\r\n                      <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">{consultation.doctor_name}</h5>\r\n                        <h6 className=\"card-subtitle mb-2 text-muted\">{consultation.specialty}</h6>\r\n                        <p className=\"card-text\">\r\n                          <FaClock className=\"me-2\" /> {consultation.time}<br />\r\n                          {consultation.consultation_type === 'video' ? (\r\n                            <><FaVideo className=\"me-2\" /> Video Call</>\r\n                          ) : consultation.consultation_type === 'phone' ? (\r\n                            <><FaPhone className=\"me-2\" /> Phone Call</>\r\n                          ) : (\r\n                            <><FaLink className=\"me-2\" /> Chat</>\r\n                          )}\r\n                        </p>\r\n                        {consultation.meeting_link && (\r\n                          <p className=\"card-text\">\r\n                            <a href={consultation.consultation_type === 'video' ? consultation.meeting_link : `tel:${consultation.meeting_link}`} \r\n                               target=\"_blank\" \r\n                               rel=\"noopener noreferrer\" \r\n                               className=\"btn btn-sm btn-success\">\r\n                              {consultation.consultation_type === 'video' ? 'Join Meeting' : 'Call Now'}\r\n                            </a>\r\n                          </p>\r\n                        )}\r\n                        {consultation.notes && <p className=\"card-text\"><small>{consultation.notes}</small></p>}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <h2 className=\"text-center mb-3\">Upcoming Consultations</h2>\r\n      \r\n      {upcomingConsultations.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No upcoming consultations. Schedule your first consultation above.\r\n        </div>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {upcomingConsultations.map((consultation) => (\r\n            <div key={consultation.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n              <div className={`card h-100 shadow ${isToday(consultation.date) ? 'border-primary' : isUpcoming(consultation.date) ? 'border-warning' : ''}`}>\r\n                <div className=\"card-header d-flex justify-content-between align-items-center\">\r\n                  <h5 className=\"mb-0\">\r\n                    <FaUserMd className=\"me-2\" /> {consultation.doctor_name}\r\n                  </h5>\r\n                  {isToday(consultation.date) && (\r\n                    <span className=\"badge bg-primary\">Today</span>\r\n                  )}\r\n                  {isUpcoming(consultation.date) && !isToday(consultation.date) && (\r\n                    <span className=\"badge bg-warning text-dark\">Soon</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  {consultation.specialty && (\r\n                    <p className=\"card-text\"><strong>Specialty:</strong> {consultation.specialty}</p>\r\n                  )}\r\n                  <p className=\"card-text\">\r\n                    <strong>Date:</strong> {new Date(consultation.date).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <strong>Time:</strong> {consultation.time}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <strong>Type:</strong> {consultation.consultation_type === 'video' ? 'Video Call' : \r\n                                          consultation.consultation_type === 'phone' ? 'Phone Call' : 'Chat'}\r\n                  </p>\r\n                  {consultation.meeting_link && (\r\n                    <p className=\"card-text\">\r\n                      <strong>Link/Number:</strong> {consultation.meeting_link}\r\n                    </p>\r\n                  )}\r\n                  {consultation.notes && (\r\n                    <p className=\"card-text\">\r\n                      <strong>Notes:</strong><br />\r\n                      {consultation.notes}\r\n                    </p>\r\n                  )}\r\n                  {consultation.reminder_set && (\r\n                    <p className=\"card-text\">\r\n                      <span className=\"badge bg-info text-dark\">Reminder Set</span>\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-footer d-flex justify-content-between\">\r\n                  <button \r\n                    className=\"btn btn-sm btn-primary\" \r\n                    onClick={() => handleEdit(consultation)}\r\n                  >\r\n                    <FaEdit className=\"me-1\" /> Edit\r\n                  </button>\r\n                  <button \r\n                    className=\"btn btn-sm btn-danger\" \r\n                    onClick={() => handleDelete(consultation.id)}\r\n                  >\r\n                    <FaTrash className=\"me-1\" /> Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      \r\n      {pastConsultations.length > 0 && (\r\n        <>\r\n          <h2 className=\"text-center mb-3 mt-5\">Past Consultations</h2>\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Doctor</th>\r\n                  <th>Specialty</th>\r\n                  <th>Date</th>\r\n                  <th>Time</th>\r\n                  <th>Type</th>\r\n                  <th>Notes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {pastConsultations.map((consultation) => (\r\n                  <tr key={`past-${consultation.id}`}>\r\n                    <td>{consultation.doctor_name}</td>\r\n                    <td>{consultation.specialty}</td>\r\n                    <td>{new Date(consultation.date).toLocaleDateString()}</td>\r\n                    <td>{consultation.time}</td>\r\n                    <td>\r\n                      {consultation.consultation_type === 'video' ? (\r\n                        <><FaVideo className=\"me-1\" /> Video</>\r\n                      ) : consultation.consultation_type === 'phone' ? (\r\n                        <><FaPhone className=\"me-1\" /> Phone</>\r\n                      ) : (\r\n                        <><FaLink className=\"me-1\" /> Chat</>\r\n                      )}\r\n                    </td>\r\n                    <td>{consultation.notes}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TelehealthConsultationsPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaClock, FaBell, FaToggleOn, FaToggleOff, FaCalendarAlt, FaUserMd, FaTrash } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst AppointmentRemindersPage = () => {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [reminders, setReminders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [reminderSettings, setReminderSettings] = useState({\r\n    email_reminders: true,\r\n    sms_reminders: false,\r\n    browser_notifications: true,\r\n    reminder_time: '24', // hours before appointment\r\n    phone_number: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      // Fetch upcoming appointments\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const { data: appointmentsData, error: appointmentsError } = await supabase\r\n        .from('appointments')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .gte('date', today)\r\n        .order('date', { ascending: true });\r\n        \r\n      if (appointmentsError) throw appointmentsError;\r\n      \r\n      // Fetch telehealth consultations\r\n      const { data: telehealthData, error: telehealthError } = await supabase\r\n        .from('telehealth_consultations')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .gte('date', today)\r\n        .order('date', { ascending: true });\r\n        \r\n      if (telehealthError) throw telehealthError;\r\n      \r\n      // Combine and format appointments and telehealth consultations\r\n      const allAppointments = [\r\n        ...(appointmentsData || []).map(app => ({\r\n          ...app,\r\n          type: 'appointment'\r\n        })),\r\n        ...(telehealthData || []).map(tel => ({\r\n          ...tel,\r\n          type: 'telehealth',\r\n          doctor_name: tel.doctor_name\r\n        }))\r\n      ].sort((a, b) => {\r\n        // Sort by date and time\r\n        const dateA = new Date(`${a.date}T${a.time}`);\r\n        const dateB = new Date(`${b.date}T${b.time}`);\r\n        return dateA - dateB;\r\n      });\r\n      \r\n      setAppointments(allAppointments);\r\n      \r\n      // Fetch user reminder settings\r\n      const { data: settingsData, error: settingsError } = await supabase\r\n        .from('reminder_settings')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .single();\r\n        \r\n      if (settingsError && settingsError.code !== 'PGRST116') { // PGRST116 is \"no rows returned\" error\r\n        throw settingsError;\r\n      }\r\n      \r\n      if (settingsData) {\r\n        setReminderSettings(settingsData);\r\n      }\r\n      \r\n      // Fetch active reminders\r\n      const { data: remindersData, error: remindersError } = await supabase\r\n        .from('reminders')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .gte('reminder_time', new Date().toISOString())\r\n        .order('reminder_time', { ascending: true });\r\n        \r\n      if (remindersError) throw remindersError;\r\n      setReminders(remindersData || []);\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      setNotification({ message: 'Error fetching data.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSettingsChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setReminderSettings(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  const saveReminderSettings = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { error } = await supabase\r\n        .from('reminder_settings')\r\n        .upsert({\r\n          ...reminderSettings,\r\n          user_id: user.id\r\n        });\r\n        \r\n      if (error) throw error;\r\n      setNotification({ message: 'Reminder settings saved successfully!', type: 'success' });\r\n    } catch (error) {\r\n      console.error('Error saving reminder settings:', error);\r\n      setNotification({ message: 'Error saving reminder settings.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleReminder = async (appointment) => {\r\n    try {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      // Check if the appointment already has a reminder\r\n      const hasReminder = appointment.reminder_set;\r\n      \r\n      if (hasReminder) {\r\n        // Remove reminder\r\n        if (appointment.type === 'appointment') {\r\n          const { error } = await supabase\r\n            .from('appointments')\r\n            .update({ reminder_set: false })\r\n            .eq('id', appointment.id);\r\n            \r\n          if (error) throw error;\r\n        } else {\r\n          const { error } = await supabase\r\n            .from('telehealth_consultations')\r\n            .update({ reminder_set: false })\r\n            .eq('id', appointment.id);\r\n            \r\n          if (error) throw error;\r\n        }\r\n        \r\n        // Delete any existing reminders for this appointment\r\n        const { error: deleteError } = await supabase\r\n          .from('reminders')\r\n          .delete()\r\n          .eq('appointment_id', appointment.id)\r\n          .eq('appointment_type', appointment.type);\r\n          \r\n        if (deleteError) throw deleteError;\r\n        \r\n        setNotification({ message: 'Reminder removed successfully!', type: 'success' });\r\n      } else {\r\n        // Add reminder\r\n        const appointmentDate = new Date(`${appointment.date}T${appointment.time}`);\r\n        const reminderHours = parseInt(reminderSettings.reminder_time, 10);\r\n        const reminderTime = new Date(appointmentDate.getTime() - (reminderHours * 60 * 60 * 1000));\r\n        \r\n        // Update appointment to set reminder flag\r\n        if (appointment.type === 'appointment') {\r\n          const { error } = await supabase\r\n            .from('appointments')\r\n            .update({ reminder_set: true })\r\n            .eq('id', appointment.id);\r\n            \r\n          if (error) throw error;\r\n        } else {\r\n          const { error } = await supabase\r\n            .from('telehealth_consultations')\r\n            .update({ reminder_set: true })\r\n            .eq('id', appointment.id);\r\n            \r\n          if (error) throw error;\r\n        }\r\n        \r\n        // Create reminder record\r\n        const { error: reminderError } = await supabase\r\n          .from('reminders')\r\n          .insert([{\r\n            user_id: user.id,\r\n            appointment_id: appointment.id,\r\n            appointment_type: appointment.type,\r\n            reminder_time: reminderTime.toISOString(),\r\n            appointment_time: appointmentDate.toISOString(),\r\n            doctor_name: appointment.doctor_name,\r\n            location: appointment.location || '',\r\n            sent: false\r\n          }]);\r\n          \r\n        if (reminderError) throw reminderError;\r\n        \r\n        setNotification({ message: 'Reminder set successfully!', type: 'success' });\r\n      }\r\n      \r\n      // Refresh data\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Error toggling reminder:', error);\r\n      setNotification({ message: 'Error toggling reminder.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteReminder = async (reminderId) => {\r\n    if (!window.confirm('Are you sure you want to delete this reminder?')) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Get the reminder to find the associated appointment\r\n      const { data: reminderData, error: fetchError } = await supabase\r\n        .from('reminders')\r\n        .select('*')\r\n        .eq('id', reminderId)\r\n        .single();\r\n        \r\n      if (fetchError) throw fetchError;\r\n      \r\n      // Update the appointment to remove the reminder flag\r\n      if (reminderData.appointment_type === 'appointment') {\r\n        const { error } = await supabase\r\n          .from('appointments')\r\n          .update({ reminder_set: false })\r\n          .eq('id', reminderData.appointment_id);\r\n          \r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('telehealth_consultations')\r\n          .update({ reminder_set: false })\r\n          .eq('id', reminderData.appointment_id);\r\n          \r\n        if (error) throw error;\r\n      }\r\n      \r\n      // Delete the reminder\r\n      const { error: deleteError } = await supabase\r\n        .from('reminders')\r\n        .delete()\r\n        .eq('id', reminderId);\r\n        \r\n      if (deleteError) throw deleteError;\r\n      \r\n      setNotification({ message: 'Reminder deleted successfully!', type: 'success' });\r\n      \r\n      // Refresh data\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Error deleting reminder:', error);\r\n      setNotification({ message: 'Error deleting reminder.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Format date and time for display\r\n  const formatDateTime = (date, time) => {\r\n    const dateObj = new Date(`${date}T${time}`);\r\n    return dateObj.toLocaleString();\r\n  };\r\n\r\n  // Check if an appointment is today\r\n  const isToday = (dateString) => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    return dateString === today;\r\n  };\r\n\r\n  // Check if an appointment is within the next 3 days\r\n  const isUpcoming = (dateString) => {\r\n    const today = new Date();\r\n    const appointmentDate = new Date(dateString);\r\n    const diffTime = appointmentDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    return diffDays > 0 && diffDays <= 3;\r\n  };\r\n\r\n  if (loading && appointments.length === 0 && reminders.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaBell className=\"me-2\" /> Appointment Reminders\r\n      </h1>\r\n      \r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"mb-0\">Reminder Settings</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <div className=\"form-check form-switch\">\r\n                <input \r\n                  className=\"form-check-input\" \r\n                  type=\"checkbox\" \r\n                  id=\"email_reminders\" \r\n                  name=\"email_reminders\" \r\n                  checked={reminderSettings.email_reminders} \r\n                  onChange={handleSettingsChange} \r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"email_reminders\">\r\n                  Email Reminders\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <div className=\"form-check form-switch\">\r\n                <input \r\n                  className=\"form-check-input\" \r\n                  type=\"checkbox\" \r\n                  id=\"browser_notifications\" \r\n                  name=\"browser_notifications\" \r\n                  checked={reminderSettings.browser_notifications} \r\n                  onChange={handleSettingsChange} \r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"browser_notifications\">\r\n                  Browser Notifications\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <div className=\"form-check form-switch\">\r\n                <input \r\n                  className=\"form-check-input\" \r\n                  type=\"checkbox\" \r\n                  id=\"sms_reminders\" \r\n                  name=\"sms_reminders\" \r\n                  checked={reminderSettings.sms_reminders} \r\n                  onChange={handleSettingsChange} \r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"sms_reminders\">\r\n                  SMS Reminders\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"phone_number\" className=\"form-label\">Phone Number (for SMS)</label>\r\n              <input \r\n                type=\"tel\" \r\n                className=\"form-control\" \r\n                id=\"phone_number\" \r\n                name=\"phone_number\" \r\n                value={reminderSettings.phone_number} \r\n                onChange={handleSettingsChange} \r\n                placeholder=\"Enter your phone number\"\r\n                disabled={!reminderSettings.sms_reminders}\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 mb-3\">\r\n              <label htmlFor=\"reminder_time\" className=\"form-label\">Send Reminders</label>\r\n              <select \r\n                className=\"form-select\" \r\n                id=\"reminder_time\" \r\n                name=\"reminder_time\" \r\n                value={reminderSettings.reminder_time} \r\n                onChange={handleSettingsChange}\r\n              >\r\n                <option value=\"1\">1 hour before</option>\r\n                <option value=\"2\">2 hours before</option>\r\n                <option value=\"6\">6 hours before</option>\r\n                <option value=\"12\">12 hours before</option>\r\n                <option value=\"24\">24 hours before</option>\r\n                <option value=\"48\">2 days before</option>\r\n                <option value=\"72\">3 days before</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col-md-6 mb-3 d-flex align-items-end\">\r\n              <button \r\n                className=\"btn btn-primary w-100\" \r\n                onClick={saveReminderSettings}\r\n                disabled={loading}\r\n              >\r\n                Save Settings\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <h2 className=\"text-center mb-3\">Active Reminders</h2>\r\n      \r\n      {reminders.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No active reminders. Set reminders for your appointments below.\r\n        </div>\r\n      ) : (\r\n        <div className=\"table-responsive mb-4\">\r\n          <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Appointment</th>\r\n                <th>Doctor</th>\r\n                <th>Appointment Time</th>\r\n                <th>Reminder Time</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {reminders.map((reminder) => (\r\n                <tr key={reminder.id}>\r\n                  <td>{reminder.appointment_type === 'telehealth' ? 'Telehealth' : 'In-person'}</td>\r\n                  <td>{reminder.doctor_name}</td>\r\n                  <td>{new Date(reminder.appointment_time).toLocaleString()}</td>\r\n                  <td>{new Date(reminder.reminder_time).toLocaleString()}</td>\r\n                  <td>\r\n                    <button \r\n                      className=\"btn btn-sm btn-danger\" \r\n                      onClick={() => deleteReminder(reminder.id)}\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      \r\n      <h2 className=\"text-center mb-3\">Upcoming Appointments</h2>\r\n      \r\n      {appointments.length === 0 ? (\r\n        <div className=\"alert alert-info text-center\">\r\n          No upcoming appointments found. Schedule appointments to set reminders.\r\n        </div>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {appointments.map((appointment) => (\r\n            <div key={appointment.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n              <div className={`card h-100 shadow ${isToday(appointment.date) ? 'border-primary' : isUpcoming(appointment.date) ? 'border-warning' : ''}`}>\r\n                <div className=\"card-header d-flex justify-content-between align-items-center\">\r\n                  <h5 className=\"mb-0\">\r\n                    <FaUserMd className=\"me-2\" /> {appointment.doctor_name}\r\n                  </h5>\r\n                  {isToday(appointment.date) && (\r\n                    <span className=\"badge bg-primary\">Today</span>\r\n                  )}\r\n                  {isUpcoming(appointment.date) && !isToday(appointment.date) && (\r\n                    <span className=\"badge bg-warning text-dark\">Soon</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text\">\r\n                    <FaCalendarAlt className=\"me-2\" /> {new Date(appointment.date).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <FaClock className=\"me-2\" /> {appointment.time}\r\n                  </p>\r\n                  <p className=\"card-text\">\r\n                    <strong>Type:</strong> {appointment.type === 'telehealth' ? 'Telehealth Consultation' : 'In-person Appointment'}\r\n                  </p>\r\n                  {appointment.location && (\r\n                    <p className=\"card-text\">\r\n                      <strong>Location:</strong> {appointment.location}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                  <button \r\n                    className=\"btn btn-block w-100\" \r\n                    onClick={() => toggleReminder(appointment)}\r\n                    disabled={loading}\r\n                  >\r\n                    {appointment.reminder_set ? (\r\n                      <><FaToggleOn className=\"me-2\" /> Reminder On</>\r\n                    ) : (\r\n                      <><FaToggleOff className=\"me-2\" /> Set Reminder</>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppointmentRemindersPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaBook, FaSearch, FaQuestionCircle, FaVideo, FaFileAlt, FaChevronDown, FaChevronUp } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst HelpCenterPage = () => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activeCategory, setActiveCategory] = useState('all');\r\n  const [expandedFaqs, setExpandedFaqs] = useState({});\r\n  const [faqs, setFaqs] = useState([]);\r\n  const [tutorials, setTutorials] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notification, setNotification] = useState(null);\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchHelpCenterData();\r\n  }, []);\r\n\r\n  const fetchHelpCenterData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Fetch FAQs from Supabase\r\n      const { data: faqData, error: faqError } = await supabase\r\n        .from('faqs')\r\n        .select('*')\r\n        .order('id');\r\n        \r\n      if (faqError) throw faqError;\r\n      \r\n      // Fetch tutorials from Supabase\r\n      const { data: tutorialData, error: tutorialError } = await supabase\r\n        .from('tutorials')\r\n        .select('*')\r\n        .order('id');\r\n        \r\n      if (tutorialError) throw tutorialError;\r\n      \r\n      // Set the data\r\n      setFaqs(faqData || []);\r\n      setTutorials(tutorialData || []);\r\n      \r\n      // Extract unique categories from both FAQs and tutorials\r\n      const faqCategories = [...new Set(faqData.map(faq => faq.category))];\r\n      const tutorialCategories = [...new Set(tutorialData.map(tutorial => tutorial.category))];\r\n      const allCategories = [...new Set([...faqCategories, ...tutorialCategories])];\r\n      setCategories(allCategories);\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching help center data:', error);\r\n      setNotification({ message: 'Error loading help center content.', type: 'danger' });\r\n      \r\n      // Fallback to static data if API fails\r\n      setFaqs(staticFaqs);\r\n      setTutorials(staticTutorials);\r\n      setCategories([...new Set([\r\n        ...staticFaqs.map(faq => faq.category),\r\n        ...staticTutorials.map(tutorial => tutorial.category)\r\n      ])]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Static data as fallback\r\n  const staticFaqs = [\r\n    {\r\n      id: 1,\r\n      category: 'account',\r\n      question: 'How do I create an account?',\r\n      answer: 'To create an account, click on the \"Sign Up\" button on the login page. Fill in your personal details, including your email address and a secure password. Follow the verification steps sent to your email to complete the registration process.'\r\n    },\r\n    {\r\n      id: 2,\r\n      category: 'account',\r\n      question: 'How do I reset my password?',\r\n      answer: 'If you forgot your password, click on the \"Forgot Password\" link on the login page. Enter your registered email address, and we will send you a password reset link. Follow the instructions in the email to create a new password.'\r\n    },\r\n    {\r\n      id: 3,\r\n      category: 'appointments',\r\n      question: 'How do I schedule an appointment?',\r\n      answer: 'To schedule an appointment, navigate to the \"Appointments\" section in the navigation menu and select \"Upcoming Appointments\". Click on the \"Schedule New Appointment\" button and fill in the required details such as doctor name, date, time, and location. Click \"Schedule Appointment\" to confirm.'\r\n    },\r\n    {\r\n      id: 4,\r\n      category: 'appointments',\r\n      question: 'How do I cancel or reschedule an appointment?',\r\n      answer: 'To cancel or reschedule an appointment, go to the \"Upcoming Appointments\" page. Find the appointment you want to modify, then click the \"Edit\" button to change the date or time, or click the \"Cancel\" button to cancel the appointment entirely.'\r\n    },\r\n    {\r\n      id: 5,\r\n      category: 'medical',\r\n      question: 'How do I add my medical history?',\r\n      answer: 'To add your medical history, navigate to the \"Medical History\" page from the \"Your Journey\" menu. Click on \"Add New Medical Record\" and fill in the details about your condition, diagnosis date, doctor, and treatment. Click \"Add Record\" to save the information.'\r\n    },\r\n    {\r\n      id: 6,\r\n      category: 'medical',\r\n      question: 'How do I track my medications?',\r\n      answer: 'To track your medications, go to the \"Medication Tracker\" page from the \"Your Journey\" menu. Enter the medication name, frequency, and quantity, then click \"Add Medication\". You can view and manage all your medications from this page.'\r\n    },\r\n    {\r\n      id: 7,\r\n      category: 'telehealth',\r\n      question: 'How do I join a telehealth consultation?',\r\n      answer: 'To join a telehealth consultation, go to the \"Telehealth Consultations\" page. On the day of your appointment, you will see your consultation listed under \"Today\\'s Consultations\". Click the \"Join Meeting\" button at the scheduled time to enter the virtual consultation room.'\r\n    },\r\n    {\r\n      id: 8,\r\n      category: 'telehealth',\r\n      question: 'What equipment do I need for a telehealth consultation?',\r\n      answer: 'For a telehealth consultation, you need a device with a camera and microphone (smartphone, tablet, or computer), a stable internet connection, and a quiet, private space. Make sure your device is charged and your browser allows camera and microphone access.'\r\n    },\r\n    {\r\n      id: 9,\r\n      category: 'data',\r\n      question: 'Is my health data secure?',\r\n      answer: 'Yes, your health data is secure. We use industry-standard encryption and security measures to protect your personal and medical information. Our platform complies with healthcare privacy regulations, and your data is only accessible to you and the healthcare providers you authorize.'\r\n    },\r\n    {\r\n      id: 10,\r\n      category: 'data',\r\n      question: 'How do I export my health data?',\r\n      answer: 'To export your health data, go to the \"Data Backup & Export\" page under the \"Account\" menu. Select the type of data you want to export and the format (PDF, CSV, etc.). Click \"Export Data\" and follow the prompts to download your information.'\r\n    }\r\n  ];\r\n\r\n  const staticTutorials = [\r\n    {\r\n      id: 1,\r\n      category: 'getting-started',\r\n      title: 'Getting Started with DigiHealth',\r\n      type: 'video',\r\n      description: 'Learn the basics of navigating the DigiHealth platform and setting up your profile.',\r\n      link: '#'\r\n    },\r\n    {\r\n      id: 2,\r\n      category: 'appointments',\r\n      title: 'How to Schedule and Manage Appointments',\r\n      type: 'guide',\r\n      description: 'A step-by-step guide to scheduling, rescheduling, and canceling appointments.',\r\n      link: '#'\r\n    },\r\n    {\r\n      id: 3,\r\n      category: 'medical',\r\n      title: 'Managing Your Medical Records',\r\n      type: 'video',\r\n      description: 'Learn how to add, edit, and organize your medical history and records.',\r\n      link: '#'\r\n    },\r\n    {\r\n      id: 4,\r\n      category: 'telehealth',\r\n      title: 'Preparing for Your First Telehealth Consultation',\r\n      type: 'guide',\r\n      description: 'Tips and instructions for a successful virtual healthcare appointment.',\r\n      link: '#'\r\n    },\r\n    {\r\n      id: 5,\r\n      category: 'data',\r\n      title: 'Understanding Your Health Analytics',\r\n      type: 'video',\r\n      description: 'How to interpret and use the health analytics features to monitor your well-being.',\r\n      link: '#'\r\n    },\r\n    {\r\n      id: 6,\r\n      category: 'account',\r\n      title: 'Account Security Best Practices',\r\n      type: 'guide',\r\n      description: 'Learn how to keep your DigiHealth account secure with strong passwords and two-factor authentication.',\r\n      link: '#'\r\n    }\r\n  ];\r\n\r\n  // Filter FAQs based on search term and active category\r\n  const filteredFaqs = faqs.filter(faq => {\r\n    const matchesSearch = searchTerm === '' || \r\n      faq.question.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n      faq.answer.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesCategory = activeCategory === 'all' || faq.category === activeCategory;\r\n    \r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  // Filter tutorials based on search term and active category\r\n  const filteredTutorials = tutorials.filter(tutorial => {\r\n    const matchesSearch = searchTerm === '' || \r\n      tutorial.title.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n      tutorial.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesCategory = activeCategory === 'all' || tutorial.category === activeCategory;\r\n    \r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  // Toggle FAQ expansion\r\n  const toggleFaq = (id) => {\r\n    setExpandedFaqs(prev => ({\r\n      ...prev,\r\n      [id]: !prev[id]\r\n    }));\r\n  };\r\n\r\n  // Track FAQ view for analytics\r\n  const trackFaqView = async (faqId) => {\r\n    try {\r\n      // Only track if not already expanded (first view)\r\n      if (!expandedFaqs[faqId]) {\r\n        await supabase\r\n          .from('faq_analytics')\r\n          .insert([{\r\n            faq_id: faqId,\r\n            viewed_at: new Date().toISOString()\r\n          }]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error tracking FAQ view:', error);\r\n      // Silent fail - don't show error to user\r\n    }\r\n  };\r\n\r\n  // Track tutorial click for analytics\r\n  const trackTutorialClick = async (tutorialId) => {\r\n    try {\r\n      await supabase\r\n        .from('tutorial_analytics')\r\n        .insert([{\r\n          tutorial_id: tutorialId,\r\n          clicked_at: new Date().toISOString()\r\n        }]);\r\n    } catch (error) {\r\n      console.error('Error tracking tutorial click:', error);\r\n      // Silent fail - don't show error to user\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaBook className=\"me-2\" /> Help Center\r\n      </h1>\r\n      \r\n      {/* Search and Filter */}\r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8 mb-3\">\r\n              <div className=\"input-group\">\r\n                <span className=\"input-group-text\"><FaSearch /></span>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\" \r\n                  placeholder=\"Search for help topics...\" \r\n                  value={searchTerm} \r\n                  onChange={(e) => setSearchTerm(e.target.value)} \r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4 mb-3\">\r\n              <select \r\n                className=\"form-select\" \r\n                value={activeCategory} \r\n                onChange={(e) => setActiveCategory(e.target.value)}\r\n              >\r\n                <option value=\"all\">All Categories</option>\r\n                {categories.map((category, index) => (\r\n                  <option key={index} value={category}>\r\n                    {category.charAt(0).toUpperCase() + category.slice(1).replace('-', ' ')}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Frequently Asked Questions */}\r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-header bg-primary text-white\">\r\n          <h2 className=\"mb-0\">\r\n            <FaQuestionCircle className=\"me-2\" /> Frequently Asked Questions\r\n          </h2>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {filteredFaqs.length === 0 ? (\r\n            <div className=\"alert alert-info\">\r\n              No FAQs match your search criteria. Try a different search term or category.\r\n            </div>\r\n          ) : (\r\n            <div className=\"accordion\">\r\n              {filteredFaqs.map((faq) => (\r\n                <div key={faq.id} className=\"card mb-2\">\r\n                  <div \r\n                    className=\"card-header d-flex justify-content-between align-items-center\"\r\n                    onClick={() => {\r\n                      toggleFaq(faq.id);\r\n                      trackFaqView(faq.id);\r\n                    }}\r\n                    style={{ cursor: 'pointer' }}\r\n                  >\r\n                    <h5 className=\"mb-0\">{faq.question}</h5>\r\n                    {expandedFaqs[faq.id] ? <FaChevronUp /> : <FaChevronDown />}\r\n                  </div>\r\n                  {expandedFaqs[faq.id] && (\r\n                    <div className=\"card-body\">\r\n                      <p>{faq.answer}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Video Tutorials and Guides */}\r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-header bg-success text-white\">\r\n          <h2 className=\"mb-0\">\r\n            <FaVideo className=\"me-2\" /> Tutorials & Guides\r\n          </h2>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {filteredTutorials.length === 0 ? (\r\n            <div className=\"alert alert-info\">\r\n              No tutorials match your search criteria. Try a different search term or category.\r\n            </div>\r\n          ) : (\r\n            <div className=\"row\">\r\n              {filteredTutorials.map((tutorial) => (\r\n                <div key={tutorial.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n                  <div className=\"card h-100\">\r\n                    <div className=\"card-header\">\r\n                      {tutorial.type === 'video' ? (\r\n                        <FaVideo className=\"me-2 text-danger\" />\r\n                      ) : (\r\n                        <FaFileAlt className=\"me-2 text-primary\" />\r\n                      )}\r\n                      <span className=\"badge bg-secondary\">{tutorial.category.replace('-', ' ')}</span>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"card-title\">{tutorial.title}</h5>\r\n                      <p className=\"card-text\">{tutorial.description}</p>\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n                      <a \r\n                        href={tutorial.link} \r\n                        className=\"btn btn-primary btn-sm w-100\"\r\n                        onClick={() => trackTutorialClick(tutorial.id)}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                      >\r\n                        {tutorial.type === 'video' ? 'Watch Video' : 'Read Guide'}\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Additional Help */}\r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-header bg-info text-white\">\r\n          <h2 className=\"mb-0\">Need More Help?</h2>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card h-100 text-center\">\r\n                <div className=\"card-body\">\r\n                  <h3>Contact Support</h3>\r\n                  <p>Reach out to our support team for personalized assistance.</p>\r\n                  <a href=\"/contact-support\" className=\"btn btn-primary\">Contact Support</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card h-100 text-center\">\r\n                <div className=\"card-body\">\r\n                  <h3>Live Chat</h3>\r\n                  <p>Chat with our support agents in real-time for immediate help.</p>\r\n                  <a href=\"/live-chat\" className=\"btn btn-primary\">Start Chat</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-4 mb-3\">\r\n              <div className=\"card h-100 text-center\">\r\n                <div className=\"card-body\">\r\n                  <h3>Email Support</h3>\r\n                  <p>Send us an email and we'll get back to you within 24 hours.</p>\r\n                  <a href=\"mailto:support@digihealth.com\" className=\"btn btn-primary\">Email Us</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HelpCenterPage; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaLifeRing, FaEnvelope, FaPhone, FaComments, FaQuestionCircle, FaExclamationTriangle, FaLightbulb } from 'react-icons/fa';\r\nimport '../styles.css';\r\n\r\nconst ContactSupportPage = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [notification, setNotification] = useState(null);\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [supportTicket, setSupportTicket] = useState({\r\n    subject: '',\r\n    category: 'general',\r\n    priority: 'medium',\r\n    message: '',\r\n    attachFile: null\r\n  });\r\n  const [faqSuggestions, setFaqSuggestions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Simple FAQ suggestion system based on subject and message\r\n    if (supportTicket.subject.length > 3 || supportTicket.message.length > 10) {\r\n      const searchText = `${supportTicket.subject} ${supportTicket.message}`.toLowerCase();\r\n      \r\n      // Sample FAQs that might match user's query\r\n      const faqs = [\r\n        {\r\n          question: 'How do I reset my password?',\r\n          answer: 'Click on \"Forgot Password\" on the login page and follow the instructions sent to your email.',\r\n          keywords: ['password', 'reset', 'forgot', 'login', 'sign in', 'cannot access']\r\n        },\r\n        {\r\n          question: 'How do I schedule an appointment?',\r\n          answer: 'Go to \"Upcoming Appointments\" and click \"Schedule New Appointment\".',\r\n          keywords: ['schedule', 'appointment', 'book', 'doctor', 'visit', 'consultation']\r\n        },\r\n        {\r\n          question: 'How do I update my profile information?',\r\n          answer: 'Navigate to \"Profile Settings\" under the Account menu to edit your personal details.',\r\n          keywords: ['profile', 'update', 'change', 'information', 'details', 'personal']\r\n        },\r\n        {\r\n          question: 'How do I export my health data?',\r\n          answer: 'Go to \"Data Backup & Export\" under the Account menu to download your information.',\r\n          keywords: ['export', 'download', 'data', 'backup', 'information', 'records']\r\n        },\r\n        {\r\n          question: 'How do I join a telehealth consultation?',\r\n          answer: 'On the day of your appointment, go to \"Telehealth Consultations\" and click \"Join Meeting\".',\r\n          keywords: ['telehealth', 'virtual', 'video', 'call', 'consultation', 'join', 'meeting']\r\n        }\r\n      ];\r\n      \r\n      // Find matching FAQs\r\n      const suggestions = faqs.filter(faq => {\r\n        return faq.keywords.some(keyword => searchText.includes(keyword));\r\n      });\r\n      \r\n      setFaqSuggestions(suggestions.slice(0, 3)); // Limit to 3 suggestions\r\n    } else {\r\n      setFaqSuggestions([]);\r\n    }\r\n  }, [supportTicket.subject, supportTicket.message]);\r\n\r\n  const fetchUserProfile = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('detailed_profiles')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .single();\r\n        \r\n      if (error) throw error;\r\n      setUserProfile(data);\r\n    } catch (error) {\r\n      console.error('Error fetching user profile:', error);\r\n      setNotification({ message: 'Error fetching user profile.', type: 'danger' });\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setSupportTicket(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setSupportTicket(prev => ({\r\n      ...prev,\r\n      attachFile: e.target.files[0]\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        window.location.href = '/';\r\n        return;\r\n      }\r\n      \r\n      // Upload attachment if exists\r\n      let attachmentUrl = null;\r\n      if (supportTicket.attachFile) {\r\n        const fileName = `${user.id}-${Date.now()}-${supportTicket.attachFile.name}`;\r\n        const { data: fileData, error: fileError } = await supabase.storage\r\n          .from('support-attachments')\r\n          .upload(fileName, supportTicket.attachFile);\r\n          \r\n        if (fileError) throw fileError;\r\n        \r\n        const { data: urlData } = supabase.storage\r\n          .from('support-attachments')\r\n          .getPublicUrl(fileName);\r\n          \r\n        attachmentUrl = urlData.publicUrl;\r\n      }\r\n      \r\n      // Create support ticket\r\n      const { error } = await supabase\r\n        .from('support_tickets')\r\n        .insert([{\r\n          user_id: user.id,\r\n          subject: supportTicket.subject,\r\n          category: supportTicket.category,\r\n          priority: supportTicket.priority,\r\n          message: supportTicket.message,\r\n          attachment_url: attachmentUrl,\r\n          status: 'open',\r\n          created_at: new Date().toISOString()\r\n        }]);\r\n        \r\n      if (error) throw error;\r\n      \r\n      setNotification({ message: 'Support ticket submitted successfully! Our team will respond shortly.', type: 'success' });\r\n      \r\n      // Reset form\r\n      setSupportTicket({\r\n        subject: '',\r\n        category: 'general',\r\n        priority: 'medium',\r\n        message: '',\r\n        attachFile: null\r\n      });\r\n      \r\n      // Reset file input\r\n      document.getElementById('attachFile').value = '';\r\n      \r\n    } catch (error) {\r\n      console.error('Error submitting support ticket:', error);\r\n      setNotification({ message: 'Error submitting support ticket. Please try again.', type: 'danger' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} text-center`}>\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n      \r\n      <h1 className=\"text-center mb-4\">\r\n        <FaLifeRing className=\"me-2\" /> Contact Support\r\n      </h1>\r\n      \r\n      <div className=\"row\">\r\n        <div className=\"col-lg-8\">\r\n          {/* Support Ticket Form */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header bg-primary text-white\">\r\n              <h2 className=\"mb-0\">Submit a Support Request</h2>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {faqSuggestions.length > 0 && (\r\n                <div className=\"alert alert-info mb-4\">\r\n                  <h5><FaLightbulb className=\"me-2\" /> Did you know?</h5>\r\n                  <p>We found some help articles that might answer your question:</p>\r\n                  <ul className=\"mb-0\">\r\n                    {faqSuggestions.map((faq, index) => (\r\n                      <li key={index}>\r\n                        <strong>{faq.question}</strong> - {faq.answer}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              \r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"subject\" className=\"form-label\">Subject</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    className=\"form-control\" \r\n                    id=\"subject\" \r\n                    name=\"subject\" \r\n                    value={supportTicket.subject} \r\n                    onChange={handleChange} \r\n                    required \r\n                    placeholder=\"Brief description of your issue\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label htmlFor=\"category\" className=\"form-label\">Category</label>\r\n                    <select \r\n                      className=\"form-select\" \r\n                      id=\"category\" \r\n                      name=\"category\" \r\n                      value={supportTicket.category} \r\n                      onChange={handleChange}\r\n                    >\r\n                      <option value=\"general\">General Question</option>\r\n                      <option value=\"account\">Account Issues</option>\r\n                      <option value=\"appointments\">Appointments</option>\r\n                      <option value=\"medical\">Medical Records</option>\r\n                      <option value=\"telehealth\">Telehealth</option>\r\n                      <option value=\"technical\">Technical Problem</option>\r\n                      <option value=\"billing\">Billing & Payments</option>\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label htmlFor=\"priority\" className=\"form-label\">Priority</label>\r\n                    <select \r\n                      className=\"form-select\" \r\n                      id=\"priority\" \r\n                      name=\"priority\" \r\n                      value={supportTicket.priority} \r\n                      onChange={handleChange}\r\n                    >\r\n                      <option value=\"low\">Low - General Question</option>\r\n                      <option value=\"medium\">Medium - Need Help Soon</option>\r\n                      <option value=\"high\">High - Urgent Issue</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"message\" className=\"form-label\">Message</label>\r\n                  <textarea \r\n                    className=\"form-control\" \r\n                    id=\"message\" \r\n                    name=\"message\" \r\n                    rows=\"6\" \r\n                    value={supportTicket.message} \r\n                    onChange={handleChange} \r\n                    required \r\n                    placeholder=\"Please describe your issue in detail. Include any error messages or steps to reproduce the problem.\"\r\n                  ></textarea>\r\n                </div>\r\n                \r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"attachFile\" className=\"form-label\">Attach File (optional)</label>\r\n                  <input \r\n                    type=\"file\" \r\n                    className=\"form-control\" \r\n                    id=\"attachFile\" \r\n                    onChange={handleFileChange} \r\n                  />\r\n                  <div className=\"form-text\">\r\n                    You can attach screenshots or documents to help explain your issue (max 5MB).\r\n                  </div>\r\n                </div>\r\n                \r\n                <button \r\n                  type=\"submit\" \r\n                  className=\"btn btn-primary\" \r\n                  disabled={loading}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                      Submitting...\r\n                    </>\r\n                  ) : (\r\n                    'Submit Support Request'\r\n                  )}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"col-lg-4\">\r\n          {/* Contact Information */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header bg-info text-white\">\r\n              <h3 className=\"mb-0\">Contact Information</h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"d-flex align-items-center mb-3\">\r\n                <FaEnvelope className=\"me-3 fs-4 text-primary\" />\r\n                <div>\r\n                  <h5 className=\"mb-0\">Email Support</h5>\r\n                  <p className=\"mb-0\">support@digihealth.com</p>\r\n                  <small className=\"text-muted\">Response within 24 hours</small>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"d-flex align-items-center mb-3\">\r\n                <FaPhone className=\"me-3 fs-4 text-primary\" />\r\n                <div>\r\n                  <h5 className=\"mb-0\">Phone Support</h5>\r\n                  <p className=\"mb-0\">1-800-DIGI-HEALTH</p>\r\n                  <small className=\"text-muted\">Mon-Fri, 9am-5pm EST</small>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"d-flex align-items-center\">\r\n                <FaComments className=\"me-3 fs-4 text-primary\" />\r\n                <div>\r\n                  <h5 className=\"mb-0\">Live Chat</h5>\r\n                  <p className=\"mb-0\">\r\n                    <a href=\"/live-chat\" className=\"btn btn-sm btn-outline-primary mt-1\">Start Chat</a>\r\n                  </p>\r\n                  <small className=\"text-muted\">Available 24/7</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Support Resources */}\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header bg-success text-white\">\r\n              <h3 className=\"mb-0\">Support Resources</h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"d-flex align-items-center mb-3\">\r\n                <FaQuestionCircle className=\"me-3 fs-4 text-success\" />\r\n                <div>\r\n                  <h5 className=\"mb-0\">Help Center</h5>\r\n                  <p className=\"mb-0\">\r\n                    <a href=\"/help-center\" className=\"btn btn-sm btn-outline-success mt-1\">Browse FAQs</a>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"d-flex align-items-center\">\r\n                <FaExclamationTriangle className=\"me-3 fs-4 text-warning\" />\r\n                <div>\r\n                  <h5 className=\"mb-0\">System Status</h5>\r\n                  <p className=\"mb-0\">\r\n                    <span className=\"badge bg-success\">All Systems Operational</span>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactSupportPage; ","import React, { useState, useEffect, useRef } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaPaperPlane, FaMicrophone, FaMicrophoneSlash, FaVideo, FaVideoSlash, FaFile, FaImage } from 'react-icons/fa';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst LiveChat = () => {\r\n  const { user } = useAuth();\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [chatStatus, setChatStatus] = useState('connecting');\r\n  const [supportAgent, setSupportAgent] = useState(null);\r\n  const [chatSubscription, setChatSubscription] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    initializeChat();\r\n    return () => {\r\n      // Cleanup subscription\r\n      if (chatSubscription) {\r\n        chatSubscription.unsubscribe();\r\n      }\r\n    };\r\n  }, [user, chatSubscription]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const initializeChat = async () => {\r\n    try {\r\n      // Get or create chat session\r\n      const { data: sessionData, error: sessionError } = await supabase\r\n        .from('chat_sessions')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'active')\r\n        .single();\r\n\r\n      if (sessionError && sessionError.code !== 'PGRST116') {\r\n        throw sessionError;\r\n      }\r\n\r\n      let sessionId;\r\n      if (!sessionData) {\r\n        // Create new session\r\n        const { data: newSession, error: createError } = await supabase\r\n          .from('chat_sessions')\r\n          .insert([\r\n            {\r\n              user_id: user.id,\r\n              status: 'active',\r\n              created_at: new Date().toISOString()\r\n            }\r\n          ])\r\n          .select()\r\n          .single();\r\n\r\n        if (createError) throw createError;\r\n        sessionId = newSession.id;\r\n      } else {\r\n        sessionId = sessionData.id;\r\n      }\r\n\r\n      // Fetch existing messages\r\n      const { data: messagesData, error: messagesError } = await supabase\r\n        .from('chat_messages')\r\n        .select('*')\r\n        .eq('session_id', sessionId)\r\n        .order('created_at', { ascending: true });\r\n\r\n      if (messagesError) throw messagesError;\r\n      setMessages(messagesData || []);\r\n\r\n      // Subscribe to new messages\r\n      const subscription = supabase\r\n        .channel('chat_messages')\r\n        .on(\r\n          'postgres_changes',\r\n          {\r\n            event: 'INSERT',\r\n            schema: 'public',\r\n            table: 'chat_messages',\r\n            filter: `session_id=eq.${sessionId}`\r\n          },\r\n          (payload) => {\r\n            setMessages(prev => [...prev, payload.new]);\r\n          }\r\n        )\r\n        .subscribe();\r\n        \r\n      setChatSubscription(subscription);\r\n\r\n      // Get support agent info\r\n      const { data: agentData, error: agentError } = await supabase\r\n        .from('support_agents')\r\n        .select('*')\r\n        .eq('status', 'online')\r\n        .single();\r\n\r\n      if (agentError && agentError.code !== 'PGRST116') {\r\n        throw agentError;\r\n      }\r\n\r\n      if (agentData) {\r\n        setSupportAgent(agentData);\r\n        setChatStatus('connected');\r\n      } else {\r\n        setChatStatus('waiting');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error initializing chat:', error);\r\n      setChatStatus('error');\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n\r\n    try {\r\n      const { data: sessionData } = await supabase\r\n        .from('chat_sessions')\r\n        .select('id')\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'active')\r\n        .single();\r\n\r\n      if (!sessionData) {\r\n        throw new Error('No active chat session');\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('chat_messages')\r\n        .insert([\r\n          {\r\n            session_id: sessionData.id,\r\n            user_id: user.id,\r\n            message: newMessage.trim(),\r\n            type: 'text',\r\n            created_at: new Date().toISOString()\r\n          }\r\n        ]);\r\n\r\n      if (error) throw error;\r\n      setNewMessage('');\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${Math.random()}.${fileExt}`;\r\n      const filePath = `${user.id}/${fileName}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('chat-attachments')\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const { data: sessionData } = await supabase\r\n        .from('chat_sessions')\r\n        .select('id')\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'active')\r\n        .single();\r\n\r\n      if (!sessionData) {\r\n        throw new Error('No active chat session');\r\n      }\r\n\r\n      const { error: messageError } = await supabase\r\n        .from('chat_messages')\r\n        .insert([\r\n          {\r\n            session_id: sessionData.id,\r\n            user_id: user.id,\r\n            message: file.name,\r\n            type: file.type.startsWith('image/') ? 'image' : 'file',\r\n            attachment_url: filePath,\r\n            created_at: new Date().toISOString()\r\n          }\r\n        ]);\r\n\r\n      if (messageError) throw messageError;\r\n    } catch (error) {\r\n      console.error('Error uploading file:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid h-100\">\r\n      <div className=\"row h-100\">\r\n        {/* Sidebar */}\r\n        <div className=\"col-md-3 p-0 border-end\">\r\n          <div className=\"p-3 border-bottom\">\r\n            <h5 className=\"mb-0\">Chat Information</h5>\r\n            <small className=\"text-muted\">\r\n              Status: <span className={`text-${chatStatus === 'connected' ? 'success' : 'warning'}`}>\r\n                {chatStatus.charAt(0).toUpperCase() + chatStatus.slice(1)}\r\n              </span>\r\n            </small>\r\n          </div>\r\n          {supportAgent && (\r\n            <div className=\"p-3\">\r\n              <h6 className=\"mb-2\">Support Agent</h6>\r\n              <div className=\"d-flex align-items-center\">\r\n                <div className=\"avatar-circle me-2\">\r\n                  {supportAgent.name.charAt(0)}\r\n                </div>\r\n                <div>\r\n                  <div className=\"fw-bold\">{supportAgent.name}</div>\r\n                  <small className=\"text-muted\">{supportAgent.role}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Chat Area */}\r\n        <div className=\"col-md-9 p-0 d-flex flex-column\">\r\n          {/* Messages */}\r\n          <div className=\"flex-grow-1 p-3 overflow-auto\" style={{ height: 'calc(100vh - 200px)' }}>\r\n            {messages.map((message, index) => (\r\n              <div\r\n                key={index}\r\n                className={`d-flex ${message.user_id === user.id ? 'justify-content-end' : 'justify-content-start'} mb-3`}\r\n              >\r\n                <div\r\n                  className={`chat-message ${\r\n                    message.user_id === user.id ? 'bg-primary text-white' : 'bg-light'\r\n                  }`}\r\n                >\r\n                  {message.type === 'text' ? (\r\n                    <p className=\"mb-0\">{message.message}</p>\r\n                  ) : message.type === 'image' ? (\r\n                    <img\r\n                      src={`${process.env.REACT_APP_SUPABASE_URL}/storage/v1/object/public/chat-attachments/${message.attachment_url}`}\r\n                      alt=\"Shared image\"\r\n                      className=\"img-fluid rounded\"\r\n                      style={{ maxWidth: '200px' }}\r\n                    />\r\n                  ) : (\r\n                    <a\r\n                      href={`${process.env.REACT_APP_SUPABASE_URL}/storage/v1/object/public/chat-attachments/${message.attachment_url}`}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-decoration-none\"\r\n                    >\r\n                      <FaFile className=\"me-2\" />\r\n                      {message.message}\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Input Area */}\r\n          <div className=\"p-3 border-top\">\r\n            <form onSubmit={sendMessage} className=\"d-flex gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"Type your message...\"\r\n                value={newMessage}\r\n                onChange={(e) => setNewMessage(e.target.value)}\r\n                onFocus={() => setIsTyping(true)}\r\n                onBlur={() => setIsTyping(false)}\r\n              />\r\n              <label className=\"btn btn-outline-primary\">\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"d-none\"\r\n                  onChange={handleFileUpload}\r\n                  accept=\"image/*,.pdf,.doc,.docx\"\r\n                />\r\n                <FaFile />\r\n              </label>\r\n              <button type=\"submit\" className=\"btn btn-primary\">\r\n                <FaPaperPlane />\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveChat; ","import React, { useState, useEffect } from 'react';\r\nimport { getUserProfile, updateUserProfile, getDiseaseNames, addDiseaseName, getParameters, addParameter, getAllergies, getCommonDiseases } from '../utils/api';\r\nimport {supabase} from '../utils/main';\r\nimport Spinner from '../components/Spinner';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './ProfilePage.css';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst ProfilePage = () => {\r\n  const [profile, setProfile] = useState({\r\n    first_name: null,\r\n    last_name: null,\r\n    email: null,\r\n    date_of_birth: null,\r\n    gender: null,\r\n    blood_group: null,\r\n    height: '',\r\n    weight: '',\r\n    allergies: [],\r\n    medical_conditions: [],\r\n    emergency_contact_name: null,\r\n    emergency_contact_phone: null,\r\n    emergency_contact_relationship: null,\r\n    phone: null,\r\n    address: null,\r\n    bio: '',\r\n    profile_picture: null\r\n  });\r\n  const [diseaseNames, setDiseaseNames] = useState([]);\r\n  const [newDiseaseName, setNewDiseaseName] = useState('');\r\n  const [parameters, setParameters] = useState([]);\r\n  const [newParameter, setNewParameter] = useState({ name: '', value: '', unit: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [editing, setEditing] = useState(false);\r\n  const [activeSection, setActiveSection] = useState('profile');\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n  const [notification, setNotification] = useState('');\r\n  const [allergies, setAllergies] = useState([]);\r\n  const [newAllergy, setNewAllergy] = useState({ name: '', severity: 'mild' });\r\n  const [commonDiseases, setCommonDiseases] = useState([]);\r\n  const [showSidebar, setShowSidebar] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeSection === 'diseases') {\r\n      fetchDiseases();\r\n      fetchCommonDiseases();\r\n      fetchAllergies();\r\n    } else if (activeSection === 'parameters') {\r\n      fetchParameters();\r\n    }\r\n  }, [activeSection]);\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      const { data, error } = await supabase\r\n        .from('detailed_profiles')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      if (error) {\r\n        if (error.code === 'PGRST116') {\r\n          // Profile doesn't exist, create one\r\n          const { data: newProfile, error: createError } = await supabase\r\n            .from('detailed_profiles')\r\n            .insert([{ id: user.id }])\r\n            .select()\r\n            .single();\r\n            \r\n          if (createError) throw createError;\r\n          setProfile(newProfile || {});\r\n        } else {\r\n          throw error;\r\n        }\r\n      } else {\r\n        setProfile(data || {});\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error fetching profile: ' + error.message, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDiseases = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_diseases')\r\n        .select('*')\r\n        .eq('user_id', user.id);\r\n        \r\n      if (error) throw error;\r\n      setDiseaseNames(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching diseases:', error);\r\n    }\r\n  };\r\n\r\n  const fetchCommonDiseases = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('common_diseases')\r\n        .select('*');\r\n        \r\n      if (error) throw error;\r\n      setCommonDiseases(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching common diseases:', error);\r\n    }\r\n  };\r\n\r\n  const fetchAllergies = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_allergies')\r\n        .select('*')\r\n        .eq('user_id', user.id);\r\n        \r\n      if (error) throw error;\r\n      setAllergies(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching allergies:', error);\r\n    }\r\n  };\r\n\r\n  const fetchParameters = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_parameters')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('date_recorded', { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setParameters(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching parameters:', error);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfile((prevProfile) => ({\r\n      ...prevProfile,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      // Only include fields that are in the detailed_profiles table\r\n      const updatedProfile = {\r\n        first_name: profile.first_name || null,\r\n        last_name: profile.last_name || null,\r\n        email: profile.email || null,\r\n        date_of_birth: profile.date_of_birth || null,\r\n        gender: profile.gender || null,\r\n        blood_group: profile.blood_group || null,\r\n        height: profile.height || null,  // Add height field\r\n        weight: profile.weight || null,  // Add weight field\r\n        phone: profile.phone || null,\r\n        address: profile.address || null,\r\n        emergency_contact_name: profile.emergency_contact_name || null,\r\n        emergency_contact_phone: profile.emergency_contact_phone || null,\r\n        emergency_contact_relationship: profile.emergency_contact_relationship || null,\r\n        profile_picture: profile.profile_picture || null,\r\n        bio: profile.bio || null,       // Add bio field if needed\r\n        updated_at: new Date().toISOString()\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from('detailed_profiles')\r\n        .update(updatedProfile)\r\n        .eq('id', user.id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success('Profile updated successfully!', {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true\r\n      });\r\n      setEditing(false);\r\n    } catch (error) {\r\n      toast.error('Error updating profile: ' + error.message, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddDiseaseName = async () => {\r\n    if (newDiseaseName.trim()) {\r\n      try {\r\n        setLoading(true);\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (!user) throw new Error('No user logged in');\r\n        \r\n        // Check if disease already exists for user\r\n        const { data: existingDisease, error: checkError } = await supabase\r\n          .from('user_diseases')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .eq('disease_name', newDiseaseName)\r\n          .single();\r\n        \r\n        if (checkError && checkError.code !== 'PGRST116') {\r\n          throw checkError;\r\n        }\r\n        \r\n        if (!existingDisease) {\r\n          // Insert the disease for this user\r\n          const { data, error } = await supabase\r\n            .from('user_diseases')\r\n            .insert([{\r\n              user_id: user.id,\r\n              disease_name: newDiseaseName,\r\n              date_diagnosed: new Date().toISOString()\r\n            }])\r\n            .select();\r\n            \r\n          if (error) throw error;\r\n          \r\n          setDiseaseNames([...diseaseNames, ...data]);\r\n          toast.success('Disease added successfully!', {\r\n            position: \"top-right\",\r\n            autoClose: 3000\r\n          });\r\n        } else {\r\n          toast.info('This disease is already in your list', {\r\n            position: \"top-right\",\r\n            autoClose: 3000\r\n          });\r\n        }\r\n        \r\n        setNewDiseaseName('');\r\n      } catch (error) {\r\n        console.error('Error adding disease:', error);\r\n        toast.error('Error adding disease: ' + error.message, {\r\n          position: \"top-right\",\r\n          autoClose: 5000\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAddParameter = async () => {\r\n    if (newParameter.name.trim() && newParameter.value.trim()) {\r\n      try {\r\n        setLoading(true);\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (!user) throw new Error('No user logged in');\r\n        \r\n        // Insert the parameter for this user\r\n        const { data, error } = await supabase\r\n          .from('user_parameters')\r\n          .insert([{\r\n            user_id: user.id,\r\n            parameter_name: newParameter.name,\r\n            value: newParameter.value,\r\n            unit: newParameter.unit || '',\r\n            date_recorded: new Date().toISOString()\r\n          }])\r\n          .select();\r\n          \r\n        if (error) throw error;\r\n        \r\n        setParameters([...parameters, ...data]);\r\n        setNewParameter({ name: '', value: '', unit: '' });\r\n        toast.success('Parameter added successfully!', {\r\n          position: \"top-right\",\r\n          autoClose: 3000\r\n        });\r\n      } catch (error) {\r\n        console.error('Error adding parameter:', error);\r\n        toast.error('Error adding parameter: ' + error.message, {\r\n          position: \"top-right\", \r\n          autoClose: 5000\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      toast.warning('Please enter both parameter name and value', {\r\n        position: \"top-right\",\r\n        autoClose: 3000\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddAllergy = async () => {\r\n    if (newAllergy.name.trim()) {\r\n      try {\r\n        setLoading(true);\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (!user) throw new Error('No user logged in');\r\n        \r\n        // Check if allergy already exists for user\r\n        const { data: existingAllergy, error: checkError } = await supabase\r\n          .from('user_allergies')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .eq('allergy_name', newAllergy.name)\r\n          .single();\r\n        \r\n        if (checkError && checkError.code !== 'PGRST116') {\r\n          throw checkError;\r\n        }\r\n        \r\n        if (!existingAllergy) {\r\n          // Insert the allergy for this user\r\n          const { data, error } = await supabase\r\n            .from('user_allergies')\r\n            .insert([{\r\n              user_id: user.id,\r\n              allergy_name: newAllergy.name,\r\n              severity: newAllergy.severity\r\n            }])\r\n            .select();\r\n            \r\n          if (error) throw error;\r\n          \r\n          setAllergies([...allergies, ...data]);\r\n          toast.success('Allergy added successfully!', {\r\n            position: \"top-right\",\r\n            autoClose: 3000\r\n          });\r\n        } else {\r\n          toast.info('This allergy is already in your list', {\r\n            position: \"top-right\", \r\n            autoClose: 3000\r\n          });\r\n        }\r\n        \r\n        setNewAllergy({ name: '', severity: 'mild' });\r\n      } catch (error) {\r\n        console.error('Error adding allergy:', error);\r\n        toast.error('Error adding allergy: ' + error.message, {\r\n          position: \"top-right\",\r\n          autoClose: 5000\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      toast.warning('Please enter an allergy name', {\r\n        position: \"top-right\",\r\n        autoClose: 3000\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = async (e) => {\r\n    try {\r\n      setUploadingImage(true);\r\n      const file = e.target.files[0];\r\n      if (!file) return;\r\n\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      const fileExt = file.name.split('.').pop();\r\n      const filePath = `${user.id}/${Math.random()}.${fileExt}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('profile-pictures')\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('profile-pictures')\r\n        .getPublicUrl(filePath);\r\n\r\n      setProfile(prev => ({ ...prev, profile_picture: publicUrl }));\r\n      \r\n      // Update the profile with the new image URL\r\n      const { error: updateError } = await supabase\r\n        .from('detailed_profiles')\r\n        .update({ profile_picture: publicUrl })\r\n        .eq('id', user.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      toast.success('Profile picture updated successfully!', {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true\r\n      });\r\n    } catch (error) {\r\n      toast.error('Error uploading image: ' + error.message, {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true\r\n      });\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-page container-fluid\">\r\n      {notification && (\r\n        <div className=\"alert alert-info alert-dismissible fade show\" role=\"alert\">\r\n          {notification}\r\n          <button type=\"button\" className=\"btn-close\" onClick={() => setNotification('')}></button>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"row\">\r\n        {/* Left Sidebar - Make it collapsible on mobile */}\r\n        <div className=\"col-lg-3 col-md-4\">\r\n          <div className=\"profile-sidebar card mb-3\">\r\n            <div className=\"d-lg-none\">\r\n              <button \r\n                className=\"btn btn-link w-100 text-start\" \r\n                onClick={() => setShowSidebar(!showSidebar)}\r\n              >\r\n                <i className=\"fas fa-bars me-2\"></i>\r\n                Menu\r\n              </button>\r\n            </div>\r\n            <div className={`card-body ${showSidebar ? '' : 'd-none d-lg-block'}`}>\r\n              <div className=\"profile-picture-container mb-3\">\r\n                <img\r\n                  src={profile.profile_picture || '/default-profile.png'}\r\n                  alt=\"Profile\"\r\n                  className=\"profile-picture img-fluid rounded-circle mb-2\"\r\n                />\r\n                {editing && (\r\n                  <div className=\"mt-2\">\r\n                    <input type=\"file\" onChange={handleImageUpload} className=\"form-control form-control-sm\" />\r\n                  </div>\r\n                )}\r\n                {uploadingImage && <Spinner />}\r\n              </div>\r\n              <h3 className=\"mb-0\">{profile.first_name} {profile.last_name}</h3>\r\n              <p className=\"text-muted\">{profile.email}</p>\r\n              <button \r\n                onClick={() => setEditing(!editing)} \r\n                className={`btn ${editing ? 'btn-secondary' : 'btn-primary'} w-100`}\r\n              >\r\n                {editing ? 'Cancel Editing' : 'Edit Profile'}\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"list-group list-group-flush\">\r\n              <button \r\n                className={`list-group-item list-group-item-action ${activeSection === 'profile' ? 'active' : ''}`}\r\n                onClick={() => setActiveSection('profile')}\r\n              >\r\n                <i className=\"fas fa-user me-2\"></i> Basic Information\r\n              </button>\r\n              <button \r\n                className={`list-group-item list-group-item-action ${activeSection === 'medical' ? 'active' : ''}`}\r\n                onClick={() => setActiveSection('medical')}\r\n              >\r\n                <i className=\"fas fa-heartbeat me-2\"></i> Medical Information\r\n              </button>\r\n              <button \r\n                className={`list-group-item list-group-item-action ${activeSection === 'emergency' ? 'active' : ''}`}\r\n                onClick={() => setActiveSection('emergency')}\r\n              >\r\n                <i className=\"fas fa-phone-alt me-2\"></i> Emergency Contacts\r\n              </button>\r\n              <button \r\n                className={`list-group-item list-group-item-action ${activeSection === 'diseases' ? 'active' : ''}`}\r\n                onClick={() => setActiveSection('diseases')}\r\n              >\r\n                <i className=\"fas fa-notes-medical me-2\"></i> Diseases & Conditions\r\n              </button>\r\n              <button \r\n                className={`list-group-item list-group-item-action ${activeSection === 'parameters' ? 'active' : ''}`}\r\n                onClick={() => setActiveSection('parameters')}\r\n              >\r\n                <i className=\"fas fa-chart-line me-2\"></i> Health Parameters\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"col-lg-9 col-md-8\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              {activeSection === 'profile' && (\r\n                <div className=\"profile-section\">\r\n                  <h4 className=\"card-title mb-4\">Basic Information</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>First Name:</label>\r\n                        {editing ? (\r\n                          <input type=\"text\" name=\"first_name\" value={profile.first_name} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.first_name}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Last Name:</label>\r\n                        {editing ? (\r\n                          <input type=\"text\" name=\"last_name\" value={profile.last_name} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.last_name}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Email:</label>\r\n                        {editing ? (\r\n                          <input type=\"email\" name=\"email\" value={profile.email} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.email}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Phone:</label>\r\n                        {editing ? (\r\n                          <input type=\"tel\" name=\"phone\" value={profile.phone} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.phone}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Address:</label>\r\n                        {editing ? (\r\n                          <input type=\"text\" name=\"address\" value={profile.address} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.address}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Bio:</label>\r\n                        {editing ? (\r\n                          <textarea name=\"bio\" value={profile.bio} onChange={handleChange} className=\"form-control\" rows=\"3\"></textarea>\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.bio}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeSection === 'medical' && (\r\n                <div className=\"medical-section\">\r\n                  <h4 className=\"card-title mb-4\">Medical Information</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Date of Birth:</label>\r\n                        {editing ? (\r\n                          <input type=\"date\" name=\"date_of_birth\" value={profile.date_of_birth} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.date_of_birth}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Gender:</label>\r\n                        {editing ? (\r\n                          <select name=\"gender\" value={profile.gender} onChange={handleChange} className=\"form-control\">\r\n                            <option value=\"\">Select Gender</option>\r\n                            <option value=\"male\">Male</option>\r\n                            <option value=\"female\">Female</option>\r\n                            <option value=\"other\">Other</option>\r\n                          </select>\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.gender}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Blood Group:</label>\r\n                        {editing ? (\r\n                          <select name=\"blood_group\" value={profile.blood_group} onChange={handleChange} className=\"form-control\">\r\n                            <option value=\"\">Select Blood Group</option>\r\n                            <option value=\"A+\">A+</option>\r\n                            <option value=\"A-\">A-</option>\r\n                            <option value=\"B+\">B+</option>\r\n                            <option value=\"B-\">B-</option>\r\n                            <option value=\"AB+\">AB+</option>\r\n                            <option value=\"AB-\">AB-</option>\r\n                            <option value=\"O+\">O+</option>\r\n                            <option value=\"O-\">O-</option>\r\n                          </select>\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.blood_group}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Height (cm):</label>\r\n                        {editing ? (\r\n                          <input type=\"number\" name=\"height\" value={profile.height} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.height}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Weight (kg):</label>\r\n                        {editing ? (\r\n                          <input type=\"number\" name=\"weight\" value={profile.weight} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.weight}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeSection === 'emergency' && (\r\n                <div className=\"emergency-section\">\r\n                  <h4 className=\"card-title mb-4\">Emergency Contact Information</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Emergency Contact Name:</label>\r\n                        {editing ? (\r\n                          <input type=\"text\" name=\"emergency_contact_name\" value={profile.emergency_contact_name} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.emergency_contact_name}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Emergency Contact Phone:</label>\r\n                        {editing ? (\r\n                          <input type=\"tel\" name=\"emergency_contact_phone\" value={profile.emergency_contact_phone} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.emergency_contact_phone}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"profile-field\">\r\n                        <label>Relationship:</label>\r\n                        {editing ? (\r\n                          <input type=\"text\" name=\"emergency_contact_relationship\" value={profile.emergency_contact_relationship} onChange={handleChange} className=\"form-control\" />\r\n                        ) : (\r\n                          <p className=\"form-control-plaintext\">{profile.emergency_contact_relationship}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeSection === 'diseases' && (\r\n                <div className=\"diseases-section\">\r\n                  <h4 className=\"card-title mb-4\">Diseases & Medical Conditions</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                      <div className=\"disease-list mb-4\">\r\n                        {diseaseNames.map((disease) => (\r\n                          <span key={disease.id} className=\"badge bg-info me-2 mb-2 p-2\">\r\n                            {disease.disease_name}\r\n                          </span>\r\n                        ))}\r\n                      </div>\r\n                      {editing && (\r\n                        <div className=\"input-group mb-3\">\r\n                          <select\r\n                            className=\"form-select\"\r\n                            value={newDiseaseName}\r\n                            onChange={(e) => setNewDiseaseName(e.target.value)}\r\n                          >\r\n                            <option value=\"\">Select a disease</option>\r\n                            {commonDiseases.map((disease) => (\r\n                              <option key={disease.id} value={disease.name}>\r\n                                {disease.name}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                          <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"Or enter a new disease\"\r\n                            value={newDiseaseName === \"\" ? \"\" : newDiseaseName}\r\n                            onChange={(e) => setNewDiseaseName(e.target.value)}\r\n                          />\r\n                          <button onClick={handleAddDiseaseName} className=\"btn btn-primary\">Add</button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Allergies Section */}\r\n                  <h5 className=\"card-title mb-3 mt-4\">Allergies</h5>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                      <div className=\"allergy-list mb-4\">\r\n                        {allergies.map((allergy) => (\r\n                          <span key={allergy.id} className=\"badge bg-warning text-dark me-2 mb-2 p-2\">\r\n                            {allergy.allergy_name} ({allergy.severity})\r\n                          </span>\r\n                        ))}\r\n                      </div>\r\n                      {editing && (\r\n                        <div className=\"row g-2\">\r\n                          <div className=\"col-sm-6\">\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Allergy name\"\r\n                              value={newAllergy.name}\r\n                              onChange={(e) => setNewAllergy({...newAllergy, name: e.target.value})}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-sm-4\">\r\n                            <select\r\n                              className=\"form-select\"\r\n                              value={newAllergy.severity}\r\n                              onChange={(e) => setNewAllergy({...newAllergy, severity: e.target.value})}\r\n                            >\r\n                              <option value=\"mild\">Mild</option>\r\n                              <option value=\"moderate\">Moderate</option>\r\n                              <option value=\"severe\">Severe</option>\r\n                            </select>\r\n                          </div>\r\n                          <div className=\"col-sm-2\">\r\n                            <button onClick={handleAddAllergy} className=\"btn btn-primary w-100\">Add</button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeSection === 'parameters' && (\r\n                <div className=\"parameters-section\">\r\n                  <h4 className=\"card-title mb-4\">Health Parameters</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                      <div className=\"parameter-list mb-4\">\r\n                        {parameters.map((param) => (\r\n                          <div key={param.id} className=\"badge bg-success me-2 mb-2 p-2\">\r\n                            {param.parameter_name}: {param.value} {param.unit}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      {editing && (\r\n                        <div className=\"row g-2\">\r\n                          <div className=\"col-sm-4\">\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Parameter name\"\r\n                              value={newParameter.name}\r\n                              onChange={(e) => setNewParameter({...newParameter, name: e.target.value})}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-sm-4\">\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Value\"\r\n                              value={newParameter.value}\r\n                              onChange={(e) => setNewParameter({...newParameter, value: e.target.value})}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-sm-2\">\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Unit\"\r\n                              value={newParameter.unit}\r\n                              onChange={(e) => setNewParameter({...newParameter, unit: e.target.value})}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-sm-2\">\r\n                            <button onClick={handleAddParameter} className=\"btn btn-primary w-100\">Add</button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {editing && (\r\n                <div className=\"mt-4 text-end\">\r\n                  <button onClick={handleSave} className=\"btn btn-success\">\r\n                    Save Changes\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/supabaseClient';\r\nimport { FaLock, FaShieldAlt, FaUserLock, FaKey, FaHistory } from 'react-icons/fa';\r\n\r\nconst SecuritySettings = () => {\r\n  const [settings, setSettings] = useState({\r\n    twoFactorEnabled: false,\r\n    emailNotifications: true,\r\n    loginNotifications: true,\r\n    passwordExpiry: 90,\r\n    maxLoginAttempts: 5\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchSecuritySettings();\r\n  }, []);\r\n\r\n  const fetchSecuritySettings = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      const { data, error } = await supabase\r\n        .from('security_settings')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      if (data) {\r\n        setSettings(data);\r\n      }\r\n    } catch (error) {\r\n      setError('Failed to load security settings');\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user found');\r\n\r\n      const { error } = await supabase\r\n        .from('security_settings')\r\n        .upsert({\r\n          user_id: user.id,\r\n          ...settings,\r\n          updated_at: new Date().toISOString()\r\n        });\r\n\r\n      if (error) throw error;\r\n      setSuccess('Security settings updated successfully');\r\n    } catch (error) {\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2 className=\"mb-4\">Security Settings</h2>\r\n      {error && (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      {success && (\r\n        <div className=\"alert alert-success\" role=\"alert\">\r\n          {success}\r\n        </div>\r\n      )}\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"mb-4\">\r\n              <h5 className=\"card-title\">\r\n                <FaShieldAlt className=\"me-2\" />\r\n                Two-Factor Authentication\r\n              </h5>\r\n              <div className=\"form-check form-switch\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  id=\"twoFactorEnabled\"\r\n                  name=\"twoFactorEnabled\"\r\n                  checked={settings.twoFactorEnabled}\r\n                  onChange={handleChange}\r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"twoFactorEnabled\">\r\n                  Enable two-factor authentication\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <h5 className=\"card-title\">\r\n                <FaUserLock className=\"me-2\" />\r\n                Login Security\r\n              </h5>\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">Maximum Login Attempts</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  name=\"maxLoginAttempts\"\r\n                  value={settings.maxLoginAttempts}\r\n                  onChange={handleChange}\r\n                  min=\"1\"\r\n                  max=\"10\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">Password Expiry (days)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  name=\"passwordExpiry\"\r\n                  value={settings.passwordExpiry}\r\n                  onChange={handleChange}\r\n                  min=\"30\"\r\n                  max=\"365\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <h5 className=\"card-title\">\r\n                <FaHistory className=\"me-2\" />\r\n                Activity Notifications\r\n              </h5>\r\n              <div className=\"form-check mb-2\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  id=\"emailNotifications\"\r\n                  name=\"emailNotifications\"\r\n                  checked={settings.emailNotifications}\r\n                  onChange={handleChange}\r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"emailNotifications\">\r\n                  Email notifications for security events\r\n                </label>\r\n              </div>\r\n              <div className=\"form-check\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  id=\"loginNotifications\"\r\n                  name=\"loginNotifications\"\r\n                  checked={settings.loginNotifications}\r\n                  onChange={handleChange}\r\n                />\r\n                <label className=\"form-check-label\" htmlFor=\"loginNotifications\">\r\n                  Notify on new device login\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <h5 className=\"card-title\">\r\n                <FaKey className=\"me-2\" />\r\n                Password Management\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-primary\"\r\n                onClick={() => {/* Implement password change logic */}}\r\n              >\r\n                Change Password\r\n              </button>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Saving...' : 'Save Security Settings'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SecuritySettings; ","import React, { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { FaDownload, FaUpload, FaHistory, FaTrash, FaFileAlt } from 'react-icons/fa';\n\nconst DataBackup = () => {\n  const [backupHistory, setBackupHistory] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  useEffect(() => {\n    fetchBackupHistory();\n  }, []);\n\n  const fetchBackupHistory = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('backup_history')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setBackupHistory(data || []);\n    } catch (error) {\n      setError('Failed to load backup history');\n    }\n  };\n\n  const handleExportData = async () => {\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('No user found');\n\n      // Fetch all user data\n      const [\n        { data: profile },\n        { data: healthMetrics },\n        { data: appointments },\n        { data: medications },\n        { data: medicalConditions },\n        { data: healthAlerts }\n      ] = await Promise.all([\n        supabase.from('profiles').select('*').eq('id', user.id).single(),\n        supabase.from('health_metrics').select('*').eq('user_id', user.id),\n        supabase.from('appointments').select('*').eq('user_id', user.id),\n        supabase.from('medications').select('*').eq('user_id', user.id),\n        supabase.from('medical_conditions').select('*').eq('user_id', user.id),\n        supabase.from('health_alerts').select('*').eq('user_id', user.id)\n      ]);\n\n      // Create backup record\n      const { data: backup, error: backupError } = await supabase\n        .from('backup_history')\n        .insert([\n          {\n            user_id: user.id,\n            type: 'export',\n            status: 'completed',\n            created_at: new Date().toISOString(),\n            backup_data: {\n              profile,\n              healthMetrics,\n              appointments,\n              medications,\n              medicalConditions,\n              healthAlerts\n            }\n          }\n        ])\n        .select()\n        .single();\n\n      if (backupError) throw backupError;\n\n      // Create downloadable file\n      const backupData = {\n        profile,\n        healthMetrics,\n        appointments,\n        medications,\n        medicalConditions,\n        healthAlerts,\n        exportDate: new Date().toISOString()\n      };\n\n      const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `digihealth-backup-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      setSuccess('Data exported successfully');\n      fetchBackupHistory();\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleImportData = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('No user found');\n\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          const backupData = JSON.parse(e.target.result);\n\n          // Create backup record\n          const { data: backup, error: backupError } = await supabase\n            .from('backup_history')\n            .insert([\n              {\n                user_id: user.id,\n                type: 'import',\n                status: 'completed',\n                created_at: new Date().toISOString()\n              }\n            ])\n            .select()\n            .single();\n\n          if (backupError) throw backupError;\n\n          // Import data to respective tables\n          if (backupData.profile) {\n            await supabase\n              .from('profiles')\n              .upsert({ ...backupData.profile, id: user.id });\n          }\n\n          if (backupData.healthMetrics) {\n            await supabase\n              .from('health_metrics')\n              .upsert(backupData.healthMetrics.map(data => ({ ...data, user_id: user.id })));\n          }\n\n          if (backupData.appointments) {\n            await supabase\n              .from('appointments')\n              .upsert(backupData.appointments.map(app => ({ ...app, user_id: user.id })));\n          }\n\n          if (backupData.medications) {\n            await supabase\n              .from('medications')\n              .upsert(backupData.medications.map(med => ({ ...med, user_id: user.id })));\n          }\n\n          if (backupData.medicalConditions) {\n            await supabase\n              .from('medical_conditions')\n              .upsert(backupData.medicalConditions.map(cond => ({ ...cond, user_id: user.id })));\n          }\n\n          if (backupData.healthAlerts) {\n            await supabase\n              .from('health_alerts')\n              .upsert(backupData.healthAlerts.map(alert => ({ ...alert, user_id: user.id })));\n          }\n\n          setSuccess('Data imported successfully');\n          fetchBackupHistory();\n        } catch (error) {\n          setError('Invalid backup file format');\n        }\n      };\n      reader.readAsText(file);\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <h2 className=\"mb-4\">Data Backup & Restore</h2>\n      {error && (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          {error}\n        </div>\n      )}\n      {success && (\n        <div className=\"alert alert-success\" role=\"alert\">\n          {success}\n        </div>\n      )}\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <div className=\"card mb-4\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">\n                <FaDownload className=\"me-2\" />\n                Export Data\n              </h5>\n              <p className=\"card-text\">\n                Download a backup of your health data, including profile information,\n                health records, appointments, and medications.\n              </p>\n              <button\n                className=\"btn btn-primary\"\n                onClick={handleExportData}\n                disabled={loading}\n              >\n                {loading ? 'Exporting...' : 'Export Data'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">\n                <FaUpload className=\"me-2\" />\n                Import Data\n              </h5>\n              <p className=\"card-text\">\n                Restore your health data from a previous backup file.\n              </p>\n              <input\n                type=\"file\"\n                className=\"form-control mb-3\"\n                accept=\".json\"\n                onChange={handleImportData}\n                disabled={loading}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">\n                <FaHistory className=\"me-2\" />\n                Backup History\n              </h5>\n              <div className=\"table-responsive\">\n                <table className=\"table\">\n                  <thead>\n                    <tr>\n                      <th>Date</th>\n                      <th>Type</th>\n                      <th>Status</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {backupHistory.map((backup) => (\n                      <tr key={backup.id}>\n                        <td>{new Date(backup.created_at).toLocaleString()}</td>\n                        <td>\n                          {backup.type === 'export' ? (\n                            <FaDownload className=\"me-1\" />\n                          ) : (\n                            <FaUpload className=\"me-1\" />\n                          )}\n                          {backup.type.charAt(0).toUpperCase() + backup.type.slice(1)}\n                        </td>\n                        <td>\n                          <span className={`badge bg-${backup.status === 'completed' ? 'success' : 'warning'}`}>\n                            {backup.status}\n                          </span>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DataBackup; ","import React, { useState } from 'react';\r\nimport { setupSupabaseTables } from '../utils/setupSupabaseTablesExtended';\r\nimport { FaDatabase, FaCheck, FaExclamationTriangle, FaSpinner } from 'react-icons/fa';\r\n\r\nconst SetupDatabase = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n  const [logs, setLogs] = useState([]);\r\n\r\n  // Override console.log to capture logs\r\n  const originalConsoleLog = console.log;\r\n  const originalConsoleError = console.error;\r\n  const originalConsoleWarn = console.warn;\r\n\r\n  const setupDatabase = async () => {\r\n    setLoading(true);\r\n    setResult(null);\r\n    setLogs([]);\r\n\r\n    // Override console methods to capture logs\r\n    console.log = (...args) => {\r\n      setLogs(prev => [...prev, { type: 'info', message: args.join(' ') }]);\r\n      originalConsoleLog(...args);\r\n    };\r\n\r\n    console.error = (...args) => {\r\n      setLogs(prev => [...prev, { type: 'error', message: args.join(' ') }]);\r\n      originalConsoleError(...args);\r\n    };\r\n\r\n    console.warn = (...args) => {\r\n      setLogs(prev => [...prev, { type: 'warning', message: args.join(' ') }]);\r\n      originalConsoleWarn(...args);\r\n    };\r\n\r\n    try {\r\n      const setupResult = await setupSupabaseTables();\r\n      setResult(setupResult);\r\n    } catch (error) {\r\n      setResult({\r\n        success: false,\r\n        message: `Unexpected error: ${error.message}`\r\n      });\r\n    } finally {\r\n      // Restore original console methods\r\n      console.log = originalConsoleLog;\r\n      console.error = originalConsoleError;\r\n      console.warn = originalConsoleWarn;\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">\r\n          <FaDatabase className=\"me-2\" />\r\n          Database Setup\r\n        </h5>\r\n        <p className=\"card-text\">\r\n          This utility will delete all existing tables and buckets in your Supabase project and recreate them with the proper structure.\r\n          <strong className=\"text-danger\"> Use with caution as this will delete all existing data!</strong>\r\n        </p>\r\n\r\n        {result && (\r\n          <div className={`alert ${result.success ? 'alert-success' : 'alert-danger'} mt-3`} role=\"alert\">\r\n            {result.success ? (\r\n              <FaCheck className=\"me-2\" />\r\n            ) : (\r\n              <FaExclamationTriangle className=\"me-2\" />\r\n            )}\r\n            {result.message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"d-grid gap-2 mt-3\">\r\n          <button\r\n            className=\"btn btn-danger\"\r\n            onClick={setupDatabase}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <FaSpinner className=\"me-2 fa-spin\" />\r\n                Setting up database...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FaDatabase className=\"me-2\" />\r\n                Reset and Setup Database\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {logs.length > 0 && (\r\n          <div className=\"mt-4\">\r\n            <h6>Setup Logs:</h6>\r\n            <div className=\"border rounded p-3 bg-light\" style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n              {logs.map((log, index) => (\r\n                <div \r\n                  key={index} \r\n                  className={`mb-1 ${\r\n                    log.type === 'error' \r\n                      ? 'text-danger' \r\n                      : log.type === 'warning' \r\n                        ? 'text-warning' \r\n                        : ''\r\n                  }`}\r\n                >\r\n                  {log.message}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SetupDatabase; ","import React, { useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport SetupDatabase from '../components/SetupDatabase';\r\nimport { FaDatabase, FaTable, FaFolder, FaInfoCircle, FaExclamationTriangle } from 'react-icons/fa';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { supabase } from '../utils/main';\r\n\r\nconst DatabaseSetup = () => {\r\n  const { user } = useAuth();\r\n  const [status, setStatus] = useState('');\r\n\r\n  // Only allow admins to access this page\r\n  if (!user || user.user_metadata?.role !== 'admin') {\r\n    return <Navigate to=\"/dashboard\" />;\r\n  }\r\n\r\n  const setupDatabase = async () => {\r\n    try {\r\n      setStatus('Setting up database...');\r\n\r\n      // Create profiles table with all necessary columns\r\n      const { error: profilesError } = await supabase.rpc('setup_profiles_table', {\r\n        sql_command: `\r\n          CREATE TABLE IF NOT EXISTS profiles (\r\n            id UUID REFERENCES auth.users ON DELETE CASCADE PRIMARY KEY,\r\n            first_name VARCHAR(255),\r\n            last_name VARCHAR(255),\r\n            date_of_birth DATE,\r\n            gender VARCHAR(50),\r\n            blood_group VARCHAR(10),\r\n            height DECIMAL,\r\n            weight DECIMAL,\r\n            allergies TEXT[],\r\n            medical_conditions TEXT[],\r\n            emergency_contact_name VARCHAR(255),\r\n            emergency_contact_phone VARCHAR(20),\r\n            emergency_contact_relationship VARCHAR(100),\r\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()),\r\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW())\r\n          );\r\n\r\n          -- Add RLS policies\r\n          ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;\r\n\r\n          CREATE POLICY \"Users can view their own profile\"\r\n            ON profiles FOR SELECT\r\n            USING (auth.uid() = id);\r\n\r\n          CREATE POLICY \"Users can update their own profile\"\r\n            ON profiles FOR UPDATE\r\n            USING (auth.uid() = id);\r\n\r\n          CREATE POLICY \"Users can insert their own profile\"\r\n            ON profiles FOR INSERT\r\n            WITH CHECK (auth.uid() = id);\r\n        `\r\n      });\r\n\r\n      if (profilesError) throw profilesError;\r\n\r\n      // Create health_metrics table\r\n      const { error: metricsError } = await supabase.rpc('setup_health_metrics_table', {\r\n        sql_command: `\r\n          CREATE TABLE IF NOT EXISTS health_metrics (\r\n            id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\r\n            user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\r\n            metric_type VARCHAR(50),\r\n            value DECIMAL,\r\n            unit VARCHAR(20),\r\n            recorded_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()),\r\n            notes TEXT\r\n          );\r\n\r\n          ALTER TABLE health_metrics ENABLE ROW LEVEL SECURITY;\r\n\r\n          CREATE POLICY \"Users can view their own health metrics\"\r\n            ON health_metrics FOR SELECT\r\n            USING (auth.uid() = user_id);\r\n\r\n          CREATE POLICY \"Users can insert their own health metrics\"\r\n            ON health_metrics FOR INSERT\r\n            WITH CHECK (auth.uid() = user_id);\r\n        `\r\n      });\r\n\r\n      if (metricsError) throw metricsError;\r\n\r\n      // Create medical_analyses table\r\n      const { error: analysesError } = await supabase.rpc('setup_medical_analyses_table', {\r\n        sql_command: `\r\n          CREATE TABLE IF NOT EXISTS medical_analyses (\r\n            id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\r\n            user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\r\n            image_type VARCHAR(50),\r\n            image_url TEXT,\r\n            result TEXT,\r\n            confidence DECIMAL,\r\n            analyzed_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW())\r\n          );\r\n\r\n          ALTER TABLE medical_analyses ENABLE ROW LEVEL SECURITY;\r\n\r\n          CREATE POLICY \"Users can view their own medical analyses\"\r\n            ON medical_analyses FOR SELECT\r\n            USING (auth.uid() = user_id);\r\n\r\n          CREATE POLICY \"Users can insert their own medical analyses\"\r\n            ON medical_analyses FOR INSERT\r\n            WITH CHECK (auth.uid() = user_id);\r\n        `\r\n      });\r\n\r\n      if (analysesError) throw analysesError;\r\n\r\n      // Create chat_history table\r\n      const { error: chatError } = await supabase.rpc('setup_chat_history_table', {\r\n        sql_command: `\r\n          CREATE TABLE IF NOT EXISTS chat_history (\r\n            id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\r\n            user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\r\n            message TEXT,\r\n            response TEXT,\r\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW())\r\n          );\r\n\r\n          ALTER TABLE chat_history ENABLE ROW LEVEL SECURITY;\r\n\r\n          CREATE POLICY \"Users can view their own chat history\"\r\n            ON chat_history FOR SELECT\r\n            USING (auth.uid() = user_id);\r\n\r\n          CREATE POLICY \"Users can insert into their own chat history\"\r\n            ON chat_history FOR INSERT\r\n            WITH CHECK (auth.uid() = user_id);\r\n        `\r\n      });\r\n\r\n      if (chatError) throw chatError;\r\n\r\n      // Create ai_recommendations table\r\n      const { error: recsError } = await supabase.rpc('setup_ai_recommendations_table', {\r\n        sql_command: `\r\n          CREATE TABLE IF NOT EXISTS ai_recommendations (\r\n            id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\r\n            user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\r\n            category VARCHAR(50),\r\n            recommendation TEXT,\r\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW())\r\n          );\r\n\r\n          ALTER TABLE ai_recommendations ENABLE ROW LEVEL SECURITY;\r\n\r\n          CREATE POLICY \"Users can view their own recommendations\"\r\n            ON ai_recommendations FOR SELECT\r\n            USING (auth.uid() = user_id);\r\n\r\n          CREATE POLICY \"Users can insert their own recommendations\"\r\n            ON ai_recommendations FOR INSERT\r\n            WITH CHECK (auth.uid() = user_id);\r\n        `\r\n      });\r\n\r\n      if (recsError) throw recsError;\r\n\r\n      setStatus('Database setup completed successfully!');\r\n    } catch (error) {\r\n      console.error('Database setup error:', error);\r\n      setStatus(`Error setting up database: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-4\">\r\n      <h1 className=\"mb-4\">\r\n        <FaDatabase className=\"me-2\" />\r\n        Database Management\r\n      </h1>\r\n\r\n      <div className=\"alert alert-warning mb-4\" role=\"alert\">\r\n        <FaExclamationTriangle className=\"me-2\" />\r\n        <strong>Warning:</strong> This page is for administrators only. The actions performed here will affect all users of the application.\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8\">\r\n          <SetupDatabase />\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <FaInfoCircle className=\"me-2\" />\r\n                Database Information\r\n              </h5>\r\n              <p className=\"card-text\">\r\n                The setup process will create the following resources:\r\n              </p>\r\n\r\n              <h6 className=\"mt-3\">\r\n                <FaTable className=\"me-2\" />\r\n                Tables\r\n              </h6>\r\n              <ul className=\"list-group mb-3\">\r\n                <li className=\"list-group-item\">detailed_profiles</li>\r\n                <li className=\"list-group-item\">profiles</li>\r\n                <li className=\"list-group-item\">conditions</li>\r\n                <li className=\"list-group-item\">medications</li>\r\n                <li className=\"list-group-item\">appointments</li>\r\n                <li className=\"list-group-item\">telehealth_consultations</li>\r\n                <li className=\"list-group-item\">vitals</li>\r\n                <li className=\"list-group-item\">diseases</li>\r\n                <li className=\"list-group-item\">medical_reports</li>\r\n                <li className=\"list-group-item\">support_tickets</li>\r\n                <li className=\"list-group-item\">chat_sessions</li>\r\n                <li className=\"list-group-item\">chat_messages</li>\r\n                <li className=\"list-group-item\">alerts</li>\r\n                <li className=\"list-group-item\">security_settings</li>\r\n                <li className=\"list-group-item\">backup_history</li>\r\n              </ul>\r\n\r\n              <h6 className=\"mt-3\">\r\n                <FaFolder className=\"me-2\" />\r\n                Storage Buckets\r\n              </h6>\r\n              <ul className=\"list-group\">\r\n                <li className=\"list-group-item\">profile-pictures</li>\r\n                <li className=\"list-group-item\">medical-reports</li>\r\n                <li className=\"list-group-item\">health-reports</li>\r\n                <li className=\"list-group-item\">chat-attachments</li>\r\n                <li className=\"list-group-item\">support-attachments</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-5\">\r\n        <button \r\n          className=\"btn btn-primary\"\r\n          onClick={setupDatabase}\r\n        >\r\n          Initialize Database\r\n        </button>\r\n        <div className=\"mt-3\">\r\n          <p>{status}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatabaseSetup; ","import React, { useState, useEffect } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport { supabase } from '../utils/main';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst HealthMetricsVisualizer = ({ mode, initialTimeRange = '1M' }) => {\r\n  const { user } = useAuth();\r\n  const [metrics, setMetrics] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedMetric, setSelectedMetric] = useState('bloodPressure');\r\n  const [timeRange, setTimeRange] = useState(initialTimeRange);\r\n\r\n  const metricOptions = [\r\n    { value: 'bloodPressure', label: 'Blood Pressure' },\r\n    { value: 'bloodSugar', label: 'Blood Sugar' },\r\n    { value: 'cholesterol', label: 'Cholesterol' },\r\n    { value: 'heartRate', label: 'Heart Rate' },\r\n    { value: 'temperature', label: 'Temperature' },\r\n    { value: 'weight', label: 'Weight' },\r\n    { value: 'oxygenSaturation', label: 'Oxygen Saturation' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n  }, [timeRange, selectedMetric]);\r\n\r\n  const fetchMetrics = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const timeRangeMap = {\r\n        '1W': '7 days',\r\n        '1M': '30 days',\r\n        '3M': '90 days',\r\n        '6M': '180 days',\r\n        '1Y': '365 days'\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('health_metrics')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .gte('recorded_at', new Date(Date.now() - (parseInt(timeRangeMap[timeRange]) * 24 * 60 * 60 * 1000)).toISOString())\r\n        .order('recorded_at', { ascending: true });\r\n\r\n      if (error) throw error;\r\n      setMetrics(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching metrics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const prepareChartData = () => {\r\n    const dates = metrics.map(m => new Date(m.recorded_at).toLocaleDateString());\r\n    const values = metrics.map(m => {\r\n      const metricValue = m.metrics[selectedMetric];\r\n      if (selectedMetric === 'bloodPressure') {\r\n        const [systolic] = metricValue.split('/');\r\n        return parseInt(systolic);\r\n      }\r\n      return parseFloat(metricValue);\r\n    });\r\n\r\n    return {\r\n      labels: dates,\r\n      datasets: [\r\n        {\r\n          label: metricOptions.find(m => m.value === selectedMetric).label,\r\n          data: values,\r\n          fill: false,\r\n          borderColor: 'rgb(75, 192, 192)',\r\n          tension: 0.1\r\n        }\r\n      ]\r\n    };\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: `${metricOptions.find(m => m.value === selectedMetric).label} Trend`\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: false\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between mb-3\">\r\n          <select\r\n            className=\"form-select w-auto\"\r\n            value={selectedMetric}\r\n            onChange={(e) => setSelectedMetric(e.target.value)}\r\n          >\r\n            {metricOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <select\r\n            className=\"form-select w-auto\"\r\n            value={timeRange}\r\n            onChange={(e) => setTimeRange(e.target.value)}\r\n          >\r\n            <option value=\"1W\">1 Week</option>\r\n            <option value=\"1M\">1 Month</option>\r\n            <option value=\"3M\">3 Months</option>\r\n            <option value=\"6M\">6 Months</option>\r\n            <option value=\"1Y\">1 Year</option>\r\n          </select>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"text-center\">Loading...</div>\r\n        ) : metrics.length > 0 ? (\r\n          <Line data={prepareChartData()} options={chartOptions} />\r\n        ) : (\r\n          <div className=\"text-center\">No data available for the selected period</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthMetricsVisualizer; ","import React, { useState } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaUpload, FaSpinner } from 'react-icons/fa';\r\n\r\nconst MedicalImageAnalyzer = () => {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const [imageType, setImageType] = useState('skin');\r\n\r\n  const imageTypes = [\r\n    { value: 'skin', label: 'Skin Condition' },\r\n    { value: 'xray', label: 'X-Ray' },\r\n    { value: 'wound', label: 'Wound/Injury' },\r\n    { value: 'eye', label: 'Eye Condition' }\r\n  ];\r\n\r\n  const analyzeImage = async (file) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      // First, upload the image to Supabase Storage\r\n      const fileName = `${user.id}/${Date.now()}-${file.name}`;\r\n      const { data: uploadData, error: uploadError } = await supabase.storage\r\n        .from('medical-images')\r\n        .upload(fileName, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      // Get the public URL of the uploaded image\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('medical-images')\r\n        .getPublicUrl(fileName);\r\n\r\n      setImageUrl(publicUrl);\r\n\r\n      // Call OpenAI's GPT-4 Vision API for analysis\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`\r\n        },\r\n        body: JSON.stringify({\r\n          model: \"gpt-4-vision-preview\",\r\n          messages: [\r\n            {\r\n              role: \"system\",\r\n              content: `You are a medical image analyzer specialized in ${imageType} conditions. Provide a detailed analysis while being cautious not to make definitive diagnoses.`\r\n            },\r\n            {\r\n              role: \"user\",\r\n              content: [\r\n                {\r\n                  type: \"text\",\r\n                  text: `Please analyze this ${imageType} image and provide insights about what you observe. Include potential concerns and recommendations for professional medical consultation if needed.`\r\n                },\r\n                {\r\n                  type: \"image_url\",\r\n                  image_url: publicUrl\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          max_tokens: 500\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      // Save analysis to database\r\n      const { error: dbError } = await supabase.from('medical_analyses').insert([{\r\n        user_id: user.id,\r\n        image_url: publicUrl,\r\n        analysis_type: imageType,\r\n        analysis_result: data.choices[0].message.content,\r\n        created_at: new Date().toISOString()\r\n      }]);\r\n\r\n      if (dbError) throw dbError;\r\n\r\n      setResult(data.choices[0].message.content);\r\n    } catch (error) {\r\n      console.error('Error analyzing image:', error);\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      analyzeImage(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <h3 className=\"card-title mb-4\">Medical Image Analysis</h3>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Image Type</label>\r\n          <select\r\n            className=\"form-select\"\r\n            value={imageType}\r\n            onChange={(e) => setImageType(e.target.value)}\r\n          >\r\n            {imageTypes.map(type => (\r\n              <option key={type.value} value={type.value}>\r\n                {type.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"form-label\">Upload Image</label>\r\n          <input\r\n            type=\"file\"\r\n            className=\"form-control\"\r\n            accept=\"image/*\"\r\n            onChange={handleFileUpload}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n\r\n        {loading && (\r\n          <div className=\"text-center mb-4\">\r\n            <FaSpinner className=\"spinner\" />\r\n            <p>Analyzing image...</p>\r\n          </div>\r\n        )}\r\n\r\n        {imageUrl && (\r\n          <div className=\"mb-4\">\r\n            <img\r\n              src={imageUrl}\r\n              alt=\"Uploaded medical image\"\r\n              className=\"img-fluid rounded\"\r\n              style={{ maxHeight: '300px' }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"alert alert-danger\" role=\"alert\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {result && (\r\n          <div className=\"mt-4\">\r\n            <h5>Analysis Results:</h5>\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-body\">\r\n                <pre className=\"mb-0\" style={{ whiteSpace: 'pre-wrap' }}>\r\n                  {result}\r\n                </pre>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicalImageAnalyzer; ","import React, { useState, useRef, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaRobot, FaUser, FaSpinner, FaPaperPlane, FaUtensils, FaFirstAid } from 'react-icons/fa';\r\n\r\nconst HealthAssistant = () => {\r\n  const { user } = useAuth();\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [mode, setMode] = useState('chat'); // chat, diet, firstAid\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    return messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const getModeSystemPrompt = () => {\r\n    switch (mode) {\r\n      case 'diet':\r\n        return \"You are a nutritionist AI assistant. Provide personalized diet recommendations based on user's health conditions and goals. Always emphasize the importance of consulting healthcare providers before making significant dietary changes.\";\r\n      case 'firstAid':\r\n        return \"You are a first aid instruction AI assistant. Provide clear, step-by-step first aid guidance for non-emergency situations. Always emphasize when professional medical attention is needed and include emergency contact recommendations when appropriate.\";\r\n      default:\r\n        return \"You are a helpful medical assistant. Explain medical terms in simple language and provide general health information. Always remind users to consult healthcare professionals for proper medical advice.\";\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMessage = input.trim();\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    // Add user message to chat\r\n    const newMessage = {\r\n      role: 'user',\r\n      content: userMessage,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setMessages(prev => [...prev, newMessage]);\r\n\r\n    try {\r\n      // Get user's health context\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('medical_conditions, allergies, current_medications')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      // Call OpenAI API\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`\r\n        },\r\n        body: JSON.stringify({\r\n          model: \"gpt-4\",\r\n          messages: [\r\n            {\r\n              role: \"system\",\r\n              content: getModeSystemPrompt()\r\n            },\r\n            {\r\n              role: \"user\",\r\n              content: `User's health context - Medical conditions: ${profile.medical_conditions.join(', ')}, Allergies: ${profile.allergies.join(', ')}, Current medications: ${profile.current_medications.join(', ')}`\r\n            },\r\n            ...messages.map(m => ({ role: m.role, content: m.content })),\r\n            { role: \"user\", content: userMessage }\r\n          ],\r\n          temperature: 0.7,\r\n          max_tokens: 500\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      // Add AI response to chat\r\n      setMessages(prev => [...prev, {\r\n        role: 'assistant',\r\n        content: data.choices[0].message.content,\r\n        timestamp: new Date().toISOString()\r\n      }]);\r\n\r\n      // Save conversation to database\r\n      await supabase.from('chat_history').insert([{\r\n        user_id: user.id,\r\n        mode,\r\n        message: userMessage,\r\n        response: data.choices[0].message.content,\r\n        created_at: new Date().toISOString()\r\n      }]);\r\n\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMessages(prev => [...prev, {\r\n        role: 'assistant',\r\n        content: 'I apologize, but I encountered an error. Please try again.',\r\n        timestamp: new Date().toISOString()\r\n      }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n          <h3 className=\"card-title mb-0\">\r\n            {mode === 'diet' ? (\r\n              <><FaUtensils className=\"me-2\" /> Diet Assistant</>\r\n            ) : mode === 'firstAid' ? (\r\n              <><FaFirstAid className=\"me-2\" /> First Aid Guide</>\r\n            ) : (\r\n              <><FaRobot className=\"me-2\" /> Health Assistant</>\r\n            )}\r\n          </h3>\r\n\r\n          <div className=\"btn-group\">\r\n            <button\r\n              className={`btn btn-${mode === 'chat' ? 'primary' : 'outline-primary'}`}\r\n              onClick={() => setMode('chat')}\r\n            >\r\n              Chat\r\n            </button>\r\n            <button\r\n              className={`btn btn-${mode === 'diet' ? 'primary' : 'outline-primary'}`}\r\n              onClick={() => setMode('diet')}\r\n            >\r\n              Diet\r\n            </button>\r\n            <button\r\n              className={`btn btn-${mode === 'firstAid' ? 'primary' : 'outline-primary'}`}\r\n              onClick={() => setMode('firstAid')}\r\n            >\r\n              First Aid\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"chat-container bg-light p-3 rounded\" style={{ height: '400px', overflowY: 'auto' }}>\r\n          {messages.map((message, index) => (\r\n            <div\r\n              key={index}\r\n              className={`d-flex ${message.role === 'user' ? 'justify-content-end' : 'justify-content-start'} mb-3`}\r\n            >\r\n              <div\r\n                className={`${\r\n                  message.role === 'user' ? 'bg-primary text-white' : 'bg-white'\r\n                } p-3 rounded shadow-sm`}\r\n                style={{ maxWidth: '75%' }}\r\n              >\r\n                <div className=\"d-flex align-items-center mb-1\">\r\n                  {message.role === 'user' ? (\r\n                    <FaUser className=\"me-2\" />\r\n                  ) : (\r\n                    <FaRobot className=\"me-2\" />\r\n                  )}\r\n                  <small className=\"text-muted\">\r\n                    {new Date(message.timestamp).toLocaleTimeString()}\r\n                  </small>\r\n                </div>\r\n                <div style={{ whiteSpace: 'pre-wrap' }}>{message.content}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"mt-3 d-flex\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control me-2\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n            placeholder={\r\n              mode === 'diet'\r\n                ? \"Ask about diet recommendations...\"\r\n                : mode === 'firstAid'\r\n                ? \"Ask about first aid instructions...\"\r\n                : \"Ask your health-related question...\"\r\n            }\r\n            disabled={loading}\r\n          />\r\n          <button\r\n            className=\"btn btn-primary\"\r\n            onClick={handleSend}\r\n            disabled={loading || !input.trim()}\r\n          >\r\n            {loading ? <FaSpinner className=\"spinner\" /> : <FaPaperPlane />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthAssistant; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../utils/main';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  FaChartLine, FaBrain, FaHeartbeat, FaFileMedical,\r\n  FaRobot, FaHistory, FaChartPie, FaChartBar\r\n} from 'react-icons/fa';\r\nimport {\r\n  Line, Bar, Pie, Radar\r\n} from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst AIInsightsDashboard = () => {\r\n  const { user } = useAuth();\r\n  const [insights, setInsights] = useState({\r\n    healthTrends: [],\r\n    imageAnalyses: [],\r\n    chatHistory: [],\r\n    recommendations: []\r\n  });\r\n  const [selectedTimeRange, setSelectedTimeRange] = useState('week');\r\n  const [selectedMetric, setSelectedMetric] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchAIInsights();\r\n  }, [user, selectedTimeRange, selectedMetric]);\r\n\r\n  const fetchAIInsights = async () => {\r\n    try {\r\n      const [healthData, imageData, chatData, recommendationsData] = await Promise.all([\r\n        supabase\r\n          .from('health_metrics')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .order('recorded_at', { ascending: false }),\r\n        supabase\r\n          .from('medical_analyses')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .order('analyzed_at', { ascending: false }),\r\n        supabase\r\n          .from('chat_history')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .order('created_at', { ascending: false }),\r\n        supabase\r\n          .from('ai_recommendations')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .order('created_at', { ascending: false })\r\n      ]);\r\n\r\n      setInsights({\r\n        healthTrends: healthData.data || [],\r\n        imageAnalyses: imageData.data || [],\r\n        chatHistory: chatData.data || [],\r\n        recommendations: recommendationsData.data || []\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching AI insights:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ai-insights-container\">\r\n      <h1 className=\"text-center mb-4\">AI Health Insights Dashboard</h1>\r\n      \r\n      {/* Controls */}\r\n      <div className=\"controls-section mb-4\">\r\n        <select \r\n          value={selectedTimeRange}\r\n          onChange={(e) => setSelectedTimeRange(e.target.value)}\r\n          className=\"form-select me-2\"\r\n        >\r\n          <option value=\"week\">Last Week</option>\r\n          <option value=\"month\">Last Month</option>\r\n          <option value=\"year\">Last Year</option>\r\n        </select>\r\n        \r\n        <select \r\n          value={selectedMetric}\r\n          onChange={(e) => setSelectedMetric(e.target.value)}\r\n          className=\"form-select\"\r\n        >\r\n          <option value=\"all\">All Metrics</option>\r\n          <option value=\"vitals\">Vital Signs</option>\r\n          <option value=\"lab\">Lab Results</option>\r\n          <option value=\"lifestyle\">Lifestyle</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Health Trends Section */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-header\">\r\n          <h3><FaChartLine /> Health Trends Analysis</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <Line\r\n                data={{\r\n                  labels: insights.healthTrends.map(d => new Date(d.recorded_at).toLocaleDateString()),\r\n                  datasets: [{\r\n                    label: 'Health Score',\r\n                    data: insights.healthTrends.map(d => d.value),\r\n                    borderColor: 'rgb(75, 192, 192)',\r\n                    tension: 0.1\r\n                  }]\r\n                }}\r\n                options={{\r\n                  responsive: true,\r\n                  plugins: {\r\n                    title: {\r\n                      display: true,\r\n                      text: 'Health Metrics Over Time'\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <Radar\r\n                data={{\r\n                  labels: ['Blood Pressure', 'Heart Rate', 'Blood Sugar', 'Sleep', 'Exercise', 'Diet'],\r\n                  datasets: [{\r\n                    label: 'Current Status',\r\n                    data: [65, 75, 70, 80, 60, 85],\r\n                    backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n                    borderColor: 'rgb(75, 192, 192)',\r\n                    pointBackgroundColor: 'rgb(75, 192, 192)'\r\n                  }]\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Image Analysis History */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-header\">\r\n          <h3><FaFileMedical /> Medical Image Analysis History</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Date</th>\r\n                  <th>Image Type</th>\r\n                  <th>Analysis Result</th>\r\n                  <th>Confidence</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {insights.imageAnalyses.map((analysis, index) => (\r\n                  <tr key={index}>\r\n                    <td>{new Date(analysis.analyzed_at).toLocaleDateString()}</td>\r\n                    <td>{analysis.image_type}</td>\r\n                    <td>{analysis.result}</td>\r\n                    <td>{analysis.confidence}%</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Recommendations */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-header\">\r\n          <h3><FaBrain /> AI Health Recommendations</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <Pie\r\n                data={{\r\n                  labels: ['Diet', 'Exercise', 'Sleep', 'Medication', 'Lifestyle'],\r\n                  datasets: [{\r\n                    data: [30, 25, 20, 15, 10],\r\n                    backgroundColor: [\r\n                      '#FF6384',\r\n                      '#36A2EB',\r\n                      '#FFCE56',\r\n                      '#4BC0C0',\r\n                      '#9966FF'\r\n                    ]\r\n                  }]\r\n                }}\r\n                options={{\r\n                  plugins: {\r\n                    title: {\r\n                      display: true,\r\n                      text: 'Recommendation Categories'\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"recommendations-list\">\r\n                {insights.recommendations.slice(0, 5).map((rec, index) => (\r\n                  <div key={index} className=\"recommendation-item\">\r\n                    <h5>{rec.category}</h5>\r\n                    <p>{rec.recommendation}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Analytics */}\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h3><FaRobot /> Health Assistant Interactions</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <Bar\r\n            data={{\r\n              labels: ['Diet Queries', 'Symptom Analysis', 'Medical Terms', 'First Aid', 'General Health'],\r\n              datasets: [{\r\n                label: 'Interaction Distribution',\r\n                data: [45, 32, 28, 15, 30],\r\n                backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n                borderColor: 'rgb(75, 192, 192)',\r\n                borderWidth: 1\r\n              }]\r\n            }}\r\n            options={{\r\n              scales: {\r\n                y: {\r\n                  beginAtZero: true\r\n                }\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIInsightsDashboard; ","import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../../utils/supabaseClient';\r\nimport Spinner from '../../components/Spinner';\r\n\r\nconst HealthMetricsAI = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [metrics, setMetrics] = useState(null);\r\n  const [analysis, setAnalysis] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchHealthMetrics();\r\n  }, []);\r\n\r\n  const fetchHealthMetrics = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error('No user logged in');\r\n\r\n      // Fetch user's health metrics\r\n      // This is a placeholder - implement actual data fetching\r\n      const mockMetrics = {\r\n        weight: [\r\n          { date: '2024-01-01', value: 70 },\r\n          { date: '2024-02-01', value: 69 },\r\n          { date: '2024-03-01', value: 68 }\r\n        ],\r\n        bloodPressure: [\r\n          { date: '2024-01-01', systolic: 120, diastolic: 80 },\r\n          { date: '2024-02-01', systolic: 118, diastolic: 78 },\r\n          { date: '2024-03-01', systolic: 122, diastolic: 82 }\r\n        ],\r\n        heartRate: [\r\n          { date: '2024-01-01', value: 72 },\r\n          { date: '2024-02-01', value: 70 },\r\n          { date: '2024-03-01', value: 71 }\r\n        ]\r\n      };\r\n\r\n      setMetrics(mockMetrics);\r\n      analyzeMetrics(mockMetrics);\r\n    } catch (error) {\r\n      console.error('Error fetching health metrics:', error);\r\n      setError('Failed to load health metrics');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const analyzeMetrics = (metrics) => {\r\n    // This is where you would implement AI analysis of the metrics\r\n    // For now, using mock analysis\r\n    const mockAnalysis = {\r\n      weight: {\r\n        trend: 'decreasing',\r\n        change: -2,\r\n        recommendation: 'Your weight shows a healthy decreasing trend. Keep up the good work!'\r\n      },\r\n      bloodPressure: {\r\n        trend: 'stable',\r\n        recommendation: 'Your blood pressure remains within normal range. Continue monitoring regularly.'\r\n      },\r\n      heartRate: {\r\n        trend: 'stable',\r\n        recommendation: 'Your heart rate is consistent and within healthy range.'\r\n      },\r\n      overall: {\r\n        status: 'Good',\r\n        recommendations: [\r\n          'Maintain current lifestyle habits',\r\n          'Continue regular exercise',\r\n          'Keep monitoring your metrics'\r\n        ]\r\n      }\r\n    };\r\n\r\n    setAnalysis(mockAnalysis);\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center py-4\"><Spinner /></div>;\r\n  if (error) return <div className=\"alert alert-danger m-4\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"container py-4\">\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n          <h2 className=\"mb-4\">AI Health Metrics Analysis</h2>\r\n\r\n          {metrics && analysis && (\r\n            <>\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-body\">\r\n                  <h4>Overall Health Status: <span className=\"text-success\">{analysis.overall.status}</span></h4>\r\n                  <div className=\"mt-3\">\r\n                    <h5>Key Findings:</h5>\r\n                    <ul className=\"list-group list-group-flush\">\r\n                      <li className=\"list-group-item\">\r\n                        <strong>Weight:</strong> {analysis.weight.recommendation}\r\n                      </li>\r\n                      <li className=\"list-group-item\">\r\n                        <strong>Blood Pressure:</strong> {analysis.bloodPressure.recommendation}\r\n                      </li>\r\n                      <li className=\"list-group-item\">\r\n                        <strong>Heart Rate:</strong> {analysis.heartRate.recommendation}\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"card mb-4\">\r\n                <div className=\"card-body\">\r\n                  <h4>Recommendations</h4>\r\n                  <ul className=\"list-group list-group-flush\">\r\n                    {analysis.overall.recommendations.map((rec, index) => (\r\n                      <li key={index} className=\"list-group-item\">\r\n                        <i className=\"fas fa-check-circle text-success me-2\"></i>\r\n                        {rec}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"alert alert-info\">\r\n                <i className=\"fas fa-info-circle me-2\"></i>\r\n                This analysis is based on your recorded health metrics. For personalized medical advice,\r\n                please consult with your healthcare provider.\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthMetricsAI; ","// Replace the direct OpenAI initialization with a proxy service\r\n\r\n// Define available models for reference\r\nexport const MODELS = {\r\n  GPT4: 'gpt-4o',\r\n  GPT4_VISION: 'gpt-4-vision-preview',\r\n  GPT3_5: 'gpt-3.5-turbo'\r\n};\r\n\r\n// Create a proxy for OpenAI API calls\r\nexport const callOpenAI = async (prompt, options = {}) => {\r\n  try {\r\n    const response = await fetch('https://digihealth-backend.onrender.com/api/analyze-report', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ \r\n        text: prompt,\r\n        ...options \r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('API request failed');\r\n    }\r\n    \r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error calling OpenAI API:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// System prompt generator (keep this as is)\r\nexport const generateSystemPrompt = (context = {}) => {\r\n  let prompt = \"You are a medical AI assistant providing health information. \";\r\n  prompt += \"Always clarify you're not a doctor and serious concerns require medical attention.\";\r\n  \r\n  if (context.userProfile) {\r\n    // Add relevant user context\r\n    const { age, gender, conditions = [], medications = [] } = context.userProfile;\r\n    \r\n    prompt += \"\\n\\nUser context:\";\r\n    if (age) prompt += `\\nAge: ${age}`;\r\n    if (gender) prompt += `\\nGender: ${gender}`;\r\n    if (conditions.length) prompt += `\\nConditions: ${conditions.join(', ')}`;\r\n    if (medications.length) prompt += `\\nMedications: ${medications.join(', ')}`;\r\n  }\r\n  \r\n  return prompt;\r\n};","import React, { useState, useRef } from 'react';\r\nimport { supabase } from '../../utils/supabaseClient'; // Make sure this path is correct\r\nimport Spinner from '../../components/Spinner'; // Make sure this path is correct\r\nimport { callOpenAI, MODELS } from '../../utils/openai';\r\nimport './MedicalImageAnalysis.css';\r\n\r\nconst MedicalImageAnalysis = () => {\r\n  const [image, setImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [results, setResults] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [notification, setNotification] = useState(null);\r\n  const [analysisType, setAnalysisType] = useState('general');\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    if (!file.type.match('image.*')) {\r\n      setNotification({\r\n        type: 'danger',\r\n        message: 'Please upload a valid image file (JPEG, PNG, etc.)'\r\n      });\r\n      return;\r\n    }\r\n\r\n    setImage(file);\r\n    setImagePreview(URL.createObjectURL(file));\r\n    setResults(null);\r\n    setError(null);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setImage(null);\r\n    setImagePreview(null);\r\n    setResults(null);\r\n    setError(null);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const getAnalysisPrompt = (type) => {\r\n    const basePrompt = \"You are a medical imaging specialist AI. Analyze this medical image and provide detailed observations. \";\r\n    \r\n    const prompts = {\r\n      'general': basePrompt + \"Describe what you see, potential abnormalities, and possible conditions it might indicate. Be thorough but cautious about making definitive diagnoses.\",\r\n      'skin': basePrompt + \"This is a skin-related image. Describe the lesion/condition characteristics, possible differential diagnoses, and any concerning features. Mention if further evaluation is recommended.\",\r\n      'xray': basePrompt + \"This is an X-ray image. Describe the visible structures, any abnormalities, potential fractures, lesions, or other findings. Interpret the image as thoroughly as possible.\",\r\n      'scan': basePrompt + \"This is a CT/MRI scan. Describe the visible anatomical structures, any abnormalities, masses, inflammations, or other noteworthy findings. Provide detailed analysis of tissue characteristics.\",\r\n      'pathology': basePrompt + \"This is a pathology slide. Describe the cellular structures, any abnormal cells, patterns, or markers of disease. Analyze tissue architecture and cellular morphology.\"\r\n    };\r\n    \r\n    return prompts[type] || prompts['general'];\r\n  };\r\n\r\n  const getDisclaimer = (type) => {\r\n    const baseDisclaimer = \"This AI analysis is not a substitute for professional medical diagnosis. Please consult with a healthcare provider for proper evaluation and diagnosis.\";\r\n    \r\n    const disclaimers = {\r\n      'skin': baseDisclaimer + \" Skin conditions particularly require in-person examination as many can appear similar in images.\",\r\n      'xray': baseDisclaimer + \" X-ray interpretation requires board-certified radiologists for official diagnosis.\",\r\n      'scan': baseDisclaimer + \" CT/MRI scans are complex and require specialized medical training to properly diagnose.\",\r\n      'pathology': baseDisclaimer + \" Pathology diagnosis requires microscopic examination by a certified pathologist.\"\r\n    };\r\n    \r\n    return disclaimers[type] || baseDisclaimer;\r\n  };\r\n\r\n  const analyzeImage = async () => {\r\n    if (!image) return;\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Convert image to base64\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(image);\r\n      \r\n      reader.onloadend = async () => {\r\n        const base64Image = reader.result;\r\n        \r\n        try {\r\n          // Create a prompt for image analysis\r\n          const prompt = `\r\n            You are a medical imaging specialist AI. Analyze this medical image and provide detailed observations.\r\n            ${getAnalysisPrompt(analysisType)}\r\n            \r\n            Please provide your analysis in this format:\r\n            {\r\n              \"findings\": [list of key findings],\r\n              \"interpretation\": [detailed analysis],\r\n              \"recommendations\": [any recommended follow-ups],\r\n              \"differential_diagnosis\": [possible conditions to consider]\r\n            }\r\n          `;\r\n\r\n          // Call your backend API instead of OpenAI directly\r\n          const result = await callOpenAI(prompt, {\r\n            imageUrl: base64Image,\r\n            analysisType: analysisType,\r\n            isImageAnalysis: true\r\n          });\r\n          \r\n          // Save results\r\n          setResults({\r\n            analysis: result.interpretation || result,\r\n            findings: result.findings || [],\r\n            recommendations: result.recommendations || [],\r\n            date: new Date().toISOString(),\r\n            disclaimer: getDisclaimer(analysisType),\r\n            imageType: analysisType\r\n          });\r\n          \r\n          // Save analysis to database\r\n          saveAnalysisToDatabase(result.interpretation || result);\r\n          \r\n        } catch (apiError) {\r\n          console.error('API error:', apiError);\r\n          setError('Error analyzing image. Please try again or use a different image.');\r\n        }\r\n        \r\n        setLoading(false);\r\n      };\r\n      \r\n      reader.onerror = () => {\r\n        setError('Error reading image file. Please try again with a different image.');\r\n        setLoading(false);\r\n      };\r\n      \r\n    } catch (e) {\r\n      console.error('Error processing image:', e);\r\n      setError('Error processing image. Please try again.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const saveAnalysisToDatabase = async (analysisText) => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      \r\n      // Save image to storage\r\n      const fileExt = image.name.split('.').pop();\r\n      const fileName = `${user.id}/${Date.now()}.${fileExt}`;\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('medical-images')\r\n        .upload(fileName, image);\r\n        \r\n      if (uploadError) throw uploadError;\r\n      \r\n      // Get image URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('medical-images')\r\n        .getPublicUrl(fileName);\r\n      \r\n      // Save analysis to database\r\n      await supabase\r\n        .from('image_analyses')\r\n        .insert({\r\n          user_id: user.id,\r\n          image_url: publicUrl,\r\n          analysis_type: analysisType,\r\n          analysis_result: analysisText,\r\n          created_at: new Date().toISOString()\r\n        });\r\n        \r\n    } catch (error) {\r\n      console.error('Error saving analysis:', error);\r\n      // Continue anyway since this is just for saving history\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid py-4\">\r\n      {notification && (\r\n        <div className={`alert alert-${notification.type} alert-dismissible fade show`}>\r\n          {notification.message}\r\n          <button \r\n            type=\"button\" \r\n            className=\"btn-close\" \r\n            onClick={() => setNotification(null)}\r\n          ></button>\r\n        </div>\r\n      )}\r\n\r\n      <h1 className=\"mb-4\">Medical Image Analysis</h1>\r\n      \r\n      <div className=\"row\">\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card shadow-sm mb-4\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Upload Medical Image</h5>\r\n              <p className=\"card-text text-muted\">\r\n                Upload a medical image for AI analysis. \r\n                Supported types: X-rays, skin conditions, CT/MRI scans, pathology slides.\r\n              </p>\r\n              \r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"analysisType\" className=\"form-label\">Analysis Type</label>\r\n                <select \r\n                  id=\"analysisType\"\r\n                  className=\"form-select\"\r\n                  value={analysisType}\r\n                  onChange={(e) => setAnalysisType(e.target.value)}\r\n                >\r\n                  <option value=\"general\">General Medical Image Analysis</option>\r\n                  <option value=\"skin\">Skin Condition/Lesion</option>\r\n                  <option value=\"xray\">X-Ray</option>\r\n                  <option value=\"scan\">CT/MRI Scan</option>\r\n                  <option value=\"pathology\">Pathology Slide</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"imageUpload\" className=\"form-label\">Upload Image</label>\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"form-control\"\r\n                  id=\"imageUpload\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageChange}\r\n                  ref={fileInputRef}\r\n                />\r\n              </div>\r\n              \r\n              {imagePreview && (\r\n                <div className=\"mb-3 text-center\">\r\n                  <img \r\n                    src={imagePreview} \r\n                    alt=\"Preview\" \r\n                    className=\"img-fluid mb-2 border rounded\"\r\n                    style={{ maxHeight: '300px' }} \r\n                  />\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"d-grid gap-2\">\r\n                <button \r\n                  className=\"btn btn-primary\" \r\n                  onClick={analyzeImage}\r\n                  disabled={!image || loading}\r\n                >\r\n                  {loading ? <><Spinner size=\"sm\" /> Analyzing...</> : 'Analyze Image'}\r\n                </button>\r\n                <button \r\n                  className=\"btn btn-outline-secondary\" \r\n                  onClick={resetForm}\r\n                  disabled={loading}\r\n                >\r\n                  Reset\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"col-lg-6\">\r\n          {loading ? (\r\n            <div className=\"card shadow-sm mb-4\">\r\n              <div className=\"card-body text-center py-5\">\r\n                <Spinner />\r\n                <p className=\"mt-3\">Analyzing your medical image...</p>\r\n                <p className=\"text-muted small\">This may take a moment</p>\r\n              </div>\r\n            </div>\r\n          ) : results ? (\r\n            <div className=\"card shadow-sm mb-4\">\r\n              <div className=\"card-header bg-primary text-white\">\r\n                <h5 className=\"card-title mb-0\">Analysis Results</h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"analysis-content\">\r\n                  {results.analysis.split('\\n').map((paragraph, idx) => (\r\n                    paragraph ? <p key={idx}>{paragraph}</p> : <br key={idx} />\r\n                  ))}\r\n                </div>\r\n                <div className=\"alert alert-warning mt-3\">\r\n                  <strong>Important Disclaimer:</strong> {results.disclaimer}\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer text-muted\">\r\n                <small>Analysis generated on {new Date(results.date).toLocaleString()}</small>\r\n              </div>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"alert alert-danger\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <div className=\"card shadow-sm mb-4\">\r\n              <div className=\"card-body p-5 text-center\">\r\n                <div className=\"text-muted mb-3\">\r\n                  <i className=\"fas fa-microscope fa-3x\"></i>\r\n                </div>\r\n                <h5>Upload an image to see analysis results</h5>\r\n                <p className=\"text-muted\">\r\n                  The AI will analyze your medical image and provide insights.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"mt-4\">\r\n        <div className=\"card shadow-sm\">\r\n          <div className=\"card-body\">\r\n            <h5>About Medical Image Analysis</h5>\r\n            <p>\r\n              This feature uses AI to analyze various types of medical images. \r\n              Please note that this is not a substitute for professional medical diagnosis.\r\n              Always consult with a healthcare provider for proper evaluation.\r\n            </p>\r\n            <div className=\"row g-4 mt-2\">\r\n              <div className=\"col-md-6\">\r\n                <h6>Common Uses</h6>\r\n                <ul>\r\n                  <li>Preliminary analysis of skin conditions</li>\r\n                  <li>Identifying potential areas of concern in X-rays</li>\r\n                  <li>Understanding CT/MRI scan information</li>\r\n                  <li>Analyzing pathology slides</li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <h6>Limitations</h6>\r\n                <ul>\r\n                  <li>Not a replacement for professional diagnosis</li>\r\n                  <li>Quality of analysis depends on image quality</li>\r\n                  <li>May not detect all conditions or abnormalities</li>\r\n                  <li>Should be used for educational purposes only</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicalImageAnalysis;","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../../utils/main';\r\nimport { callOpenAI } from '../../utils/openai'; // Use our proxy utility instead of direct OpenAI\r\nimport Spinner from '../../components/Spinner';\r\nimport './HealthRecommendations.css';\r\n\r\nconst HealthRecommendations = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [userId, setUserId] = useState(null);\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [recommendations, setRecommendations] = useState(null);\r\n  const [history, setHistory] = useState([]);\r\n  const [selectedFocus, setSelectedFocus] = useState('general');\r\n  const [additionalContext, setAdditionalContext] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Focus area options\r\n  const focusAreas = [\r\n    { id: 'general', label: 'General Health' },\r\n    { id: 'nutrition', label: 'Nutrition & Diet' },\r\n    { id: 'fitness', label: 'Fitness & Exercise' },\r\n    { id: 'sleep', label: 'Sleep Improvement' },\r\n    { id: 'stress', label: 'Stress Management' },\r\n    { id: 'chronic', label: 'Chronic Condition Management' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const checkUser = async () => {\r\n      try {\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (!user) {\r\n          navigate('/login');\r\n          return;\r\n        }\r\n        setUserId(user.id);\r\n        fetchUserProfile(user.id);\r\n        fetchRecommendationHistory(user.id);\r\n      } catch (error) {\r\n        console.error('Error checking authentication', error);\r\n      }\r\n    };\r\n\r\n    checkUser();\r\n  }, [navigate]);\r\n\r\n  const fetchUserProfile = async (userId) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select(`\r\n          first_name, \r\n          last_name, \r\n          date_of_birth, \r\n          gender, \r\n          height, \r\n          weight,\r\n          user_conditions (\r\n            condition_name\r\n          ),\r\n          user_medications (\r\n            medication_name,\r\n            dosage\r\n          ),\r\n          health_metrics (*)\r\n        `)\r\n        .eq('id', userId)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      // Calculate BMI if height and weight are available\r\n      let bmi = null;\r\n      if (data.height && data.weight) {\r\n        const heightInMeters = data.height / 100;\r\n        bmi = (data.weight / (heightInMeters * heightInMeters)).toFixed(1);\r\n      }\r\n\r\n      setUserProfile({\r\n        ...data,\r\n        bmi,\r\n        conditions: data.user_conditions?.map(c => c.condition_name) || [],\r\n        medications: data.user_medications?.map(m => m.medication_name) || []\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching profile', error);\r\n    }\r\n  };\r\n\r\n  const fetchRecommendationHistory = async (userId) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('health_recommendations')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setHistory(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching recommendation history', error);\r\n    }\r\n  };\r\n\r\n  const generateRecommendations = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    if (!userProfile) {\r\n      setError('Please complete your health profile first.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Create a prompt for recommendations\r\n      const prompt = `\r\n        You are a health and wellness advisor. Based on the following user profile, provide personalized health recommendations.\r\n        \r\n        User Profile:\r\n        - Age: ${calculateAge(userProfile.date_of_birth)}\r\n        - Gender: ${userProfile.gender || 'Not specified'}\r\n        - Height: ${userProfile.height ? `${userProfile.height} cm` : 'Not provided'}\r\n        - Weight: ${userProfile.weight ? `${userProfile.weight} kg` : 'Not provided'}\r\n        - BMI: ${userProfile.bmi || 'Not calculated'}\r\n        ${userProfile.conditions.length > 0 ? `- Medical Conditions: ${userProfile.conditions.join(', ')}` : '- No medical conditions specified'}\r\n        ${userProfile.medications.length > 0 ? `- Medications: ${userProfile.medications.join(', ')}` : '- No medications specified'}\r\n        \r\n        Focus area: ${selectedFocus}\r\n        \r\n        ${additionalContext ? `Additional context: ${additionalContext}` : ''}\r\n        \r\n        Please provide detailed health recommendations specific to the focus area. Include:\r\n        1. A summary of key recommendations\r\n        2. Detailed explanations and guidance\r\n        3. Specific actionable steps\r\n        4. Any relevant warnings or precautions\r\n        \r\n        Format your response as a JSON object with these keys:\r\n        - summary: A brief summary of recommendations (1-2 sentences)\r\n        - recommendations: Array of specific recommendation objects, each with:\r\n          - title: Short title for the recommendation\r\n          - description: Detailed explanation\r\n          - action_steps: Array of specific action steps\r\n        - warnings: Any important precautions or warnings\r\n      `;\r\n\r\n      // Call our backend API through the utility function\r\n      const result = await callOpenAI(prompt);\r\n      \r\n      // Store the result \r\n      const newRecommendations = {\r\n        focus_area: selectedFocus,\r\n        summary: result.summary || '',\r\n        recommendations: result.recommendations || [],\r\n        warnings: result.warnings || [],\r\n        created_at: new Date().toISOString()\r\n      };\r\n      \r\n      setRecommendations(newRecommendations);\r\n      \r\n      // Save to database\r\n      await saveRecommendationsToDatabase(newRecommendations);\r\n      \r\n      // Refresh history\r\n      fetchRecommendationHistory(userId);\r\n\r\n    } catch (error) {\r\n      console.error('Error generating recommendations:', error);\r\n      setError('Failed to generate recommendations. Please try again later.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const saveRecommendationsToDatabase = async (recommendations) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('health_recommendations')\r\n        .insert([{\r\n          user_id: userId,\r\n          focus_area: recommendations.focus_area,\r\n          recommendations: JSON.stringify(recommendations),\r\n          created_at: recommendations.created_at\r\n        }]);\r\n        \r\n      if (error) throw error;\r\n    } catch (error) {\r\n      console.error('Error saving recommendations:', error);\r\n      // Continue anyway - user still has the recommendations displayed\r\n    }\r\n  };\r\n\r\n  const calculateAge = (dateOfBirth) => {\r\n    if (!dateOfBirth) return 'Unknown';\r\n    \r\n    const today = new Date();\r\n    const birthDate = new Date(dateOfBirth);\r\n    let age = today.getFullYear() - birthDate.getFullYear();\r\n    const m = today.getMonth() - birthDate.getMonth();\r\n    \r\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n      age--;\r\n    }\r\n    \r\n    return age;\r\n  };\r\n\r\n  const viewHistoricalRecommendation = async (id) => {\r\n    try {\r\n      const item = history.find(h => h.id === id);\r\n      if (item) {\r\n        setRecommendations(JSON.parse(item.recommendations));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error viewing historical recommendation:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-4\">\r\n      <h1 className=\"mb-4\">AI Health Recommendations</h1>\r\n      \r\n      {error && (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"row\">\r\n        <div className=\"col-lg-4 mb-4\">\r\n          <div className=\"card shadow-sm\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Generate Recommendations</h5>\r\n              \r\n              {!userProfile ? (\r\n                <div className=\"alert alert-warning\">\r\n                  Please complete your health profile to receive personalized recommendations.\r\n                  <div className=\"mt-3\">\r\n                    <button \r\n                      className=\"btn btn-primary\"\r\n                      onClick={() => navigate('/profile')}\r\n                    >\r\n                      Complete Profile\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"focusArea\" className=\"form-label\">Focus Area</label>\r\n                    <select\r\n                      id=\"focusArea\"\r\n                      className=\"form-select\"\r\n                      value={selectedFocus}\r\n                      onChange={(e) => setSelectedFocus(e.target.value)}\r\n                      disabled={loading}\r\n                    >\r\n                      {focusAreas.map(area => (\r\n                        <option key={area.id} value={area.id}>{area.label}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"additionalContext\" className=\"form-label\">Additional Context (Optional)</label>\r\n                    <textarea\r\n                      id=\"additionalContext\"\r\n                      className=\"form-control\"\r\n                      rows=\"3\"\r\n                      placeholder=\"Add any specific concerns or goals...\"\r\n                      value={additionalContext}\r\n                      onChange={(e) => setAdditionalContext(e.target.value)}\r\n                      disabled={loading}\r\n                    ></textarea>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={generateRecommendations}\r\n                    disabled={loading}\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <Spinner size=\"sm\" /> Generating...\r\n                      </>\r\n                    ) : (\r\n                      'Generate Recommendations'\r\n                    )}\r\n                  </button>\r\n                </>\r\n              )}\r\n              \r\n              {history.length > 0 && (\r\n                <div className=\"mt-4\">\r\n                  <h6>Previous Recommendations</h6>\r\n                  <div className=\"list-group\" style={{ maxHeight: '250px', overflowY: 'auto' }}>\r\n                    {history.map(item => (\r\n                      <button\r\n                        key={item.id}\r\n                        className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\"\r\n                        onClick={() => viewHistoricalRecommendation(item.id)}\r\n                      >\r\n                        <div>\r\n                          <div>{focusAreas.find(fa => fa.id === item.focus_area)?.label || item.focus_area}</div>\r\n                          <small className=\"text-muted\">\r\n                            {new Date(item.created_at).toLocaleDateString()}\r\n                          </small>\r\n                        </div>\r\n                        <span className=\"badge bg-primary rounded-pill\">View</span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"col-lg-8\">\r\n          {loading ? (\r\n            <div className=\"card shadow-sm\">\r\n              <div className=\"card-body text-center py-5\">\r\n                <Spinner />\r\n                <p className=\"mt-3\">Generating personalized health recommendations...</p>\r\n                <p className=\"text-muted small\">This may take a moment as our AI analyzes your health profile</p>\r\n              </div>\r\n            </div>\r\n          ) : recommendations ? (\r\n            <div className=\"card shadow-sm\">\r\n              <div className=\"card-header bg-primary text-white\">\r\n                <h5 className=\"mb-0\">\r\n                  {focusAreas.find(fa => fa.id === recommendations.focus_area)?.label || recommendations.focus_area} Recommendations\r\n                </h5>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <p className=\"lead\">{recommendations.summary}</p>\r\n                \r\n                <div className=\"recommendations-list mt-4\">\r\n                  {recommendations.recommendations.map((rec, index) => (\r\n                    <div key={index} className=\"recommendation-item mb-4\">\r\n                      <h5>{rec.title}</h5>\r\n                      <p>{rec.description}</p>\r\n                      \r\n                      {rec.action_steps?.length > 0 && (\r\n                        <div className=\"action-steps\">\r\n                          <h6>Action Steps:</h6>\r\n                          <ul>\r\n                            {rec.action_steps.map((step, idx) => (\r\n                              <li key={idx}>{step}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                \r\n                {recommendations.warnings && (\r\n                  <div className=\"alert alert-warning mt-3\">\r\n                    <h6>Important Notes:</h6>\r\n                    <p>{recommendations.warnings}</p>\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"disclaimer mt-4\">\r\n                  <small className=\"text-muted\">\r\n                    <strong>Disclaimer:</strong> These recommendations are generated by AI based on your profile information. \r\n                    They are not a substitute for professional medical advice. Always consult with healthcare providers before \r\n                    making significant changes to your health regimen.\r\n                  </small>\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer text-muted\">\r\n                <small>Generated on {new Date(recommendations.created_at).toLocaleString()}</small>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"card shadow-sm\">\r\n              <div className=\"card-body p-5 text-center\">\r\n                <div className=\"text-muted mb-3\">\r\n                  <i className=\"fas fa-lightbulb fa-3x\"></i>\r\n                </div>\r\n                <h5>Select a focus area and generate recommendations</h5>\r\n                <p className=\"text-muted\">\r\n                  Our AI will analyze your health profile and provide personalized recommendations\r\n                  based on your specific needs and goals.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"card shadow-sm mt-4\">\r\n            <div className=\"card-body\">\r\n              <h5>How We Create Your Recommendations</h5>\r\n              <p>\r\n                Our AI-powered recommendation system uses multiple data points from your health profile to generate personalized health guidance:\r\n              </p>\r\n              <div className=\"row g-4\">\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"d-flex mb-2\">\r\n                    <div className=\"me-3 text-primary\">\r\n                      <i className=\"fas fa-user-circle fa-lg\"></i>\r\n                    </div>\r\n                    <div>\r\n                      <h6>Your Profile</h6>\r\n                      <p className=\"text-muted small mb-0\">\r\n                        Age, gender, height, weight, and BMI are used to tailor recommendations to your body type and demographics.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"d-flex mb-2\">\r\n                    <div className=\"me-3 text-primary\">\r\n                      <i className=\"fas fa-notes-medical fa-lg\"></i>\r\n                    </div>\r\n                    <div>\r\n                      <h6>Medical Conditions</h6>\r\n                      <p className=\"text-muted small mb-0\">\r\n                        Any conditions listed in your profile are considered to ensure recommendations are appropriate and safe.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"d-flex mb-2\">\r\n                    <div className=\"me-3 text-primary\">\r\n                      <i className=\"fas fa-chart-line fa-lg\"></i>\r\n                    </div>\r\n                    <div>\r\n                      <h6>Health Parameters</h6>\r\n                      <p className=\"text-muted small mb-0\">\r\n                        Your recorded health metrics like blood pressure, cholesterol, and glucose levels inform specific health guidance.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"d-flex\">\r\n                    <div className=\"me-3 text-primary\">\r\n                      <i className=\"fas fa-brain fa-lg\"></i>\r\n                    </div>\r\n                    <div>\r\n                      <h6>AI Analysis</h6>\r\n                      <p className=\"text-muted small mb-0\">\r\n                        Advanced AI models analyze your complete health profile to generate evidence-based recommendations specific to your selected focus area.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"alert alert-info mt-3 mb-0\">\r\n                <small>\r\n                  <strong>Privacy Note:</strong> Your health data is processed securely. We use anonymized data when communicating with AI services to ensure your privacy is protected.\r\n                </small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthRecommendations;","import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport DashboardLayout from './components/DashboardLayout';\r\nimport Navbar from './components/Navbar';\r\nimport Login from './pages/Login';\r\nimport Register from './pages/Register';\r\nimport Dashboard from './pages/Dashboard';\r\nimport HealthOverview from './pages/HealthOverview';\r\nimport MedicalHistoryPage from './pages/MedicalHistoryPage';\r\nimport ChronicDiseaseManagementPage from './pages/ChronicDiseaseManagementPage';\r\nimport VaccinationHistoryPage from './pages/VaccinationHistoryPage';\r\nimport MedicationTracker from './pages/MedicationTracker';\r\nimport HealthAnalyticsPage from './pages/HealthAnalyticsPage';\r\nimport UpcomingAppointmentsPage from './pages/UpcomingAppointmentsPage';\r\nimport AppointmentHistoryPage from './pages/AppointmentHistoryPage';\r\nimport TelehealthConsultationsPage from './pages/TelehealthConsultationsPage';\r\nimport AppointmentRemindersPage from './pages/AppointmentRemindersPage';\r\nimport HelpCenterPage from './pages/HelpCenterPage';\r\nimport ContactSupportPage from './pages/ContactSupportPage';\r\nimport LiveChat from './pages/LiveChat';\r\nimport ProfilePage from './pages/ProfilePage';\r\nimport SecuritySettings from './pages/SecuritySettings';\r\nimport DataBackup from './pages/DataBackup';\r\nimport DatabaseSetup from './pages/DatabaseSetup';\r\nimport HealthMetricsVisualizer from './components/HealthMetricsVisualizer';\r\nimport MedicalImageAnalyzer from './components/MedicalImageAnalyzer';\r\nimport HealthAssistant from './components/HealthAssistant';\r\nimport AIInsightsDashboard from './components/AIInsightsDashboard';\r\nimport HealthMetricsAI from './pages/ai/HealthMetricsAI';\r\nimport ImageAnalysisAI from './pages/ai/ImageAnalysisAI';\r\nimport HealthAssistantAI from './pages/ai/HealthAssistantAI';\r\nimport SymptomCheckerAI from './pages/ai/SymptomCheckerAI';\r\nimport MedicalImageAnalysis from './pages/ai/MedicalImageAnalysis';\r\nimport HealthRecommendations from './pages/ai/HealthRecommendations';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router basename=\"/DiGiHealthAdv\">\r\n      <AuthProvider>\r\n        <ToastContainer\r\n          position=\"top-right\"\r\n          autoClose={5000}\r\n          hideProgressBar={false}\r\n          newestOnTop\r\n          closeOnClick\r\n          rtl={false}\r\n          pauseOnFocusLoss\r\n          draggable\r\n          pauseOnHover\r\n          theme=\"colored\"\r\n        />\r\n        <Routes>\r\n          <Route path=\"/\" element={<Login />} />\r\n          <Route path=\"/register\" element={<Register />} />\r\n          <Route path=\"/dashboard\" element={<DashboardLayout><Dashboard /></DashboardLayout>} />\r\n          <Route path=\"/health-overview\" element={<DashboardLayout><HealthOverview /></DashboardLayout>} />\r\n          <Route path=\"/medical-history\" element={<DashboardLayout><MedicalHistoryPage /></DashboardLayout>} />\r\n          <Route path=\"/chronic-disease-management\" element={<DashboardLayout><ChronicDiseaseManagementPage /></DashboardLayout>} />\r\n          <Route path=\"/vaccination-history\" element={<DashboardLayout><VaccinationHistoryPage /></DashboardLayout>} />\r\n          <Route path=\"/medication-tracker\" element={<DashboardLayout><MedicationTracker /></DashboardLayout>} />\r\n          <Route path=\"/health-analytics\" element={<DashboardLayout><HealthAnalyticsPage /></DashboardLayout>} />\r\n          <Route path=\"/appointments/upcoming\" element={<DashboardLayout><UpcomingAppointmentsPage /></DashboardLayout>} />\r\n          <Route path=\"/appointments/history\" element={<DashboardLayout><AppointmentHistoryPage /></DashboardLayout>} />\r\n          <Route path=\"/appointments/telehealth\" element={<DashboardLayout><TelehealthConsultationsPage /></DashboardLayout>} />\r\n          <Route path=\"/appointments/reminders\" element={<DashboardLayout><AppointmentRemindersPage /></DashboardLayout>} />\r\n          <Route path=\"/help-center\" element={<DashboardLayout><HelpCenterPage /></DashboardLayout>} />\r\n          <Route path=\"/support/contact\" element={<DashboardLayout><ContactSupportPage /></DashboardLayout>} />\r\n          <Route path=\"/support/chat\" element={<DashboardLayout><LiveChat /></DashboardLayout>} />\r\n          <Route path=\"/profile\" element={<DashboardLayout><ProfilePage /></DashboardLayout>} />\r\n          <Route path=\"/settings/security\" element={<DashboardLayout><SecuritySettings /></DashboardLayout>} />\r\n          <Route path=\"/settings/backup\" element={<DashboardLayout><DataBackup /></DashboardLayout>} />\r\n          <Route path=\"/admin/database-setup\" element={<DashboardLayout><DatabaseSetup /></DashboardLayout>} />\r\n          <Route path=\"/health-metrics\" element={<DashboardLayout><HealthMetricsVisualizer /></DashboardLayout>} />\r\n          <Route path=\"/image-analysis\" element={<DashboardLayout><MedicalImageAnalyzer /></DashboardLayout>} />\r\n          <Route path=\"/health-assistant\" element={<DashboardLayout><HealthAssistant /></DashboardLayout>} />\r\n          <Route path=\"/ai-insights\" element={<DashboardLayout><AIInsightsDashboard /></DashboardLayout>} />\r\n          <Route path=\"/health-metrics/upload\" element={<DashboardLayout><HealthMetricsVisualizer mode=\"upload\" /></DashboardLayout>} />\r\n          <Route path=\"/image-analysis/history\" element={<DashboardLayout><MedicalImageAnalyzer mode=\"history\" /></DashboardLayout>} />\r\n          <Route path=\"/health-assistant/recommendations\" element={<DashboardLayout><HealthAssistant mode=\"recommendations\" /></DashboardLayout>} />\r\n          <Route path=\"/ai/health-metrics\" element={<DashboardLayout><HealthMetricsAI /></DashboardLayout>} />\r\n          <Route path=\"/ai/image-analysis\" element={<DashboardLayout><MedicalImageAnalysis /></DashboardLayout>} />\r\n          <Route path=\"/ai/health-assistant\" element={<DashboardLayout><HealthAssistant /></DashboardLayout>} />\r\n          <Route path=\"/ai/health-recommendations\" element={<DashboardLayout><HealthRecommendations /></DashboardLayout>} />\r\n          <Route path=\"/ai/symptom-checker\" element={<DashboardLayout><HealthAssistant mode=\"symptoms\" /></DashboardLayout>} />\r\n          <Route path=\"/ai/image-analysis\" element={<MedicalImageAnalysis />} />\r\n          <Route path=\"/ai/health-assistant\" element={<HealthAssistant />} />\r\n          <Route path=\"/ai/health-recommendations\" element={<HealthRecommendations />} />\r\n        </Routes>\r\n      </AuthProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; See https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n} ","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals; ","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport './styles/buttons.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorker';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}